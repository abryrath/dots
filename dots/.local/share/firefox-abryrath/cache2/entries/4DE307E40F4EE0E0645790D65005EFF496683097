!function(e){function t(t){for(var i,r,a=t[0],c=t[1],u=t[2],d=0,h=[];a.length>d;d++)o[r=a[d]]&&h.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(l&&l(t);h.length;)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;s.length>t;t++){for(var n=s[t],r=!0,a=1;n.length>a;a++){0!==o[n[a]]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var r={},o={15:0},s=[];i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,i){n=o[e]=[t,i]});t.push(n[2]=r);var s,a=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+({14:"vendors~draggable~touch-punch",18:"jwcryptoShim",19:"touch-punch",20:"vendors~fxaClient",21:"vendors~fxa-common-password-list",22:"vendors~fxaCryptoDeriver"}[e]||e)+".bundle.js"}(e),0!==c.src.indexOf(window.location.origin+"/")&&(c.crossOrigin="anonymous"),s=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");s.type=i,s.request=r,n[1](s)}o[e]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,a.appendChild(c)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/bundle-2ac26f7c65960eac94632450b31e7db40fdeb026/",i.oe=function(e){throw e};var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;a.length>u;u++)t(a[u]);var l=c;s.push([226,16]),n()}([,,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(39),s=new(n(18)),a=function(e){return e},c=a("Unexpected error"),u=a("The link you clicked to verify your email is expired."),l=a("You've tried too many times. Try again later."),d=a("You've tried too many times. Try again %(retryAfterLocalized)s."),h={UNEXPECTED_ERROR:{errno:999,message:c},INVALID_TOKEN:{errno:110,message:a("Invalid token")},INVALID_TIMESTAMP:{errno:111,message:a("Invalid timestamp in request signature")},INVALID_NONCE:{errno:115,message:a("Invalid nonce in request signature")},ACCOUNT_ALREADY_EXISTS:{errno:101,message:a("Account already exists")},UNKNOWN_ACCOUNT:{errno:102,message:a("Unknown account")},INCORRECT_EMAIL_CASE:{errno:120,message:a("Incorrect email case")},INCORRECT_PASSWORD:{errno:103,message:a("Incorrect password")},UNVERIFIED_ACCOUNT:{errno:104,message:a("Unverified account")},INVALID_VERIFICATION_CODE:{errno:105,message:a("Invalid verification code")},INVALID_JSON:{errno:106,message:a("Invalid JSON in request body")},INVALID_PARAMETER:{errno:107,message:a("Invalid parameter: %(param)s")},MISSING_PARAMETER:{errno:108,message:a("Missing parameter: %(param)s")},INVALID_REQUEST_SIGNATURE:{errno:109,message:a("Invalid request signature")},MISSING_CONTENT_LENGTH_HEADER:{errno:112,message:a("Missing content-length header")},REQUEST_TOO_LARGE:{errno:113,message:a("Request body too large")},THROTTLED:{errno:114,message:l},REQUEST_BLOCKED:{errno:125,message:a("The request was blocked for security reasons")},ACCOUNT_RESET:{errno:126,message:a("Your account has been locked for security reasons")},INCORRECT_UNBLOCK_CODE:{errno:127,message:a("Invalid authorization code")},INVALID_PHONE_NUMBER:{errno:129,message:a("Invalid phone number")},INVALID_PHONE_REGION:{errno:130,message:a("Cannot send to this country")},SMS_ID_INVALID:{errno:131,message:"SMS ID invalid"},SMS_REJECTED:{errno:132,message:a("Could not send a message to this number")},EMAIL_SENT_COMPLAINT:{errno:133,message:a("Your email was just returned")},EMAIL_HARD_BOUNCE:{errno:134,message:a("Your email was just returned. Mistyped email?")},EMAIL_SOFT_BOUNCE:{errno:135,message:a("Unable to deliver email")},EMAIL_EXISTS:{errno:136,message:a("This email was already verified by another user")},EMAIL_PRIMARY_EXISTS:{errno:139,message:a("Secondary email must be different than your account email")},EMAIL_VERIFIED_PRIMARY_EXISTS:{errno:140,message:a("Account already exists")},UNVERIFIED_PRIMARY_EMAIL_NEWLY_CREATED:{errno:141,message:a("Account already exists")},LOGIN_WITH_SECONDARY_EMAIL:{errno:142,message:a("Primary account email required for sign-in")},VERIFIED_SECONDARY_EMAIL_EXISTS:{errno:144,message:a("Address in use by another account")},RESET_PASSWORD_WITH_SECONDARY_EMAIL:{errno:145,message:a("Primary account email required for reset")},INVALID_SIGNIN_CODE:{errno:146,message:a("Invalid signin code")},CHANGE_EMAIL_TO_UNVERIFIED_EMAIL:{errno:147,message:a("Can not change primary email to an unverified email")},CHANGE_EMAIL_TO_UNOWNED_EMAIL:{errno:148,message:a("Can not change primary email to an email that does not belong to this account")},LOGIN_WITH_INVALID_EMAIL:{errno:149,message:a("This email can not currently be used to login")},RESEND_EMAIL_CODE_TO_UNOWNED_EMAIL:{errno:150,message:a("Can not change primary email to an email that does not belong to this account")},FAILED_TO_SEND_EMAIL:{errno:151,message:a("Failed to send email")},INVALID_TOKEN_VERIFICATION_CODE:{errno:152,message:a("Valid code required")},EXPIRED_TOKEN_VERIFICATION_CODE:{errno:153,message:a("This verification code has expired")},TOTP_TOKEN_EXISTS:{errno:154,message:a("A TOTP token already exists for this account")},TOTP_TOKEN_NOT_FOUND:{errno:155,message:a("TOTP token not found")},RECOVERY_CODE_NOT_FOUND:{errno:156,message:a("Recovery code not found")},DEVICE_COMMAND_UNAVAILABLE:{errno:157,message:a("Unavailable device command")},RECOVERY_KEY_NOT_FOUND:{errno:158,message:a("Recovery key not found")},INVALID_RECOVERY_KEY:{errno:159,message:a("Invalid recovery key")},TOTP_REQUIRED:{errno:160,message:a("This request requires two step authentication enabled on your account.")},SERVER_BUSY:{errno:201,message:a("Server busy, try again soon")},FEATURE_NOT_ENABLED:{errno:202,message:a("Feature not enabled")},BACKEND_SERVICE_FAILURE:{errno:203,message:a("System unavailable, try again soon")},ENDPOINT_NOT_SUPPORTED:{errno:116,message:a("This endpoint is no longer supported")},SERVICE_UNAVAILABLE:{errno:998,message:a("System unavailable, try again soon")},USER_CANCELED_LOGIN:{errno:1001,message:a("Login attempt cancelled")},SESSION_EXPIRED:{errno:1002,message:a("Session expired. Sign in to continue.")},COOKIES_STILL_DISABLED:{errno:1003,message:a("Cookies are still disabled")},PASSWORDS_DO_NOT_MATCH:{errno:1004,message:a("Passwords do not match")},WORKING:{errno:1005,message:a("Workingâ€¦")},COULD_NOT_GET_PP:{errno:1006,message:a("Could not get Privacy Notice")},COULD_NOT_GET_TOS:{errno:1007,message:a("Could not get Terms of Service")},PASSWORDS_MUST_BE_DIFFERENT:{errno:1008,message:a("Your new password must be different")},PASSWORD_TOO_SHORT:{errno:1009,message:a("Must be at least 8 characters")},PASSWORD_REQUIRED:{errno:1010,message:a("Valid password required")},EMAIL_REQUIRED:{errno:1011,message:a("Valid email required")},UNUSABLE_IMAGE:{errno:1013,message:a("A usable image was not found")},NO_CAMERA:{errno:1014,message:a("Could not initialize camera")},URL_REQUIRED:{errno:1015,message:a("Valid URL required")},DESKTOP_CHANNEL_TIMEOUT:{errno:1017,message:c},SIGNUP_EMAIL_BOUNCE:{errno:1018,message:a("Your verification email was just returned. Mistyped email?")},DIFFERENT_EMAIL_REQUIRED:{errno:1019,message:a("Valid email required")},DIFFERENT_EMAIL_REQUIRED_FIREFOX_DOMAIN:{errno:1020,message:a("Enter a valid email address. firefox.com does not offer email.")},CHANNEL_TIMEOUT:{errno:1021,message:c},ILLEGAL_IFRAME_PARENT:{errno:1022,message:a("Firefox Accounts can only be placed into an IFRAME on approved sites")},INVALID_EMAIL:{errno:1023,message:a("Valid email required")},EXPIRED_VERIFICATION_LINK:{errno:1025,message:u},DAMAGED_VERIFICATION_LINK:{errno:1026,message:a("Verification link damaged")},UNEXPECTED_POSTMESSAGE_ORIGIN:{errno:1027,message:c},INVALID_IMAGE_SIZE:{errno:1028,message:a("The image dimensions must be at least 100x100px")},IOS_SIGNUP_DISABLED:{errno:1029,message:a("Signup is coming soon to Firefox for iOS")},AGE_REQUIRED:{errno:1031,message:a("You must enter your age to sign up")},INVALID_CAMERA_DIMENSIONS:{errno:1033,message:c},DELETED_ACCOUNT:{errno:1034,message:a("Account no longer exists.")},INVALID_RESUME_TOKEN_PROPERTY:{errno:1035,message:a("Invalid property in resume token: %(property)s")},MISSING_RESUME_TOKEN_PROPERTY:{errno:1036,message:a("Missing property in resume token: %(property)s")},INVALID_DATA_ATTRIBUTE:{errno:1037,message:a("Invalid data attribute: %(property)s")},MISSING_DATA_ATTRIBUTE:{errno:1038,message:a("Missing data attribute: %(property)s")},POLLING_FAILED:{errno:1039,message:a("Server busy, try again soon")},UNKNOWN_ACCOUNT_VERIFICATION:{errno:1040,message:u},REUSED_SIGNIN_VERIFICATION_CODE:{errno:1041,message:a("That confirmation link was already used, and can only be used once.")},INPUT_REQUIRED:{errno:1042,message:a("This is a required field")},UNBLOCK_CODE_REQUIRED:{errno:1043,message:a("Authorization code required")},INVALID_UNBLOCK_CODE:{errno:1044,message:a("Invalid authorization code")},DAMAGED_REJECT_UNBLOCK_LINK:{errno:1045,message:a("Link damaged")},UNSAFE_INTERPOLATION_VARIABLE_NAME:{errno:1046,message:"String variable name does not have escape prefix: %(string)s"},HTML_WILL_BE_ESCAPED:{errno:1047,message:"HTML will be escaped: %(string)s"},CANNOT_CHANGE_INPUT_TYPE:{errno:1048,message:"Cannot change input type: %(type)s"},PHONE_NUMBER_REQUIRED:{errno:1049,message:a("Phone number required")},ACCOUNT_HAS_NO_UID:{errno:1050,message:"Account has no uid"},INVALID_WEB_CHANNEL:{errno:1051,message:"Browser not configured to accept WebChannel messages from this domain"},REUSED_PRIMARY_EMAIL_VERIFICATION_CODE:{errno:1052,message:a("That confirmation link was already used, and can only be used once.")},TOTP_CODE_REQUIRED:{errno:1053,message:a("Two-step authentication code required")},INVALID_TOTP_CODE:{errno:1054,message:a("Invalid two-step authentication code")},RECOVERY_CODE_REQUIRED:{errno:1055,message:a("Recovery code required")},INVALID_RECOVERY_CODE:{errno:1056,message:a("Invalid recovery code")},PASSWORD_SAME_AS_EMAIL:{errno:1057,message:"Password must not be your email address"},PASSWORD_TOO_COMMON:{errno:1058,message:"Password is too common"},RECOVERY_KEY_REQUIRED:{errno:1059,message:a("Recovery key required")},TOKEN_VERIFICATION_CODE_REQUIRED:{errno:1060,message:a("Please enter verification code")}};i.exports=r.extend({},o,{ERRORS:h,NAMESPACE:"auth",toInterpolationContext:function(e){try{if(this.is(e,"INVALID_PARAMETER"))return{param:e.param||e.validation.keys};if(this.is(e,"MISSING_PARAMETER"))return{param:e.param};if(this.is(e,"INVALID_RESUME_TOKEN_PROPERTY"))return{property:e.property};if(this.is(e,"MISSING_RESUME_TOKEN_PROPERTY"))return{property:e.property};if(this.is(e,"INVALID_DATA_ATTRIBUTE"))return{property:e.property};if(this.is(e,"MISSING_DATA_ATTRIBUTE"))return{property:e.property};if(this.is(e,"UNSAFE_INTERPOLATION_VARIABLE_NAME"))return{string:e.string};if(this.is(e,"HTML_WILL_BE_ESCAPED"))return{string:e.string};if(this.is(e,"CANNOT_CHANGE_INPUT_TYPE"))return{type:e.type};if(this.is(e,"THROTTLED"))return e.retryAfterLocalized&&(e.message=d),{retryAfterLocalized:e.retryAfterLocalized}}catch(e){s.error("Error in errors.js->toInterpolationContext: %s",e+"")}return{}}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}var r;void 0===(r=function(e,t,r){var o=n(180),s=n(0);r.exports={isMixedIn:function(e,t){return s.every(Object.keys(t),function(t){return t in e})},mixin:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.mixin.apply(o,[e].concat(i(function e(t){return s.uniq(t.reduce(function(t,n){return n.dependsOn&&t.push.apply(t,i(e(n.dependsOn))),t.push(n),t},[]))}(n))))}}}(0,0,e))||(e.exports=r)},,function(e,t,n){"use strict";var i=n(230);e.exports={URL_MAX_LENGTH:2048,SESSION_TOKEN_USED_FOR_SYNC:"fx_desktop_v1",CONTENT_SERVER_CONTEXT:"web",FX_SYNC_CONTEXT:"fx_sync",FX_DESKTOP_V1_CONTEXT:"fx_desktop_v1",FX_DESKTOP_V2_CONTEXT:"fx_desktop_v2",FX_DESKTOP_V3_CONTEXT:"fx_desktop_v3",FX_FENNEC_V1_CONTEXT:"fx_fennec_v1",FX_FIRSTRUN_V1_CONTEXT:"fx_firstrun_v1",FX_FIRSTRUN_V2_CONTEXT:"fx_firstrun_v2",FX_IOS_V1_CONTEXT:"fx_ios_v1",IFRAME_CONTEXT:"iframe",OAUTH_CONTEXT:"oauth",OAUTH_CHROME_ANDROID_CONTEXT:"oauth_chrome_android",CONTENT_SERVER_SERVICE:"content-server",SYNC_SERVICE:"sync",SYNC11_MIGRATION:"sync11",AMO_MIGRATION:"amo",VERIFICATION_POLL_IN_MS:4e3,EMAIL_RESEND_MAX_TRIES:4,CODE_LENGTH:32,UID_LENGTH:32,OAUTH_CODE_LENGTH:64,OAUTH_ACTION_SIGNIN:"signin",OAUTH_ACTION_SIGNUP:"signup",OAUTH_PROMPT_CONSENT:"consent",OAUTH_TRUSTED_PROFILE_SCOPE:"profile",OAUTH_TRUSTED_PROFILE_SCOPE_EXPANSION:["profile:uid","profile:email","profile:display_name","profile:avatar"],OAUTH_UNTRUSTED_ALLOWED_PERMISSIONS:["openid","profile:display_name","profile:email","profile:uid"],RELIER_KEYS_LENGTH:32,RELIER_KEYS_CONTEXT_INFO_PREFIX:"identity.mozilla.com/picl/v1/oauth/",PASSWORD_MIN_LENGTH:8,PROFILE_IMAGE_DISPLAY_SIZE:240,PROFILE_IMAGE_EXPORT_SIZE:600,PROFILE_IMAGE_JPEG_QUALITY:.8,PROFILE_IMAGE_MIN_HEIGHT:100,PROFILE_IMAGE_MIN_WIDTH:100,DEFAULT_PROFILE_IMAGE_MIME_TYPE:"image/jpeg",ONERROR_MESSAGE_LIMIT:100,ACCOUNT_UPDATES_WEBCHANNEL_ID:"account_updates",MARKETING_EMAIL_NEWSLETTER_ID:"firefox-accounts-journey",ACCESS_TYPE_ONLINE:"online",ACCESS_TYPE_OFFLINE:"offline",CLIENT_TYPE_DEVICE:"device",CLIENT_TYPE_OAUTH_APP:"oAuthApp",CLIENT_TYPE_WEB_SESSION:"webSession",DEFAULT_XHR_TIMEOUT_MS:2500,DEFAULT_BUNDLE_PATH:"/bundle/",IOS_V1_LOGIN_MESSAGE_DELAY_MS:5e3,BLOCKED_SIGNIN_SUPPORT_URL:"https://support.mozilla.org/kb/accounts-blocked",UNBLOCK_CODE_LENGTH:8,RECOVERY_CODE_LENGTH:8,TOKEN_CODE_LENGTH:6,MARKETING_ID_SPRING_2015:"spring-2015-android-ios-sync",MARKETING_ID_AUTUMN_2016:"autumn-2016-connect-another-device",DOWNLOAD_LINK_TEMPLATE_ANDROID:"https://app.adjust.com/2uo1qc?campaign=%(campaign)s&creative=%(creative)s&adgroup=android",DOWNLOAD_LINK_TEMPLATE_IOS:"https://app.adjust.com/2uo1qc?campaign=%(campaign)s&creative=%(creative)s&adgroup=ios&fallback=https://itunes.apple.com/app/apple-store/id989804926?pt=373246&ct=adjust_tracker&mt=8",MOZ_ORG_SYNC_GET_STARTED_LINK:"https://www.mozilla.org/firefox/sync?utm_source=fx-website&utm_medium=fx-accounts&utm_campaign=fx-signup&utm_content=fx-sync-get-started",POPULAR_EMAIL_DOMAINS:i.reduce(function(e,t){return e[t]=!0,e},{}),OTHER_EMAIL_DOMAIN:"other",UTM_SOURCE_EMAIL:"email",RECOVERY_KEY_LENGTH:32,DEVICE_PAIRING_AUTHORITY_CONTEXT:"device_pairing_authority",DEVICE_PAIRING_AUTHORITY_REDIRECT_URI:"urn:ietf:wg:oauth:2.0:oob:pair-auth-webchannel",DEVICE_PAIRING_SCOPES:["profile","https://identity.mozilla.com/apps/oldsync"],DEVICE_PAIRING_SUPPLICANT_CONTEXT:"device_pairing_supplicant",TWO_STEP_AUTHENTICATION_ACR:"AAL2"}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e,t){this.hideError();var n=this.$(".success");t&&n[e](this.translator.get(t)),n.slideDown(T).attr("data-shown","true"),n.css(C>this.window.pageYOffset?{left:"",position:"",top:"",width:""}:{left:0,position:"fixed",top:0,width:"100%"}),this.trigger("success",t),this._isSuccessVisible=!0}function o(e,t){if(this._areErrorsEnabled){this.hideSuccess(),t=this._normalizeError(t),this.logError(t);var n=this.translateError(t),i=this.$(".error");return u.is(t,"WORKING")?(this.logFlowEvent("working"),i.addClass("info")):i.removeClass("info"),n&&i[e](n),i.slideDown(T).attr("data-shown","true"),this.trigger("error",n),this._isErrorVisible=!0,n}this.logger.error("Error ignored: %s",JSON.stringify(t))}function s(e){return e&&e.errorModule?e.errorModule:u}var a=n(8),c=n(0),u=n(2),l=n(4),d=n(3),h=n(181),f=n(67),p=n(115),g=n(68),m=n(242),v=n(18),_=n(50),y=n(49),w=n(23),E=n(71),b=n(185),S=n(51),I=n(36),A=window.document.title,C=64,T=150,x=new m,k=l.View.extend({layoutClassName:null,viewName:"",constructor:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.broker=t.broker,this.currentPage=t.currentPage,this.model=t.model||new l.Model,this.metrics=t.metrics||x,this.relier=t.relier,this.sentryMetrics=t.sentryMetrics||_,this.childViews=[],this.user=t.user,this.lang=t.lang,this.window=t.window||window,this.logger=new v(this.window),this.navigator=t.navigator||this.window.navigator||navigator,this.translator=t.translator||new b,c.extend(this.events,p.events);var n=function(t){var n=e.events[t];c.isString(n)&&c.isFunction(e[n])&&(e.events[t]=function(){this[n].apply(this,arguments)})};for(var i in this.events)n(i);!this.viewName&&t.viewName&&(this.viewName=t.viewName),g.initialize.call(this,t),l.View.call(this,t),this._boundDisableErrors=this.disableErrors.bind(this),a(this.window).on("beforeunload",this._boundDisableErrors),this._boundCheckAuthorization=this.checkAuthorization.bind(this),a(this.window).on("focus",this._boundCheckAuthorization)},render:function(){var e=this;return this.layoutClassName&&a("body").addClass(this.layoutClassName),this._hasNavigated=!1,Promise.resolve().then(function(){return e.checkAuthorization()}).then(function(t){return t&&e.beforeRender()}).then(function(t){return!1!==t&&!e.hasNavigated()&&(e.destroyChildViews(),e._context=null,e.$el.html(e.renderTemplate(e.template.bind(e))),e.trigger("rendered"),e._isErrorVisible=e.$(".error").hasClass("visible"),e._isSuccessVisible=e.$(".success").hasClass("visible"),e.afterRender())}).then(function(t){return!1!==t&&!e.hasNavigated()})},renderTemplate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=c.extend({},this.getContext(),{t:function(e){return t.translateInTemplate(e,i)},unsafeTranslate:function(e){return t.unsafeTranslateInTemplate(e,i)}},n);return e(i)},writeToDOM:function(e){return h.write(this.window,e)},checkAuthorization:function(){var e=this;return this.mustAuth||this.mustVerify?this.user.sessionStatus().then(function(t){var n;return!(e.mustVerify&&!t.get("verified"))||(t.get("verificationReason")===I.SIGN_UP?n="confirm":t.get("verificationReason")===I.SIGN_IN&&(n=t.get("verificationMethod")===S.EMAIL_2FA?"signin_code":"confirm_signin"),e.navigate(n,{account:t}),!1)},function(t){if(u.is(t,"INVALID_TOKEN"))return e.logError(u.toError("SESSION_EXPIRED")),e.navigate(e._reAuthPage(),{redirectTo:e.currentPage}),!1;throw t}):Promise.resolve(!0)},_reAuthPage:function(){return this.relier&&this.relier.get("email")?"force_auth":"signin"},displayStatusMessages:function(){var e=this.model.get("success");e&&(this.displaySuccess(e),this.model.unset("success"));var t=this.model.get("unsafeSuccess");t&&(this.unsafeDisplaySuccess(t),this.model.unset("unsafeSuccess"));var n=this.model.get("error");n&&(this.displayError(n),this.model.unset("error"))},titleFromView:function(e){var t=e||A,n=this.$("header:first h1").text(),i=this.$("header:first h2").text();return n&&i?t=n+": "+i:n?t=n:i&&(t=t+": "+i),t},getContext:function(){return this._context||(this._context=new l.Model(this.model.toJSON()),this.setInitialContext(this._context)),this._context.toJSON()},setInitialContext:function(){},translate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getContext();if(w.hasHTML(e)){var n=u.toError("HTML_WILL_BE_ESCAPED");n.string=e,this.logError(n)}return c.escape(this.translator.get(e,t))},unsafeTranslate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getContext();if(w.hasUnsafeVariables(e)){var n=u.toError("UNSAFE_INTERPOLATION_VARIABLE_NAME");n.string=e,this.logError(n)}return this.translator.get(e,t)},translateInTemplate:function(e,t){var n=this;return function(i){return n.translate(e||i,t)}},unsafeTranslateInTemplate:function(e,t){var n=this;return function(i){return n.unsafeTranslate(e||i,t)}},beforeRender:function(){},afterRender:function(){return Promise.resolve()},afterVisible:function(){return this.displayStatusMessages(),this.stackWideLinks(),this.focusAutofocusElement(),Promise.resolve()},stackWideLinks:function(){var e=this;this.$(".links").each(function(t,n){var i=e.$(n),r=i.children("a"),o=Math.floor(i.width()/r.length);r.filter(function(t,n){var i=e.$(n);i.css("max-width","100%"),i.css("white-space","nowrap");var r=i.outerWidth()>=o;return i.css("white-space",""),i.css("max-width",""),r}).length&&(i.addClass("centered"),r.removeClass("left").removeClass("right"))})},destroy:function(e){this.trigger("destroy"),this.beforeDestroy&&this.beforeDestroy(),e?this.remove():(this.stopListening(),this.$el.off()),this.layoutClassName&&a("body").removeClass(this.layoutClassName),a(this.window).off("beforeunload",this._boundDisableErrors),a(this.window).off("focus",this._boundCheckAuthorization),this.destroyChildViews(),this.trigger("destroyed")},trackChildView:function(e){return c.contains(this.childViews,e)||(this.childViews.push(e),e.on("destroyed",c.bind(this.untrackChildView,this,e))),e},untrackChildView:function(e){return this.childViews=c.without(this.childViews,e),e},destroyChildViews:function(){c.invoke(this.childViews,"destroy"),this.childViews=[]},isChildViewTracked:function(e){return c.indexOf(this.childViews,e)>-1},displaySuccess:c.partial(r,"text"),unsafeDisplaySuccess:c.partial(r,"html"),hideSuccess:function(){this.$(".success").slideUp(T).removeClass("visible"),this._isSuccessVisible=!1},isSuccessVisible:function(){return!!this._isSuccessVisible},translateError:function(e){return s(e).toInterpolatedMessage(e,this.translator)},_areErrorsEnabled:!0,disableErrors:function(){this._areErrorsEnabled=!1},displayError:c.partial(o,"text"),unsafeDisplayError:c.partial(o,"html"),logError:function(e){(e=this._normalizeError(e)).logged||(e.logged=!0,f.captureError(e,this.sentryMetrics,this.metrics))},fatalError:function(e){return f.fatalError(e,this.sentryMetrics,this.metrics,this.window,this.translator)},getViewName:function(){return this.viewName},_normalizeError:function(e){var t=s(e);return e||(e=t.toError("UNEXPECTED_ERROR"),this.logger.trace()),c.isString(e)&&(e=Error(e)),e.viewName=this.getViewName(),e},logView:function(){this.metrics.logView(this.getViewName())},logEvent:function(e){this.metrics.logEvent(e)},logEventOnce:function(e){this.metrics.logEventOnce(e)},logViewEvent:function(e){this.metrics.logViewEvent(this.getViewName(),e)},logFlowEvent:function(e,t,n){this.notifier.trigger("flow.event",c.assign({},n,{event:e,viewName:t}))},logFlowEventOnce:function(e,t){this.logFlowEvent(e,t,{once:!0})},hideError:function(){this.$(".error").slideUp(T).removeClass("visible"),this._isErrorVisible=!1},isErrorVisible:function(){return!!this._isErrorVisible},navigate:function(e,t,n){t=t||{},n=n||{},t.error&&this.logError(t.error),this._hasNavigated=!0,this.notifier.trigger("navigate",{nextViewData:t,routerOptions:n,url:e})},navigateAway:function(e){this._hasNavigated=!0,this.notifier.trigger("navigate",{server:!0,url:e})},replaceCurrentPage:function(e){this.navigate(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{replace:!0,trigger:!0})},hasNavigated:function(){return!!this._hasNavigated},focusAutofocusElement:function(){var e=this,t=this.$("[autofocus]");if(a("html").hasClass("no-touch")&&t.length){!function n(){t.is(":focus")||(t.is(":visible")?e.focus(t):e.setTimeout(n,50))}()}},focus:function(e){var t=this;if(a("html").hasClass("no-touch"))try{var n=this.$(e);n.one("focus",function(){return t.placeCursorAt(n)}),n.get(0).focus()}catch(e){}},placeCursorAt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a(e).__val().length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=a(e).get(0);try{i.selectionStart=t,i.selectionEnd=n}catch(e){}},invokeHandler:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];if(c.isString(e)&&!c.isFunction(e=this[e]))throw Error(e+" is an invalid function name");if(c.isFunction(e))return c.isArguments(n[0])&&(n=n[0]),e.apply(this,n)},getSignedInAccount:function(){return this.user.getSignedInAccount()},getAccount:function(){},showChildView:function(){return Promise.resolve()},invokeBrokerMethod:function(e){for(var t,n=this,i=arguments.length,r=Array(i>1?i-1:0),o=1;i>o;o++)r[o-1]=arguments[o];return Promise.resolve((t=this.broker)[e].apply(t,r)).then(function(e){return n.invokeBehavior.apply(n,[e].concat(r))})},invokeBehavior:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];return Promise.resolve().then(function(){return c.isFunction(e)?e.apply(void 0,[t].concat(i)):e}).then(function(n){return c.isFunction(e)?t.invokeBehavior.apply(t,[n].concat(i)):n})}});k.preventDefaultThen=function(e){return function(t){t&&t.preventDefault();var n=[].slice.call(arguments,0);return n.unshift(e),this.invokeHandler.apply(this,n)}},k.cancelEventThen=function(e){return function(t){t&&(t.preventDefault(),t.stopPropagation());var n=[].slice.call(arguments,0);return n.unshift(e),this.invokeHandler.apply(this,n)}},d.mixin(k,p,y,E),i.exports=k}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){if(this.updateFormValueChanges())return this.invokeHandler(e,arguments)}}var o=i(n(0)),s=i(n(78)),a=i(n(2)),c=i(n(6)),u=i(n(30)),l=i(n(126)),d=i(n(52)),h=i(n(37)),f=i(n(80));n(127);var p=c.default.cancelEventThen,g=c.default.preventDefaultThen,m=c.default.prototype,v=c.default.extend({LONGER_THAN_EXPECTED:new u.default("10s").milliseconds(),constructor:function(e){c.default.call(this,e),this._attachEvents()},events:{"change form":r(p("onFormChange")),"input form":r(p("onFormChange")),"keyup form":r(p("onFormChange")),"submit form":g("onFormSubmit")},_notifiedOfEngaged:!1,onFormChange:function(){this.isSubmitting()||this.isHalted()||(this.hideError(),this.hideSuccess(),this._notifiedOfEngaged||(this._notifiedOfEngaged=!0,this.notifier.trigger("form.engaged")))},afterRender:function(){return this._attachEvents(),this.updateFormValueChanges(),m.afterRender.call(this)},getFormValues:function(){var e=this,t={};return this.getFormElements().each(function(n,i){var r=e.$(i),o=r.attr("name")||r.attr("id")||n;t[o]=e.getElementValue(r)}),t},getFormElements:function(){var e=this;return this.$("input,textarea,select").filter(function(t,n){var i=e.$(n);return o.default.isUndefined(i.attr("data-novalue"))})},isFormEnabled:function(){var e=this.$("button[type=submit]");return!e.hasClass("disabled")&&!e.attr("disabled")},onFormSubmit:function(){return this.validateAndSubmit().catch(function(){})},validateAndSubmit:(0,s.default)(function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Date.now(),r=n.artificialDelay||0;return e&&e.stopImmediatePropagation(),this.trigger("submitStart"),Promise.resolve().then(function(){if(!t.isHalted()){if(!t.isValid())throw t.showValidationErrors();if(t.isFormEnabled())return t.logViewEvent("submit"),t._submitForm().then(function(){var e=Date.now()-i;return d.default.delay(Math.max(r-e,0))}).then(function(){return t.afterSubmit()})}}).finally(function(){t.trigger("submitEnd")})}),_submitForm:(0,l.default)((0,h.default)(function(){var e=this;return Promise.resolve().then(o.default.bind(this.beforeSubmit,this)).then(function(t){if(!1!==t)return e.submit()}).catch(function(t){throw e.displayError(t),t})})),_attachEvents:function(){this.delegateEvents(o.default.extend({},v.prototype.events,this.events))},isValid:function(){if(!this.isValidStart())return!1;for(var e=this.$("input"),t=0,n=e.length;n>t;++t){var i=this.$(e[t]);try{i.validate()}catch(e){return!1}}return this.isValidEnd()},isValidStart:function(){return!0},isValidEnd:function(){return!0},showValidationErrors:function(){if(this.hideError(),!this.showValidationErrorsStart()){for(var e=this.$("input"),t=0,n=e.length;n>t;++t){var i=e[t],r=this.$(i);try{r.validate()}catch(e){return void this.showValidationError(i,e)}}this.showValidationErrorsEnd()}},getElementValue:function(e){return this.$(e).val()},showValidationErrorsStart:function(){},showValidationErrorsEnd:function(){},showValidationError:function(e,t){var n=this;this.logError(t);var i=this.$(e),r=a.default.toMessage(t),o=function(t){n.markElementInvalid(i,t);try{i.get(0).focus()}catch(e){}n.trigger("validation_error",e,r)};if(t.describedById)o(t.describedById);else{var s="error-tooltip-"+t.errno,c=new f.default({id:s,invalidEl:i,message:r,translator:this.translator});c.on("destroyed",function(){n.markElementValid(i),n.trigger("validation_error_removed",e)}).render().then(function(){return o(s)}),this.trackChildView(c)}return r},markElementInvalid:function(e,t){e.addClass("invalid").attr("aria-invalid","true"),t&&e.attr("aria-described-by",t)},markElementValid:function(e){e.removeClass("invalid").attr("aria-invalid",null).attr("aria-described-by",null)},beforeSubmit:function(){return Promise.resolve()},submit:function(){},afterSubmit:function(e){var t=this;return Promise.resolve().then(function(){return e&&e.halt&&t.halt(),e})},isSubmitting:function(){return this._isSubmitting},halt:function(){this.$("input,textarea,button").attr("disabled","disabled").blur(),this._isHalted=!0},isHalted:function(){return this._isHalted},detectFormValueChanges:function(){var e=this._previousFormValues,t=this.getFormValues();return o.default.isEqual(e,t)?null:t},updateFormValueChanges:function(){var e=this.detectFormValueChanges();return e&&(this._previousFormValues=e),e}});e.exports=v},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(247)),o=i(n(184));o.default.register("accessType",o.default.string().test(r.default.isAccessTypeValid)),o.default.register("action",o.default.string().valid("signin","signup","email","force_auth")),o.default.register("base32",o.default.string().test(r.default.isBase32Valid)),o.default.register("channelId",o.default.string().test(r.default.isBase64Url)),o.default.register("channelKey",o.default.string().test(r.default.isBase64Url)),o.default.register("codeChallenge",o.default.string().min(43).max(128)),o.default.register("codeChallengeMethod",o.default.string().valid("S256")),o.default.register("email",o.default.string().test(r.default.isEmailValid)),o.default.register("hex",o.default.string().test(r.default.isHexValid)),o.default.register("keyFetchToken",o.default.string()),o.default.register("keysJwk",o.default.string().test(r.default.isBase64Url)),o.default.register("oauthCode",o.default.string().test(r.default.isOAuthCodeValid)),o.default.register("password",o.default.string().test(r.default.isPasswordValid)),o.default.register("prompt",o.default.string().test(r.default.isPromptValid)),o.default.register("recoveryCode",o.default.string().test(r.default.isRecoveryCodeValid)),o.default.register("sessionToken",o.default.string()),o.default.register("token",o.default.string().test(r.default.isTokenValid)),o.default.register("totpCode",o.default.string().test(r.default.isTotpCodeValid)),o.default.register("uid",o.default.string().test(r.default.isUidValid)),o.default.register("unblockCode",o.default.string().test(r.default.isUnblockCodeValid)),o.default.register("unwrapBKey",o.default.string()),o.default.register("url",o.default.string().test(r.default.isUrlValid)),o.default.register("uuid",o.default.string().test(r.default.isUuidValid)),o.default.register("verificationCode",o.default.string().test(r.default.isCodeValid)),o.default.register("verificationRedirect",o.default.string().test(r.default.isVerificationRedirectValid)),o.default.register("clientId",o.default.hex()),o.default.any().extend({empty:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this.transform(function(e){return t.indexOf(e)>-1?void 0:e})}}),e.exports=o.default},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(40);i.exports={afterRender:function(){this.notifier.trigger("flow.initialize")},events:{"click a":"_clickFlowEventsLink","click input":"_engageFlowEventsForm","input input":"_engageFlowEventsForm","keyup input":"_keyupFlowEventsInput",submit:"_submitFlowEventsForm"},_clickFlowEventsLink:function(e){if(e&&e.currentTarget){var t=r(e.currentTarget).data("flowEvent");t&&this.logFlowEvent(t,this.viewName)}},_engageFlowEventsForm:function(){this.logFlowEventOnce("engage",this.viewName)},_keyupFlowEventsInput:function(e){e.which!==o.TAB||e.metaKey||e.ctrlKey||e.altKey||this._engageFlowEventsForm()},_submitFlowEventsForm:function(){this.isFormEnabled()&&this.logFlowEvent("submit",this.viewName)}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(6),o=n(8);i.exports={afterRender:function(){this.transformLinks()},setInitialContext:function(e){e.set(this.relier.pick("service","serviceName"))},transformLinks:function(){var e=this;this.$('a[href^="/signin"],a[href^="/signup"],a[href^="/reset_password"]').each(function(t,n){var i=o(n);i.attr("href",e.broker.transformLink(i.attr("href")))})},unsafeDisplayError:function(e){var t=r.prototype.unsafeDisplayError.call(this,e);return this.transformLinks(),t}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(49),o=n(54);i.exports={dependsOn:[r],getUserAgentString:function(){return this.getSearchParam("forceUA")||this.window.navigator.userAgent},getUserAgent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getUserAgentString();return new o(e)}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(0),s=(i=o)&&i.__esModule?i:{default:i};e.exports={searchParams:function(){var e=arguments[1],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/(^.*\?|#.*$)/g,"").trim();return t?this.splitEncodedParams(t,e):{}},searchParam:function(e,t){return this.searchParams(t)[e]},hashParams:function(){var e=arguments[1],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/^.*#/,"").trim();return t?this.splitEncodedParams(t,e):{}},splitEncodedParams:function(){var e=arguments[1],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("&"),n={};return s.default.each(t,function(e){var t=e.split("="),i=r(t,2);n[i[0]]=decodeURIComponent(i[1]).trim()}),e?s.default.pick(n,e):n},objToSearchString:function(e){return this.objToUrlString(e,"?")},objToHashString:function(e){return this.objToUrlString(e,"#")},objToUrlString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?",n=[];for(var i in e){var r=e[i];void 0!==r&&null!==r&&n.push(i+"="+encodeURIComponent(r))}return n.length?t+n.join("&"):""},getOrigin:function(e){if(!e)return"";var t=document.createElement("a");if(t.setAttribute("href",e),!t.protocol||!t.host)return null;var n=t.protocol+"//"+(443==+t.port||80==+t.port?t.hostname:t.host);return 0!==e.indexOf(n)?null:n},updateSearchString:function(e,t){var n={},i=e.indexOf("?");return 0>i||(n=this.searchParams(e.substring(i+1)),e=e.substring(0,i)),s.default.extend(n,t),e+this.objToSearchString(n)},cleanSearchString:function(e,t){var n=e.split("?"),i=r(n,2),o=i[0],s=i[1],a=this.searchParams(void 0===s?"":s,t);return o+this.objToSearchString(a)}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(6);i.exports={initialize:function(e){this.parentView=e.parentView},events:{"click .cancel":o.preventDefaultThen("_closePanelReturnToSettings"),"click .settings-unit-toggle":o.preventDefaultThen("_triggerPanel")},afterRender:function(){this.$("[autofocus]").attr("data-autofocus-on-panel-open",!0).removeAttr("autofocus")},_triggerPanel:function(e){var t=e&&r(e.currentTarget).data("href");t&&this.navigate(t)},openPanel:function(){this.closeAllPanels(),this.$(".settings-unit").addClass("open"),this.$el.closest("#fxa-settings-content").addClass("animate-shadow"),this.focus(this.$("[data-autofocus-on-panel-open]"))},hidePanel:function(){this._closePanelReturnToSettings()},isPanelOpen:function(){return this.$(".settings-unit").hasClass("open")},_closePanelReturnToSettings:function(){this.navigate("settings"),this.clearInput(),this.closePanel()},clearInput:function(){this.$("input").each(function(e,t){r(t).change()});var e=this.$("form")[0];e&&e.reset()},closePanel:function(){this.$el.closest("#fxa-settings-content").removeClass("animate-shadow"),this.$(".settings-unit").removeClass("open")},closeAllPanels:function(){r(".settings-unit").removeClass("open")},displaySuccess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{closePanel:!0};this.parentView&&(this.parentView.displaySuccess(e),t.closePanel&&this.closePanel())}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(8),s=n(2),a=n(31),c=n(77),u=n(90),l={dependsOn:[n(12)],notifications:{},onProfileUpdate:function(){},displayAccountProfileImage:function(e,t){var n=this;o("#image-holder").css("display","none");var i,r=this.$((t=t||{}).wrapperClass||".avatar-wrapper");return this._shouldShowDefaultProfileImage(e)?this.setDefaultPlaceholderAvatar(r):t.spinner&&(i=this._addLoadingSpinner(r)),e.fetchCurrentProfileImage().then(function(t){return n._updateCachedProfileImage(t,e),t},function(e){return c.is(e,"UNAUTHORIZED")||s.is(e,"UNVERIFIED_ACCOUNT")||n.logError(e),new u}).then(function(e){return n._completeLoadingSpinner(i).then(function(){return e})}).then(function(e){r.find(":not(.avatar-spinner)").remove(),e.isDefault()?(r.addClass("with-default").append("<span></span>"),n.logViewEvent("profile_image_not_shown"),o("#image-holder").css("display","inline-block"),o("#loading-avatar-spinner").css("display","none")):(r.removeClass("with-default").append(o(e.get("img")).addClass("profile-image")),o("#image-holder").css("display","inline-block"),o("#loading-avatar-spinner").css("display","none"),n.logViewEvent("profile_image_shown"))})},setDefaultPlaceholderAvatar:function(e){(e=e||o(".avatar-wrapper")).addClass("with-default")},_updateCachedProfileImage:function(e,t){t.isDefault()||(t.setProfileImage(e),this.user.setAccount(t))},_shouldShowDefaultProfileImage:function(e){return!e.has("profileImageUrl")},_addLoadingSpinner:function(e){if(e)return o('<span class="avatar-spinner"></span>').appendTo(e.addClass("with-spinner"))},_completeLoadingSpinner:function(e){var t=this;return r.isUndefined(e)?Promise.resolve():new Promise(function(n){e.addClass("completed").on("transitionend",function(t){n(),t.originalEvent&&"::after"===t.originalEvent.pseudoElement&&e.remove()}),t.setTimeout(function(){n(),e.remove()},400)})},logAccountImageChange:function(e){e.get("hadProfileImageSetBefore")?this.logViewEvent("submit.change"):this.logViewEvent("submit.new")},updateProfileImage:function(e,t){return t.setProfileImage(e),this.user.setAccount(t).then(r.bind(this._notifyProfileUpdate,this,t.get("uid")))},deleteDisplayedAccountProfileImage:function(e){var t=this;return Promise.resolve().then(function(){if(!e.get("profileImageId"))return e.fetchCurrentProfileImage().then(function(n){return t._updateCachedProfileImage(n,e),n})}).then(function(){return e.deleteAvatar(e.get("profileImageId"))}).then(function(){t.updateProfileImage(new u({default:!0}),e)})},updateDisplayName:function(e){var t=this,n=this.getSignedInAccount();return n.set("displayName",e),this.user.setAccount(n).then(function(){return t._notifyProfileUpdate(n.get("uid"))})},updateDisplayEmail:function(e){var t=this,n=this.getSignedInAccount();return n.set("email",e),this.user.setAccount(n).then(function(){return t._notifyProfileUpdate(n.get("uid"))})},_notifyProfileUpdate:function(e){this.notifier.triggerAll(a.PROFILE_CHANGE,{uid:e})},supportsAvatarUpload:function(){var e=this.getUserAgent();return!e.isFirefoxIos()||e.parseOsVersion().major>10}};l.notifications[a.PROFILE_CHANGE]="onProfileUpdate",i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(6).preventDefaultThen,o=n(40);i.exports={initialize:function(){this._canGoBack=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).canGoBack},events:{"click #back,.back":r("onClick"),"keyup #back,.back":"backOnEnter"},setInitialContext:function(e){e.has("canGoBack")||e.set("canGoBack",this.canGoBack())},onClick:function(){this.back()},back:function(e){this.canGoBack()&&(this._canGoBack=!1,this.logViewEvent("back"),this.notifier.trigger("navigate-back",{nextViewData:e}))},backOnEnter:function(e){e.which===o.ENTER&&(e.preventDefault(),this.back())},canGoBack:function(){return!!this._canGoBack}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(8)),o=i(n(2)),s=i(n(296));e.exports={events:{"blur input.password":"unhighlightSignupPasswordHelper","change input.password":"onPasswordChanged","focus input.password":"highlightSignupPasswordHelper","keyup input.password":"onPasswordChanged","mousedown .show-password-label":"onShowPasswordMouseDown","touchstart .show-password-label":"onShowPasswordMouseDown"},initialize:function(){var e=this;this.on("submitStart",function(){return e.hideVisiblePasswords()})},afterRender:function(){this._addShowPasswordLabel(this.$("input[type=password]"))},_updateShowPasswordLabel:function(e){var t=this.$(e);this._addShowPasswordLabel(t),0===t.val().length?t.addClass("empty"):t.removeClass("empty")},_addShowPasswordLabel:function(e){var t=this;this.$(e).each(function(e,n){var i=t.$(n);t._shouldCreateShowPasswordLabel(i)&&t._createShowPasswordLabelLabel(i)})},_shouldCreateShowPasswordLabel:function(e){return e.val().length&&!this.$("#show-"+e.attr("id")).length},_createShowPasswordLabelLabel:function(e){var t=e.attr("id"),n={id:"show-"+t,synchronizeShow:!!e.data("synchronize-show"),targetId:t},i=this.renderTemplate(s.default,n);e.after(i)},onShowPasswordMouseDown:function(e){var t=this,n=this.$(e.target).siblings(".show-password"),i=this.getAffectedPasswordInputs(n);this.showPassword(i);var o=function e(){(0,r.default)(t.window).off("mouseup",e),(0,r.default)(t.window).off("touchend",e),t.hideVisiblePasswords()};(0,r.default)(this.window).one("mouseup",o),(0,r.default)(this.window).one("touchend",o)},getAffectedPasswordInputs:function(e){var t=this.$(e).siblings(".password");return this.$(e).data("synchronizeShow")&&(t=this.$(".password[data-synchronize-show]")),t},showPassword:function(e){var t=this.$(e);try{t.attr("type","text").attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off")}catch(e){this._logErrorConvertingPasswordType(t)}t.siblings(".show-password").attr("checked",!0),this.logViewEvent("password.visible")},hidePassword:function(e){var t=this.$(e);try{t.attr("type","password").removeAttr("autocomplete").removeAttr("autocorrect").removeAttr("autocapitalize")}catch(e){this._logErrorConvertingPasswordType(t)}t.siblings(".show-password").removeAttr("checked"),this.logViewEvent("password.hidden"),this.focus(t)},_logErrorConvertingPasswordType:function(e){var t=o.default.toError("CANNOT_CHANGE_INPUT_TYPE");t.type=e.attr("type"),this.logError(t)},hideVisiblePasswords:function(){var e=this;this.$el.find(".password[type=text]").each(function(t,n){e.hidePassword(n)})},onPasswordChanged:function(e){this._updateShowPasswordLabel(e.target)},showPasswordHelper:function(){this.$(".input-help:not(.password-strength-balloon)").css("opacity","1")},hidePasswordHelper:function(){this.$(".input-help:not(.input-help-forgot-pw,.password-strength-balloon)").css("opacity","0")},highlightSignupPasswordHelper:function(e){this.$(".input-help-signup").addClass("highlight"),e&&this.$(e.target).is("#password")?this.$(".input-help-balloon.follow-focus").css("top","-80px"):this.$(".input-help-balloon.follow-focus").css("top",""),this.showPasswordHelper()},unhighlightSignupPasswordHelper:function(){this.hidePasswordHelper(),this.$(".input-help-signup").removeClass("highlight")}}},function(e){"use strict";var t;void 0===(t=function(e,t,n){function i(e){this._window=e||window}i.prototype={info:function(){this._window.console&&this._window.console.info&&this._window.console.info.apply(this._window.console,arguments)},trace:function(){this._window.console&&this._window.console.trace&&this._window.console.trace()},warn:function(){this._window.console&&this._window.console.warn&&this._window.console.warn.apply(this._window.console,arguments)},error:function(e){if(this._window.console&&this._window.console.error){var t="";e.errorModule?(t=e.errorModule.toInterpolatedMessage(e),this._window.console.error(t)):this._window.console.error.apply(this._window.console,arguments)}}},n.exports=i}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0).isFunction,o=n(252);i.exports={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.experiments=e.experiments||this._createExperimentInterface(e),this.experiments.chooseExperiments()},_createExperimentInterface:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o({account:function(){return r(this.getAccount)&&this.getAccount()||this._account}.call(this),experimentGroupingRules:e.experimentGroupingRules,metrics:this.metrics,notifier:e.notifier,translator:this.translator,user:e.user,window:this.window})},destroy:function(){this.experiments&&(this.experiments.destroy(),this.experiments=null)},createExperiment:function(){var e;if(this.experiments)return this.notifier.trigger("flow.initialize"),(e=this.experiments).createExperiment.apply(e,arguments)}},["getExperimentGroup","isInExperiment","isInExperimentGroup"].forEach(function(e){i.exports[e]=function(){var t;if(this.experiments)return(t=this.experiments)[e].apply(t,arguments)}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(36);i.exports={initialize:function(e){this.model.has("type")||this.model.set("type",e.type||o.SIGN_UP)},isSignIn:function(){return this.model.get("type")===o.SIGN_IN},isSignUp:function(){return this.model.get("type")===o.SIGN_UP},isPrimaryEmail:function(){return this.model.get("type")===o.PRIMARY_EMAIL_VERIFIED},isSecondaryEmail:function(){return this.model.get("type")===o.SECONDARY_EMAIL_VERIFIED},keyOfVerificationReason:function(e){return t=e,r.findKey(o,function(e){return e===t});var t}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r=n(0),o=n(6),s=n(85),a=(i=s)&&i.__esModule?i:{default:i},c=(0,r.assign)({},a.default,{initialize:function(){var e=this;this.parentView=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).parentView,this.on("modal-cancel",function(){return e.onModalCancel()})},events:{"click .cancel":(0,o.preventDefaultThen)("_returnToSettings"),"click .modal-panel #back":(0,o.preventDefaultThen)("_returnToAvatarChange")},_returnToAvatarChange:function(){this.navigate("settings/avatar/change")},_returnToClients:function(){this.navigate("settings/clients")},_returnToTwoFactorAuthentication:function(){this.navigate("settings/two_step_authentication")},_returnToAccountRecovery:function(e){this.navigate("settings/account_recovery",{hasRecoveryKey:e})},_showAccountRecoveryKey:function(){this.navigate("settings/account_recovery/recovery_key",{hasRecoveryKey:!0})},_returnToSettings:function(){this.navigate("settings")},onModalCancel:function(){if(!this.hasNavigated())switch(this.currentPage){case"settings/clients/disconnect":this._returnToClients();break;case"settings/two_step_authentication/recovery_codes":if("sign_in_recovery_code"===this.model.get("previousViewName")){var e=this.getSignedInAccount();return this.invokeBrokerMethod("afterCompleteSignInWithCode",e)}this._returnToTwoFactorAuthentication();break;case"settings/account_recovery/recovery_key":this._returnToAccountRecovery(!0);break;case"settings/account_recovery/confirm_revoke":this._returnToAccountRecovery(!1);break;case"settings/account_recovery/confirm_password":this.showRecoveryKeyView?this._showAccountRecoveryKey():this._returnToAccountRecovery(!1);break;default:this._returnToSettings()}},displaySuccess:function(e){this.parentView.displaySuccess(e)}});e.exports=c},function(e){"use strict";var t;void 0===(t=function(e,t,n){function i(e){return e.prop("name")||e.prop("id")}n.exports={initialize:function(){var e=this;this.formPrefill=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).formPrefill,this.on("rendered",function(){return e.fillPrefillableValues()})},fillPrefillableValues:function(){var e=this;this.getFormElements().each(function(t,n){var r=e.$(n);if(function(e,t){var n=i(e);return!e.__val()&&"off"!==e.attr("autocomplete")&&n&&!!t.get(n)}(r,e.formPrefill)){var o=i(r);r.val(e.formPrefill.get(o))}})},beforeDestroy:function(){var e=this;this.getFormElements().each(function(t,n){var r=e.$(n),o=i(r);o&&e.formPrefill.set(o,r.__val())})}}}(0,0,e))||(e.exports=t)},function(e){"use strict";var t;void 0===(t=function(e,t,n){var i=function(e){return e},r=/&(\D+|#\d+);/i,o=/<.*>/,s=/\%\(([a-zA-Z]+)\)s/g,a=/%s/g,c=/\%\(((?!escaped)[a-zA-Z]+)\)s/g;i('By proceeding, you agree to the <a id="service-tos" href="%(termsUri)s">Terms of Service</a> and<a id="service-pp" href="%(privacyUri)s">Privacy Notice</a> of %(serviceName)s (%(serviceUri)s).'),i('<a href="https://support.mozilla.org/kb/im-having-problems-with-my-firefox-account">Help</a>'),i("Get the latest news about Mozilla and Firefox."),i("%(city)s, %(country)s (estimated)"),i("%(country)s (estimated)"),i("IP address: %(ip)s"),i("For added security, please confirm this sign-in to begin syncing with this device:"),i("Sign in"),n.exports={hasHTML:function(e){return r.test(e)||o.test(e)},hasUnsafeVariables:function(e){return a.test(e)||c.test(e)},interpolate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.replace(a,function(e){return t.shift&&t.length>0?t.shift():e}).replace(s,function(e,n){return n in t?t[n]:e})}}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(39),s=new(n(18)),a=n(23),c=function(e){return e},u=c("Unexpected error"),l={UNKNOWN_CLIENT:{errno:101,message:c("Unknown client")},INCORRECT_REDIRECT:{errno:103,message:c("Incorrect redirect_uri")},INVALID_ASSERTION:{errno:104,message:c("Invalid assertion")},UNKNOWN_CODE:{errno:105,message:c("Unknown code")},INCORRECT_CODE:{errno:106,message:c("Incorrect code")},EXPIRED_CODE:{errno:107,message:c("Expired code")},INVALID_TOKEN:{errno:108,message:c("Invalid token")},INVALID_PARAMETER:{errno:109,message:c("Invalid OAuth parameter: %(param)s")},INVALID_RESPONSE_TYPE:{errno:110,message:u},UNAUTHORIZED:{errno:111,message:c("Unauthorized")},FORBIDDEN:{errno:112,message:c("Forbidden")},INVALID_CONTENT_TYPE:{errno:113,message:u},INVALID_SCOPES:{errno:114,message:a.interpolate(c("Invalid OAuth parameter: %(param)s"),{param:"scope"})},EXPIRED_TOKEN:{errno:115,message:c("Expired token")},NOT_PUBLIC_CLIENT:{errno:116,message:"Not a public client"},INCORRECT_CODE_CHALLENGE:{errno:117,message:"Incorrect code_challenge"},MISSING_PKCE_PARAMETERS:{errno:118,message:"PKCE parameters missing"},STALE_AUTHENTICATION_TIMESTAMP:{errno:119,message:"Stale authentication timestamp"},MISMATCH_ACR_VALUES:{errno:120,message:"Mismatch acr values"},SERVICE_UNAVAILABLE:{errno:998,message:c("System unavailable, try again soon")},UNEXPECTED_ERROR:{errno:999,message:u},TRY_AGAIN:{errno:1e3,message:c("Something went wrong. Please close this tab and try again.")},INVALID_RESULT:{errno:1001,message:u},USER_CANCELED_OAUTH_LOGIN:{errno:1004,message:c("no message")},MISSING_PARAMETER:{errno:1005,message:c("Missing OAuth parameter: %(param)s")}};i.exports=r.extend({},o,{ERRORS:l,NAMESPACE:"oauth",toInterpolationContext:function(e){try{if(this.is(e,"MISSING_PARAMETER"))return{param:e.param};if(this.is(e,"INVALID_PARAMETER"))return{param:e.param||e.validation.keys.join(",")}}catch(e){s.error("Error in oauth-errors.js->toInterpolationContext: %s",e+"")}return{}}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0);i.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n,i){var o=r.assign({},t,{account:i});return n.navigate(e,o),new Promise(function(){})};return r.assign(n,t,{endpoint:e,halt:!0,type:"navigate"}),n}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){return c+"."+e}function o(e){this._backend=e||new s}var s=n(251),a=n(13),c="__fxa_storage";o.prototype.get=function(e){var t;try{t=JSON.parse(this._backend.getItem(r(e)))}catch(e){}return t},o.prototype.set=function(e,t){this._backend.setItem(r(e),JSON.stringify(t))},o.prototype.remove=function(e){this._backend.removeItem(r(e))},o.prototype.clear=function(){this._backend.clear()},o.prototype.isNull=function(){return this._backend instanceof s},o.testStorage=function(e,t){try{var n;if(t=t||window,"sessionStorage"===e)n=t.sessionStorage;else{if("1"===a.searchParam("disable_local_storage",t.location.search))throw Error("disabled for tests");n=t.localStorage}n.setItem("storage-test","storage-test"),n.removeItem("storage-test")}catch(t){throw function(e,t){return e.context="storage",e.namespace=t,e.errno=e.name||e.message,e}(t,e)}},o.testLocalStorage=function(e){o.testStorage("localStorage",e)},o.testSessionStorage=function(e){o.testStorage("sessionStorage",e)},o._isStorageEnabled=function(e,t){try{return o.testStorage(e,t),!0}catch(e){return!1}},o.isLocalStorageEnabled=function(e){return o._isStorageEnabled("localStorage",e)},o.isSessionStorageEnabled=function(e){return o._isStorageEnabled("sessionStorage",e)},o.factory=function(e,t){return t=t||window,"localStorage"===e&&this.isLocalStorageEnabled(t)?new o(t.localStorage):"sessionStorage"===e&&this.isSessionStorageEnabled(t)?new o(t.sessionStorage):new o(new s)},i.exports=o}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(i=function(e,t,i){function o(){this.load()}var s=n(0),a=["oauth"];o.prototype={load:function(){var e={};try{e=s.extend(e,JSON.parse(sessionStorage.getItem("__fxa_session")))}catch(e){}try{e=s.extend(e,JSON.parse(localStorage.getItem("__fxa_session")))}catch(e){}return s.each(e,function(e,t){o.prototype.hasOwnProperty(t)||(this[t]=e)},this),e},reload:function(){var e=this.load();s.each(this,function(t,n){o.prototype.hasOwnProperty(n)||e.hasOwnProperty(n)||(this[n]=null,delete this[n])},this)},set:function(e,t){if(void 0===t&&"object"===(void 0===e?"undefined":r(e)))return s.each(e,function(e,t){this.set(t,e)},this);o.prototype.hasOwnProperty(e)||(this[e]=t,this.persist())},persist:function(){var e={},t={};s.each(this,function(n,i){0>s.indexOf(a,i)?e[i]=n:t[i]=n});try{localStorage.setItem("__fxa_session",JSON.stringify(t)),sessionStorage.setItem("__fxa_session",JSON.stringify(e))}catch(e){}},get:function(e){return this[e]},clear:function(e){if(void 0!==e)this.hasOwnProperty(e)&&(this[e]=null,delete this[e],this.persist());else for(e in this)this.clear(e)},testRemove:function(e){this.hasOwnProperty(e)&&(this[e]=null,delete this[e])},testClear:function(){for(var e in this)this.hasOwnProperty(e)&&(this[e]=null,delete this[e]);sessionStorage.clear(),localStorage.clear()}},i.exports=new o}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r;r=n(2),void 0===(i={match:function(e){return"text"===e.attr("type")},validate:function(){var e=void 0!==this.attr("required"),t=this.val();if(e&&!t.length)throw r.toError("INPUT_REQUIRED")}})||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(30),s=n(292),a=n(6).preventDefaultThen,c=new o("5m").milliseconds();i.exports=function(){var e,t=r.defaults(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{successMessage:(e="Email resent. Add accounts@firefox.com to your contacts to ensure a smooth delivery.",e)}).successMessage;return{initialize:function(){this._emailResend=new s,this.listenTo(this._emailResend,"maxTriesReached",this._onMaxTriesReached)},events:{"click #resend":a("_resend")},_resend:function(){var e=this;return Promise.resolve().then(function(){if(e.logViewEvent("resend"),e._updateSuccessMessage(),e._emailResend.incrementRequestCount(),e._emailResend.shouldResend())return e.resend().then(function(){t&&e.displaySuccess(t)}).catch(function(t){return e.displayError(t)})})},_updateSuccessMessage:function(){var e=this.$(".success:visible");e&&e.one("animationend",function(){e.removeClass("shake")}).addClass("shake")},_onMaxTriesReached:function(){var e=this;this.logViewEvent("too_many_attempts"),this.$("#resend").hide(),this.setTimeout(function(){e._emailResend.reset(),e.$("#resend").show()},c)}}}}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(4),s=n(9),a=n(119),c={CHANGE_PASSWORD:{name:a.CHANGE_PASSWORD,schema:{email:s.email().required(),keyFetchToken:s.keyFetchToken().optional(),sessionToken:s.sessionToken().required(),uid:s.uid().required(),unwrapBKey:s.unwrapBKey().optional(),verified:s.boolean().required()}},COMPLETE_RESET_PASSWORD_TAB_OPEN:{name:"fxaccounts:complete_reset_password_tab_open",schema:null},DELETE:{name:a.DELETE,schema:{uid:s.uid().required()}},PROFILE_CHANGE:{name:a.PROFILE_CHANGE,schema:{uid:s.uid().required()}},SESSION_VERIFIED:{name:"internal:session_verified"},SIGNED_IN:{name:"internal:signed_in",schema:{keyFetchToken:s.keyFetchToken().optional(),sessionToken:s.sessionToken().required(),sessionTokenContext:s.string().optional(),uid:s.uid().required(),unwrapBKey:s.unwrapBKey().optional()}},SIGNED_OUT:{name:a.LOGOUT,schema:{uid:s.uid().optional()}}},u={},l={};Object.keys(c).forEach(function(e){var t=c[e];u[e]=t.name,l[t.name]=t.schema});var d=o.Model.extend({COMMANDS:u,SCHEMATA:l,initialize:function(e){e=e||{},this._internalChannels=[],this._channels=[],e.iframeChannel&&this._channels.push(e.iframeChannel),e.webChannel&&this._channels.push(e.webChannel),e.tabChannel&&(this._tabChannel=e.tabChannel,this._internalChannels.push(e.tabChannel),this._channels.push(e.tabChannel),this._listen(e.tabChannel))},triggerAll:function(e,t,n){this.triggerRemote(e,t),this.trigger(e,t,n)},triggerRemote:function(e,t){if(t=function(e){return e?r.omit(e,r.isUndefined):e}(t),l[e]){if(s.validate(t,l[e]).error)throw Error("Invalid data for command "+e)}else if(!r.isNull(t)&&!r.isUndefined(t))throw Error("Unexpected data for command "+e);/^internal:/.test(e)?this._internalChannels.forEach(function(n){n.send(e,t)}):this._channels.forEach(function(n){n.send(e,t)})},_listen:function(e){var t=this;r.each(u,function(n){e.on(n,t.trigger.bind(t,n))})}},u);i.exports=d}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(33);i.exports={dependsOn:[r],resetPassword:function(e){var t=this,n=this.user.initAccount({email:e});return n.resetPassword(this.relier,{resume:this.getStringifiedResumeToken(n)}).then(function(n){return t.navigate("confirm_reset_password",{email:e,passwordForgotToken:n.passwordForgotToken},{clearQueryParams:!0}),n})},retryResetPassword:function(e,t){var n=this.user.initAccount({email:e});return n.retryResetPassword(t,this.relier,{resume:this.getStringifiedResumeToken(n)})}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(183);i.exports={getResumeToken:function(e){var t=e.pickResumeTokenInfo(),n=this.relier.pickResumeTokenInfo(),i=this.user.pickResumeTokenInfo(),s=void 0,a=this.metrics.getFlowModel();a&&(s=a.pickResumeTokenInfo());var c=r.extend({},s,n,i,t);return new o(c)},getStringifiedResumeToken:function(e){return this.getResumeToken(e).stringify()}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(177);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"hash",value:function(e){var t=r((this.name||"")+":"+e).substr(0,8);return parseInt(t,16)}},{key:"luckyNumber",value:function(e){return this.hash(e)/4294967295}},{key:"bernoulliTrial",value:function(e,t){return this.luckyNumber(t)<=e}},{key:"uniformChoice",value:function(e,t){return e[this.hash(t)%e.length]}},{key:"choose",value:function(){if(this.deprecated)throw Error("Experiment deprecated: "+this.name);throw Error("choose must be overridden")}},{key:"isTestEmail",value:function(e){return/.+@softvision\.(com|ro)$/.test(e)||/.+@mozilla\.(com|org)$/.test(e)}}]),e}()},function(e,t,n){"use strict";var i,r;window,void 0===(r="function"==typeof(i=function(){function e(e){this.window=e}return e.prototype={hasGetUserMedia:function(){var e=this.window.navigator;return!!(e.mediaDevices||e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia)},hasPasswordRevealer:function(){var e=this.window.document;return!(!e.documentMode||10>e.documentMode)},hasTouchEvents:function(){var e=this.window;
/*!
       * This code comes from Modernizr v2.7.1
       * www.modernizr.com
       *
       * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
       * Available under the BSD and MIT licenses: www.modernizr.com/license/
       */
return!!("ontouchstart"in e||e.DocumentTouch&&e.document instanceof e.DocumentTouch)},isFramed:function(){var e=this.window;return!(!e.top||e.top===e||{payflow:!0,remote:!0}[e.name])},isAboutAccounts:function(){var e=this.window,t=!(!e.top||e.top===e||"remote"!==e.name),n=e.location.search.indexOf("forceAboutAccounts=true")>0;return t||n},isFxiOS:function(){return/FxiOS/.test(this.window.navigator.userAgent)},hasSendBeacon:function(){return"function"==typeof this.window.navigator.sendBeacon}},e})?i.call(t,n,t,e):i)||(e.exports=r)},function(e){"use strict";e.exports={FORCE_AUTH:"force_auth",PASSWORD_RESET:"reset_password",PASSWORD_RESET_WITH_RECOVERY_KEY:"reset_password_with_recovery_key",PRIMARY_EMAIL_VERIFIED:"primary_email_verified",RECOVERY_KEY:"recovery_key",SECONDARY_EMAIL_VERIFIED:"secondary_email_verified",SIGN_IN:"login",SIGN_UP:"signup"}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e,t){return new Promise(function(n){e.setTimeout(n,t)})}var o=n(79);i.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"button[type=submit]",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){for(var i=this,s=arguments.length,a=Array(s),c=0;s>c;c++)a[c]=arguments[c];var u=this.$(t),l=parseInt(u.data("minProgressIndicatorMs")||0,10),d=function(e,t){var n=t.data("progressIndicator");return n||(n=new o,e.trackChildView(n),t.data("progressIndicator",n)),n}(this,u);d.start(u);var h=Date.now();return r(d,n).then(function(){return i.invokeHandler(e,a)}).then(function(e){var t=Date.now()-h;return r(d,Math.max(l-t,0)).then(function(){return e&&e.halt||d.done(),e})},function(e){throw d.done(),e})}}}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(i=function(e,t,i){var o=n(0),s=n(23);i.exports={find:function(e){var t;if(void 0!==e&&null!==e)return"number"==typeof e.errno?t=this.find(e.errno):"number"==typeof e?t=o.find(this.ERRORS,function(t){return t.errno===e}):"string"==typeof e&&(t=this.ERRORS[e]),t},toMessage:function(e){if(!e)return this.toMessage("SERVICE_UNAVAILABLE");if(e.forceMessage)return e.forceMessage;if(e.message)return e.message;var t=this.find(e);return t&&t.message?t.message:"string"!=typeof e?this.toMessage("UNEXPECTED_ERROR"):e},toInterpolatedMessage:function(e,t){var n=this.toMessage(e),i=this.toInterpolationContext(e);return t?t.get(n,i):s.interpolate(n,i)},toInterpolationContext:function(){return{}},toErrno:function(e){var t=this.find(e);return t&&t.errno?t.errno:e},toError:function(e,t){var n=this.toErrno(e),i=this.toMessage(n),s=o.isString(i)?Error(i):i;return"object"===(void 0===e?"undefined":r(e))&&o.extendOwn(s,e),s.errno=n,s.message=i,s.namespace=this.NAMESPACE,s.errorModule=this,t&&(s.context=t),s},toInvalidParameterError:function(e){var t=this.toError("INVALID_PARAMETER");return t.param=e,t},toMissingParameterError:function(e){var t=this.toError("MISSING_PARAMETER");return t.param=e,t},toInvalidResumeTokenPropertyError:function(e){var t=this.toError("INVALID_RESUME_TOKEN_PROPERTY");return t.property=e,t},toMissingResumeTokenPropertyError:function(e){var t=this.toError("MISSING_RESUME_TOKEN_PROPERTY");return t.property=e,t},toInvalidDataAttributeError:function(e){var t=this.toError("INVALID_DATA_ATTRIBUTE");return t.property=e,t},toMissingDataAttributeError:function(e){var t=this.toError("MISSING_DATA_ATTRIBUTE");return t.property=e,t},is:function(e,t){var n=this.toErrno(t);return e.errno===n},created:function(e){return e.namespace===this.NAMESPACE},normalizeXHRError:function(e){var t;"status"in(t=this.toError(e&&0!==e.status?e.responseJSON?e.responseJSON:503===e.status?"SERVICE_UNAVAILABLE":429===e.status?"THROTTLED":"UNEXPECTED_ERROR":"SERVICE_UNAVAILABLE"))||(t.status=e&&e.status||0);return t}}}(0,0,e))||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports={BACKSPACE:8,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,NUM_0:48,NUM_1:49,NUM_9:57,NUMPAD_0:96,NUMPAD_9:105,PERIOD:190,RIGHT_ARROW:39,TAB:9,UP_ARROW:38}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i={dependsOn:[n(19),n(12),n(20)],isEligibleForConnectAnotherDevice:function(e){return!this.user.isAnotherAccountSignedIn(e)},navigateToConnectAnotherDeviceScreen:function(e){var t=this;return Promise.resolve().then(function(){if(!t.isEligibleForConnectAnotherDevice(e))throw Error("chooseConnectAnotherDeviceScreen can only be called if user is eligible to connect another device");var n=t.model.get("type");t.navigate("connect_another_device",{account:e,showSuccessMessage:!0,type:n})})},replaceCurrentPageWithSmsScreen:function(e,t,n){var i=this.model.get("type");this.replaceCurrentPage("sms",{account:e,country:t,showSuccessMessage:n,type:i})},getEligibleSmsCountry:function(e){var t=this;return this.notifier.trigger("flow.initialize"),this._isEligibleForSms(e).then(function(n){var i=n.country;if(i){var r=t.getExperimentGroup("sendSms",{account:e,country:i});if(r){if(!0===r)return i;if(t.createExperiment("sendSms",r),"control"!==r)return i;t.logFlowEvent("sms.ineligible.control_group")}else t.logFlowEvent("sms.ineligible.not_in_experiment")}})},_isEligibleForSms:function(e){return Promise.resolve(this._areSmsRequirementsMet(e)&&this._smsCountry(e)).then(function(e){return{country:e,ok:!!e}})},_areSmsRequirementsMet:function(e){var t=void 0;return this.getUserAgent().isAndroid()?t="sms.ineligible.android":this.getUserAgent().isIos()?t="sms.ineligible.ios":e&&e.get("sessionToken")?this.user.isAnotherAccountSignedIn(e)&&(t="sms.ineligible.other_user_signed_in"):t="sms.ineligible.no_session",t&&this.logFlowEvent(t),!t},_smsCountry:function(e){var t=this;return e.smsStatus(this.relier.pick("country")).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.country&&t.logFlowEvent("sms.status.country."+e.country),e.ok)return e.country||"US";t.logFlowEvent("sms.ineligible.unsupported_country")},function(e){e.context=t.getViewName()+".smsStatus",t.logError(e),t.logFlowEvent("sms.ineligible.xhr_error")})}})||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports=function(){var e=function(){return new Promise(function(){})};return e.halt=!0,e.type="halt",e}}(0,0,e))||(e.exports=t)},function(e){"use strict";var t=function(e){return e};e.exports={setInitialContext:function(e){e.set({lastCheckedTime:this.getLastCheckedTimeString()})},setLastCheckedTime:function(e){e||(e=new Date),this.lastCheckedTime=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},getLastCheckedTimeString:function(){var e=t("none");return this.lastCheckedTime&&(e=this.lastCheckedTime),this.translate(t("Last checked: %(lastCheckTime)s"),{lastCheckTime:e})}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(100);i.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{createMarketingSnippet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.extend({broker:this.broker,el:this.$(".marketing-area"),lang:this.lang,metrics:this.metrics,notifier:this.notifier,service:this.relier.get("service"),type:this.model.get("type"),window:this.window},e,t),i=new o(n);return this.trackChildView(i),i.render()},afterRender:function(){if(!1!==e.autocreate)return this.createMarketingSnippet()}}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(24),s=n(25),a=n(33),c=n(51),u=n(36),l=n(107);i.exports={dependsOn:[a,l],signIn:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!e||e.isDefault()||!e.has("sessionToken")&&!t?Promise.reject(r.toError("UNEXPECTED_ERROR")):this.invokeBrokerMethod("beforeSignIn",e).then(function(){n.logFlowEvent("attempt","signin");var r=void 0;if(n.getTokenCodeExperimentGroup)switch(n.getTokenCodeExperimentGroup()){case"treatment-code":r=c.EMAIL_2FA;break;case"treatment-link":r=c.EMAIL}return n.relier.isOAuth()&&n.relier.wantsTwoStepAuthentication()&&(r=c.TOTP_2FA),e.has("sessionToken")&&!n.broker.hasCapability("reuseExistingSession")&&e.discardSessionToken(),n.user.signInAccount(e,t,n.relier,{resume:n.getStringifiedResumeToken(e),unblockCode:i.unblockCode,verificationMethod:r})}).then(function(e){return n.formPrefill&&n.formPrefill.clear(),n.relier.accountNeedsPermissions(e)?n.navigate("signin_permissions",{account:e,onSubmitComplete:n.onSignInSuccess.bind(n)}):n.onSignInSuccess(e)}).catch(function(i){if(r.is(i,"THROTTLED")||r.is(i,"REQUEST_BLOCKED"))return n.onSignInBlocked(e,t,i);if(r.is(i,"EMAIL_HARD_BOUNCE")||r.is(i,"EMAIL_SENT_COMPLAINT"))return n.navigate("signin_bounced",{email:e.get("email")});if(r.is(i,"TOTP_REQUIRED")||o.is(i,"MISMATCH_ACR_VALUES"))return i.forceMessage="This request requires two step authentication enabled on your account. <a target=\"_blank\" href='https://support.mozilla.org/kb/secure-firefox-account-two-step-authentication'>More Information</a>",n.unsafeDisplayError(i);throw i})},onSignInBlocked:function(e,t,n){var i=this;return n.verificationReason===u.SIGN_IN&&n.verificationMethod===c.EMAIL_CAPTCHA?e.sendUnblockEmail().then(function(){return i.navigate("signin_unblock",{account:e,lastPage:i.currentPage,password:t})}):Promise.reject(n)},onSignInSuccess:function(e){if(!e.get("verified")){var t=e.get("verificationMethod"),n=e.get("verificationReason");return this.navigate(n===u.SIGN_IN&&t===c.EMAIL?"confirm_signin":n===u.SIGN_IN&&t===c.EMAIL_2FA?"signin_token_code":n===u.SIGN_IN&&t===c.TOTP_2FA?"signin_totp_code":"confirm",{account:e})}e.get("uid")!==this.relier.get("uid")&&this.broker.hasCapability("allowUidChange")?this.relier.set("uid",e.get("uid")):e.get("email")!==this.relier.get("email")&&(this.relier.set("email",e.get("email")),this.relier.set("uid",e.get("uid"))),this.logEvent("signin.success"),this.logEvent("signin.success.skip-confirm"),this.logViewEvent("signin.success");var i=this.afterSignInBrokerMethod||"afterSignIn",r=this.afterSignInNavigateData||{};if(this.model.get("redirectTo")){var o=new s(this.model.get("redirectTo"));this.model.unset("redirectTo"),this.broker.setBehavior(i,o,r)}return this.invokeBrokerMethod(i,e)}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return new Promise(function(t,n){e.then(function(e){return t(e)},function(e){return n(e)})})}var r=n(8),o=n(0),s="application/json";e.exports={ajax:function(e){return"json"===e.dataType&&(e.contentType||(e.contentType=s),function(e){return!(!e.data||!1===e.processData||e.contentType!==s)}(e)&&(e.data=JSON.stringify(e.data)),e.accepts||(e.accepts={}),e.accepts.json=s),i(r.ajax(e))},oauthAjax:function(e){var t={contentType:e.contentType||s,dataType:"json",headers:{Accept:s,Authorization:"Bearer "+e.accessToken},timeout:e.timeout,type:e.type,url:e.url};e.headers&&o.extend(t.headers,e.headers);var n=e.data;return n&&(t.data=n),"undefined"!=typeof Blob&&n instanceof Blob&&(t.processData=!1),this.ajax(t)},get:function(e,t,n,i){return i||(i="json"),this.ajax({data:t,dataType:i,method:"GET",success:n,url:e})},post:function(e,t,n,i){return i||(i="json"),this.ajax({data:t,dataType:i,method:"POST",success:n,url:e})},getJSON:function(e,t,n){return i(r.getJSON(e,t,n))}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(67),s=n(183),a=n(9);i.exports={pickResumeTokenInfo:function(){if(this.resumeTokenFields)return this.pick(this.resumeTokenFields)},populateFromStringifiedResumeToken:function(e){if(this.resumeTokenFields){var t=s.createFromStringifiedResumeToken(e);this.populateFromResumeToken(t)}},populateFromResumeToken:function(e){if(this.resumeTokenFields){var t=e.pick(this.resumeTokenFields),n=function(e){if(this.resumeTokenSchema)return a.validate(e,this.resumeTokenSchema).error}.call(this,t);if(n)return function(e){e=e instanceof ReferenceError?r.toMissingResumeTokenPropertyError(e.key):r.toInvalidResumeTokenPropertyError(e.key),o.captureError(e,this.sentryMetrics)}.call(this,n);this.set(t)}}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),o=i(n(49)),s=i(n(70));e.exports={dependsOn:[o.default],importSearchParamsUsingSchema:function(e,t){var n=this.getSearchParams(Object.keys(e));this.importFromObjectUsingSchema(n,e,t)},importHashParamsUsingSchema:function(e,t){var n=this.getHashParams(Object.keys(e));this.importFromObjectUsingSchema(n,e,t)},importFromObjectUsingSchema:function(e,t,n){var i=(0,r.pick)(e,Object.keys(t)),o=s.default.transformUsingSchema(i,t,n);this.set(o)}}},function(e,t,n){"use strict";var i,r=n(13),o=(i=r)&&i.__esModule?i:{default:i};e.exports={getSearchParam:function(e){return o.default.searchParam(e,this.window.location.search)},getSearchParams:function(e){return o.default.searchParams(this.window.location.search,e)},getHashParams:function(e){return o.default.hashParams(this.window.location.hash,e)}}},,function(e){"use strict";e.exports={EMAIL:"email",EMAIL_2FA:"email-2fa",EMAIL_CAPTCHA:"email-captcha",TOTP_2FA:"totp-2fa"}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){n(176).polyfill(),i.exports={delay:function(e){return new Promise(function(t){setTimeout(t,e)})},denodeify:function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return new Promise(function(t,i){e.apply(void 0,n.concat([function(e,n){e?i(e):t(n)}]))})}}}}(0,0,e))||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports=function(){var e=function(){};return e.type="null",e}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(188)),s=function e(t){var n=(0,o.default)(t);return r.default.extend(n,{isAndroid:function(){return"Android"===this.os.name},isIos:function(){return"iOS"===this.os.name},isMobileSafari:function(){return"Mobile Safari"===this.browser.name},isFirefox:function(){return"Firefox"===this.browser.name},isChromeAndroid:function(){return"Chrome"===this.browser.name&&"Android"===this.os.name},isEdge:function(){return"Edge"===this.browser.name},isIE:function(){return"IE"===this.browser.name},isFirefoxAndroid:function(){return this.isFirefox()&&this.isAndroid()},isFirefoxIos:function(){return this.isFirefox()&&this.isIos()},isFirefoxDesktop:function(){return this.isFirefox()&&!this.isFirefoxIos()&&!this.isFirefoxAndroid()},supportsSvgTransformOrigin:function(){return!(this.isIos()||this.isEdge()||this.isIE())},parseVersion:function(){var e=this.browser.version?this.browser.version.split("."):[];return{major:parseInt(e[0]||0,10),minor:parseInt(e[1]||0,10),patch:parseInt(e[2]||0,10)}},parseOsVersion:function(){var e=this.os.version?this.os.version.split("."):[];return{major:parseInt(e[0]||0,10),minor:parseInt(e[1]||0,10),patch:parseInt(e[2]||0,10)}},genericOSName:function(){return e.toGenericOSName(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.os.name)},genericDeviceType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.device.type;switch(e){case"mobile":case"tablet":return e;case"smarttv":case"wearable":case"embedded":return"mobile";default:return"desktop"}}}),n};s.toGenericOSName=function(e){return/^Windows/.test(e)?"Windows":/^Android/.test(e)?"Android":/^Mac OS/.test(e)?"macOS":/^iOS/.test(e)?"iOS":/^Ubuntu/.test(e)||/^Linux/.test(e)||/^Fedora/.test(e)||/^Red Hat/.test(e)||/^Debian/.test(e)?"Linux":"Unknown"},e.exports=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw Error(t+" is required")}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(6).preventDefaultThen,o=n(31),s=n(43),a=n(139),c=n(14),u=n(295),l=function(e){return e},d=n(37);i.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dependsOn:[s,c,a],events:{"click .cancel-verification-email":r("_clickCancelVerificationEmail"),"click .refresh-verification-state":r("_clickRefreshVerificationState"),"click .send-verification-email":r("_clickSendVerificationEmail")},initialize:function(){this.gatedTemplate=this.template},_clickRefreshVerificationState:d(function(){var e=this;return this.setupSessionGateIfRequired().then(function(t){e.setLastCheckedTime(),t&&(e.displaySuccess(l("Primary email verified successfully"),{closePanel:!1}),e.notifier.triggerAll(o.SESSION_VERIFIED)),e.render()})},"button.settings-button.refresh-verification-state",350),_clickSendVerificationEmail:function(){var e=this;return this.getSignedInAccount().requestVerifySession({redirectTo:this.window.location.href}).then(function(){return e.setLastCheckedTime(),e.displaySuccess(l("Verification email sent"),{closePanel:!1}),e.model.set({emailSent:!0}),e.render()})},_clickCancelVerificationEmail:function(){this.closePanel(),this.navigate("/settings"),this.$(".send-verification-email").removeClass("hidden"),this.$(".cancel-verification-email").addClass("hidden")},setInitialContext:function(t){t.set({email:this.getSignedInAccount().get("email"),emailSent:this.model.get("emailSent"),gatedHref:e.gatedHref,isPanelOpen:this.isPanelOpen(),title:this.translate(e.title)})},setupSessionGateIfRequired:function(){var e=this;return this.getSignedInAccount().sessionVerificationStatus().then(function(t){var n=t.sessionVerified;return e.template=n?e.gatedTemplate:u,n})}}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delayBeforeLogReasonMS||a,n=e.balloonEl,i=e.passwordEl;return{afterRender:function(){var e=this;return Promise.resolve().then(function(){if(e.$(i).length){var n=e.passwordModel=e._createPasswordStrengthBalloonModel();return e.listenTo(n,"invalid",(0,r.debounce)(function(){return e._logErrorIfInvalid()},t)),n.fetch().then(function(){var t=e._createPasswordWithStrengthBalloonView(e.passwordModel);e.trackChildView(t)})}})},_createPasswordStrengthBalloonModel:function(){return new o.default({email:this.getAccount().get("email")})},_createPasswordWithStrengthBalloonView:function(e){return new s.default({balloonEl:this.$(n),el:this.$(i),lang:this.lang,model:e,translator:this.translator})},_logErrorIfInvalid:function(){var e=this.passwordModel.validationError;e&&this.logError(e)}}};var r=n(0),o=i(n(306)),s=i(n(141)),a=1500},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(31),o=n(27),s=n(13),a={notifications:{},clearSessionAndNavigateToSignIn:function(){this.user.clearSignedInAccountUid(),o.clear(),this.navigateToSignIn()},navigateToSignIn:function(){var e=s.objToSearchString({context:this.relier.get("context"),entrypoint:this.relier.get("entrypoint"),service:this.relier.get("service"),utm_campaign:this.relier.get("utmCampaign"),utm_content:this.relier.get("utmContent"),utm_medium:this.relier.get("utmMedium"),utm_source:this.relier.get("utmSource"),utm_term:this.relier.get("utmTerm")});this.navigateAway("/signin"+e)}};a.notifications[r.SIGNED_OUT]="clearSessionAndNavigateToSignIn",i.exports=a}(0,0,e))||(e.exports=i)},function(e){"use strict";e.exports={afterRender:function(){this.$(".graphic").addClass("pulse")}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=function(e){return e},s={initialize:function(e){this._session=(e=e||{}).session},events:{'click a[href="/confirm_reset_password"]':n(6).preventDefaultThen("sendAccountResetEmail")},notifyOfResetAccount:function(e){this._resetAccount=e;var t=r.toError("ACCOUNT_RESET");return t.forceMessage=o("Your account has been locked for security reasons")+'<br><a href="/confirm_reset_password">'+o("Reset password")+"</a>",this.unsafeDisplayError(t)},sendAccountResetEmail:function(){var e=this;return this.resetPassword(this._resetAccount.get("email")).catch(function(t){e._session.clear("oauth"),e.displayError(t)})}};i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2)),o=i(n(22));t.default={dependsOn:[o.default],getPrefillEmail:function(){return(this.formPrefill.get("email")||this.relier.get("email")||"").trim()},isPasswordNeededForAccount:function(e){if(!e.get("email"))return!0;if(this.relier.wantsKeys())return!0;if(!this.user.isSyncAccount(e))return!0;if(!0===this.model.get("chooserAskForPassword"))return!0;var t=this.getPrefillEmail();return!(!t||t===e.get("email"))},useLoggedInAccount:function(e){var t=this;return this.signIn(e,null).catch(function(){return t.user.removeAccount(e),t.formPrefill.set(e.pick("email")),t.model.set("chooserAskForPassword",!0),t.render().then(function(){return t.displayError(r.default.toError("SESSION_EXPIRED"))})})},suggestedAccount:function(){var e=this.user,t=e.getChooserAccount();return this.allowSuggestedAccount(t)?t:e.initAccount({})},allowSuggestedAccount:function(e){var t=(e.get("email")||"").trim();if(!t)return!1;var n=this.getPrefillEmail();return!n||n===t}}},function(e,t,n){"use strict";var i=n(19);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dependsOn:[i],beforeRender:function(){if("email"===this.relier.get("action")&&e.treatmentPathname)this.replaceCurrentPage(e.treatmentPathname);else if(this.isInEmailFirstExperiment()){var t=this.getEmailFirstExperimentGroup();this.createExperiment("emailFirst",t),"treatment"===t&&e.treatmentPathname&&this.replaceCurrentPage(e.treatmentPathname)}},getEmailFirstExperimentGroup:function(){return this.getExperimentGroup("emailFirst",this._getEmailFirstExperimentSubject())},isInEmailFirstExperiment:function(){return this.isInExperiment("emailFirst",this._getEmailFirstExperimentSubject())},isInEmailFirstExperimentGroup:function(e){return this.isInExperimentGroup("emailFirst",e,this._getEmailFirstExperimentSubject())},_getEmailFirstExperimentSubject:function(){return{isEmailFirstSupported:this.broker.getCapability("emailFirst")}}}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(10);i.exports={dependsOn:[r],afterRender:function(){this.logFlowEventOnce("begin")}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2)),a=i(n(61)),c=i(n(3)),u=i(n(65)),l=i(n(62)),d=i(n(107)),h=i(n(63)),f=i(n(22)),p=i(n(7)),g=i(n(11)),m=i(n(337)),v=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,s=Array(o),a=0;o>a;a++)s[a]=arguments[a];return n=i=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.template=m.default,r(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,p.default),o(e,[{key:"getAccount",value:function(){return this.model.get("account")}},{key:"beforeRender",value:function(){var e=this.getAccount(),t=this.relier.get("email");e?this.formPrefill.set(e.pick("email")):t&&this.formPrefill.set("email",t)}},{key:"afterRender",value:function(){var e=this.relier.get("action");if(e&&"email"!==e)this.replaceCurrentPage(e);else{if(this.isInEmailFirstExperimentGroup("treatment")||"email"===e)return this.chooseEmailActionPage();this.getSignedInAccount().get("sessionToken")?this.replaceCurrentPage("settings"):this.replaceCurrentPage("signup")}}},{key:"chooseEmailActionPage",value:function(){var e=this.relier.get("email"),t=this.getAccount(),n=this.suggestedAccount();if(this.notifier.trigger("email-first-flow"),t);else if(e){if(this.isValid())return this.checkEmail(e);this.showValidationErrors()}else this.allowSuggestedAccount(n)&&this.replaceCurrentPage("signin",{account:n})}},{key:"submit",value:function(){return this.checkEmail(this._getEmail())}},{key:"isValidEnd",value:function(){return!this._isEmailFirefoxDomain(this._getEmail())&&function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isValidEnd",this).call(this)}},{key:"showValidationErrorsEnd",value:function(){this._isEmailFirefoxDomain(this._getEmail())&&this.showValidationError("input[type=email]",s.default.toError("DIFFERENT_EMAIL_REQUIRED_FIREFOX_DOMAIN"))}},{key:"_getEmail",value:function(){return this.getElementValue("input[type=email]")}},{key:"_isEmailFirefoxDomain",value:function(e){return/@firefox(\.com)?$/.test(e)}},{key:"checkEmail",value:function(e){var t=this,n=this.user.initAccount({email:e});return this.invokeBrokerMethod("beforeSignIn",n).then(function(){return t.user.checkAccountEmailExists(n)}).then(function(i){var r=i?"signin":"signup";i&&(n=t.user.getAccountByEmail(e)).set("email",e),t.navigate(r,{account:n})})}},{key:"viewName",get:function(){return"enter-email"}}]),e}();c.default.mixin(v,a.default,(0,u.default)({}),(0,l.default)(),d.default,h.default,f.default,g.default),e.exports=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=i(n(22)),s=i(n(40)),a=i(n(336));e.exports=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dependsOn:[o.default],initialize:function(e){this._isCoppaEnabled=!1!==e.isCoppaEnabled},events:(e={},r(e,"input #age","onCoppaInput"),r(e,"keydown #age","onCoppaKeyDown"),r(e,"keyup #age","onCoppaInput"),e),beforeRender:function(){this.isCoppaEnabled()&&this.window.document.cookie.indexOf("tooyoung")>-1&&this.navigate("cannot_create_account")},setInitialContext:function(e){if(this.isCoppaEnabled()){var n=this.renderTemplate(a.default,{required:t.required});e.set({coppaHTML:n})}},isCoppaEnabled:function(){return this.relier.has("isCoppaEnabled")?this.relier.get("isCoppaEnabled"):this._isCoppaEnabled},isUserOldEnough:function(){return!this.isCoppaEnabled()||this._getAge()>=13},tooYoung:function(){this.notifier.trigger("signup.tooyoung"),this.window.document.cookie="tooyoung=1;",this.navigate("cannot_create_account")},onCoppaInput:function(){var e=this.$("#age");e.val().length>3&&e.val(e.val().substr(0,3))},onCoppaKeyDown:function(e){var t;(t=e.which)!==s.default.BACKSPACE&&t!==s.default.TAB&&t!==s.default.LEFT_ARROW&&t!==s.default.RIGHT_ARROW&&t!==s.default.ENTER&&(s.default.NUM_0>t||t>s.default.NUM_9)&&(s.default.NUMPAD_0>t||t>s.default.NUMPAD_9)&&e.preventDefault()},coppaHasValue:function(){return!!this._getCoppaValue()},_getCoppaValue:function(){return this.getElementValue("#age")},_getAge:function(){return parseInt(this._getCoppaValue(),10)}}}},function(e){"use strict";function t(e){return function(t){return e.replace(/\$\{serverPhoneNumber\}/,t)}}function n(e){return function(t){return function(e,t){return 0===e.indexOf(t)}(t,e)?t:""+e+t}}e.exports={AT:{format:t("+43 ${serverPhoneNumber}"),normalize:n("+43"),pattern:/^(?:\+43)?\d{6,}$/,prefix:"+43",rolloutRate:1},AU:{format:t("+61 ${serverPhoneNumber}"),normalize:n("+61"),pattern:/^(?:\+61\d{9}|\d{10})$/,prefix:"+61",rolloutRate:1},BE:{format:t("+32 ${serverPhoneNumber}"),normalize:n("+32"),pattern:/^(?:\+32\d{9}|\d{10})$/,prefix:"+32",rolloutRate:1},DE:{format:t("+49 ${serverPhoneNumber}"),normalize:n("+49"),pattern:/^(?:\+49)?\d{6,13}$/,prefix:"+49",rolloutRate:1},DK:{format:t("+45 ${serverPhoneNumber}"),normalize:n("+45"),pattern:/^(?:\+45)?\d{8}$/,prefix:"+45",rolloutRate:1},ES:{format:t("+34 ${serverPhoneNumber}"),normalize:n("+34"),pattern:/^(?:\+34)?\d{9}$/,prefix:"+34",rolloutRate:1},FR:{format:t("+33 ${serverPhoneNumber}"),normalize:n("+33"),pattern:/^(?:\+33\d{9}|\d{10})$/,prefix:"+33",rolloutRate:1},GB:{format:t("+44 ${serverPhoneNumber}"),normalize:n("+44"),pattern:/^(?:\+44\d{10}|\d{11})$/,prefix:"+44",rolloutRate:1},IT:{format:t("+39 ${serverPhoneNumber}"),normalize:n("+39"),pattern:/^(?:\+39)?\d{9,10}$/,prefix:"+39",rolloutRate:1},LU:{format:t("+352 ${serverPhoneNumber}"),normalize:n("+352"),pattern:/^(?:\+352)?\d{9}$/,prefix:"+352",rolloutRate:0},NL:{format:t("+31 ${serverPhoneNumber}"),normalize:n("+31"),pattern:/^(?:\+31)?\d{4,}$/,prefix:"+31",rolloutRate:1},PT:{format:t("+351 ${serverPhoneNumber}"),normalize:n("+351"),pattern:/^(?:\+351)?\d{9}$/,prefix:"+351",rolloutRate:1},RO:{format:t("+40 ${serverPhoneNumber}"),normalize:function(e){var t=/^(\+40)?0?/;return t.test(e)&&(e=e.replace(t,"")),"+40"+e},pattern:/^(?:\+40)?0?7\d{8,8}$/,prefix:"+40",rolloutRate:1},US:{format:function(e){return e},normalize:function(e){return/^\+1/.test(e)?e:/^1/.test(e)&&11===e.length?"+"+e:"+1"+e},pattern:/^(\+?1)?[2-9]\d{9,9}$/,prefix:"+1",rolloutRate:1}},e.exports.CA=e.exports.US},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(181),s=n(240),a=n(241),c=n(18),u=n(24);i.exports={getErrorPageTemplate:function(e){return r.is(e,"INVALID_PARAMETER")||r.is(e,"MISSING_PARAMETER")||u.is(e,"INCORRECT_REDIRECT")||u.is(e,"INVALID_PARAMETER")||u.is(e,"MISSING_PARAMETER")||u.is(e,"UNKNOWN_CLIENT")?a:s},captureError:function(e,t,n,i){new c(i).error(e);try{e.message=this.getErrorMessage(e)}catch(e){}t.captureException(e),n&&n.logError(e)},captureAndFlushError:function(e,t,n,i){return this.captureError(e,t,n,i),Promise.resolve().then(function(){if(n)return n.flush()})},renderError:function(e,t,n){var i=this.getErrorPageTemplate(e)({message:this.getErrorMessage(e,n),t:function(e){return e?e.translateInTemplate.bind(e):function(){return function(e){return e}}}(n)});o.write(t,i)},fatalError:function(e,t,n,i,r){return Promise.all([this.captureAndFlushError(e,t,n,i),this.renderError(e,i,r)])},getErrorMessage:function(e,t){return e&&e.errorModule?e.errorModule.toInterpolatedMessage(e,t):e.message}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){var t=e.notifier;this._consumer=e.consumer,this._notifier=t,this.delegateNotifications()}var o=n(0),s=/^once!/;r.prototype={delegateNotifications:function(e){var t=this,n=this._consumer;if(!e&&!(e=o.result(n,"notifications")))return!1;var i=function(i){var a=e[i],c="on";s.test(i)&&(c="once",i=i.replace(s,"")),o.isString(a)&&o.isFunction(n[a])?t[c](i,function(){n[a].apply(n,arguments)}):o.isFunction(a)&&t[c](i,a.bind(n)),r=i};for(var r in e)i(r)},trigger:function(e,t){this._notifier.trigger(e,t,this._consumer)},triggerAll:function(e,t){this._notifier.triggerAll(e,t,this._consumer)},triggerRemote:function(e,t){this._notifier.triggerRemote(e,t)},on:function(e,t){this._consumer.listenTo(this._notifier,e,t)},once:function(e,t){this._consumer.listenToOnce(this._notifier,e,t)},off:function(e,t){this._consumer.stopListening(this._notifier,e,t)}},i.exports={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.notifier&&(this.notifier=new r({consumer:this,notifier:e.notifier}))}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){return c.reduce(e,function(e,t){return e.concat(c.map(t,function(e){return e}))},[])}function o(e){if(e&&e!==b)return e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._speedTrap=new y,this._speedTrap.init(),this.timers=this._speedTrap.timers,this.events=this._speedTrap.events,this._window=e.window||window,this._activeExperiments={},this._brokerType=e.brokerType||b,this._clientHeight=e.clientHeight||b,this._clientWidth=e.clientWidth||b,this._collector=e.collector||"",this._context=e.context||l.CONTENT_SERVER_CONTEXT,this._devicePixelRatio=e.devicePixelRatio||b,this._emailDomain=b,this._entrypoint=e.entrypoint||b,this._env=e.environment||new f(this._window),this._eventMemory={},this._inactivityFlushMs=e.inactivityFlushMs||E,this._isSampledUser=e.isSampledUser||!1,this._lang=e.lang||"unknown",this._marketingImpressions={},this._migration=e.migration||b,this._numStoredAccounts=e.numStoredAccounts||"",this._referrer=this._window.document.referrer||b,this._screenHeight=e.screenHeight||b,this._screenWidth=e.screenWidth||b,this._sentryMetrics=e.sentryMetrics,this._service=e.service||b,this._startTime=e.startTime||this._speedTrap.baseTime,this._uid=e.uid||b,this._uniqueUserId=e.uniqueUserId||b,this._utmCampaign=e.utmCampaign||b,this._utmContent=e.utmContent||b,this._utmMedium=e.utmMedium||b,this._utmSource=e.utmSource||b,this._utmTerm=e.utmTerm||b,this._xhr=e.xhr||_,this.initialize(e)}var a=n(8),c=n(0),u=n(3),l=n(5),d=n(4),h=n(30),f=n(35),p=n(243),g=n(68),m=n(210).default,v=n(23),_=n(46),y=function(){};y.prototype=m;var w=["broker","context","deviceId","duration","emailDomain","entrypoint","events","experiments","flowBeginTime","flowId","flushTime","initialView","isSampledUser","lang","marketing","migration","navigationTiming","numStoredAccounts","referrer","screen","service","startTime","timers","uid","uniqueUserId","utm_campaign","utm_content","utm_medium","utm_source","utm_term"],E=new h("2m").milliseconds(),b="none";c.extend(s.prototype,d.Events,{ALLOWED_FIELDS:w,initialize:function(){this._flush=c.bind(this.flush,this,!0),a(this._window).on("unload",this._flush),a(this._window).on("blur",this._flush),this._resetInactivityFlushTimeout()},destroy:function(){a(this._window).off("unload",this._flush),a(this._window).off("blur",this._flush),this._clearInactivityFlushTimeout()},notifications:{"flow.initialize":"_initializeFlowModel","flow.event":"_logFlowEvent","set-email-domain":"_setEmailDomain","set-uid":"_setUid","clear-uid":"_clearUid","once!view-shown":"_setInitialView"},_initializeFlowModel:function(){if(!this._flowModel){var e=new p({metrics:this,sentryMetrics:this._sentryMetrics,window:this._window});e.has("flowId")&&(this._flowModel=e)}},_logFlowEvent:function(e){if(this._flowModel){var t=e.viewName&&this.addViewNamePrefix(e.viewName),n=function(e,t){return t?"flow."+t.replace(/^oauth\./,"")+"."+e:"flow."+e}(e.event,t);e.once?this.logEventOnce(n):this.logEvent(n)}},_setInitialView:function(e){this._initialViewName=e.viewName,this.logEventOnce("loaded")},flush:function(e){var t=this;this._clearInactivityFlushTimeout();var n=this.getFilteredData();if(!this._isFlushRequired(n,this._lastFlushedData))return Promise.resolve();this._lastFlushedData=n,this._speedTrap.events.clear(),this._speedTrap.timers.clear(),this._numStoredAccounts="";var i=function(){return t._send(n,e)};return i().then(function(e){return e||i()})},_isFlushRequired:function(e,t){return!t||c.any(e,function(e,n){return"duration"!==n&&"flushTime"!==n&&(!("events"===n&&!e.length)&&(!("timers"===n&&!e.length)&&!c.isEqual(t[n],e)))})},_clearInactivityFlushTimeout:function(){clearTimeout(this._inactivityFlushTimeout)},_resetInactivityFlushTimeout:function(){var e=this;this._clearInactivityFlushTimeout(),this._inactivityFlushTimeout=setTimeout(function(){e.logEvent("inactivity.flush"),e.flush()},this._inactivityFlushMs)},getAllData:function(){var e=this._speedTrap.getLoad(),t=this._speedTrap.getUnload(),n=this.getFlowEventMetadata(),i=c.extend({},e,t,{broker:this._brokerType,context:this._context,deviceId:n.deviceId||b,emailDomain:this._emailDomain,entrypoint:this._entrypoint,experiments:r(this._activeExperiments),flowBeginTime:n.flowBeginTime,flowId:n.flowId,flushTime:Date.now(),initialView:this._initialViewName,isSampledUser:this._isSampledUser,lang:this._lang,marketing:r(this._marketingImpressions),migration:this._migration,numStoredAccounts:this._numStoredAccounts,referrer:this._referrer,screen:{clientHeight:this._clientHeight,clientWidth:this._clientWidth,devicePixelRatio:this._devicePixelRatio,height:this._screenHeight,width:this._screenWidth},service:this._service,startTime:this._startTime,uid:this._uid,uniqueUserId:this._uniqueUserId,utm_campaign:this._utmCampaign,utm_content:this._utmContent,utm_medium:this._utmMedium,utm_source:this._utmSource,utm_term:this._utmTerm});return JSON.parse(JSON.stringify(i))},getFilteredData:function(){var e=this,t=c.pick(this.getAllData(),w);return c.pick(t,function(t,n){return(!e._lastFlushedData||"navigationTiming"!==n)&&(!c.isUndefined(t)&&""!==t)})},_send:function(e,t){var n=this,i=this._collector+"/metrics",r=JSON.stringify(e);return this._env.hasSendBeacon()?Promise.resolve().then(function(){return n._window.navigator.sendBeacon(i,r)}):this._xhr.ajax({async:!t,contentType:"application/json",data:r,type:"POST",url:i}).then(function(){return!0},function(){return!1})},logEvent:function(e){this._resetInactivityFlushTimeout(),this.events.capture(e)},logEventOnce:function(e){this._eventMemory[e]||(this.logEvent(e),this._eventMemory[e]=!0)},markEventLogged:function(e){this._eventMemory[e]=!0},startTimer:function(e){this._resetInactivityFlushTimeout(),this.timers.start(e)},stopTimer:function(e){this._resetInactivityFlushTimeout(),this.timers.stop(e)},logError:function(e){this.logEvent(this.errorToId(e))},errorToId:function(e){var t=e.context;return t||(t=e.viewName?this.addViewNamePrefix(e.viewName):"unknown context"),v.interpolate("error.%s.%s.%s",[t,e.namespace||"unknown namespace",e.errno||e+""])},setViewNamePrefix:function(){this._viewNamePrefix=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},addViewNamePrefix:function(e){return this._viewNamePrefix?this._viewNamePrefix+"."+e:e},logView:function(e){this.logEvent("screen."+this.addViewNamePrefix(e))},logViewEvent:function(e,t){this.logEvent(this.addViewNamePrefix(e)+"."+t)},logExperiment:function(e,t){if(this._logFlowEvent({event:"experiment."+e+"."+t,once:!0}),e&&t){var n=this._activeExperiments;n[e]||(n[e]={}),n[e][t]={choice:e,group:t}}},logMarketingImpression:function(e,t){var n=this._marketingImpressions;n[e=e||"unknown"]||(n[e]={}),n[e][t]={campaignId:e,clicked:!1,url:t}},logMarketingClick:function(e,t){var n=this.getMarketingImpression(e=e||"unknown",t);n&&(n.clicked=!0)},getMarketingImpression:function(e,t){var n=this._marketingImpressions;return n[e]&&n[e][t]},setBrokerType:function(e){this._brokerType=e},isCollectionEnabled:function(){return this._isSampledUser},getFlowEventMetadata:function(){var e=this._flowModel&&this._flowModel.attributes||{};return{deviceId:e.deviceId,flowBeginTime:e.flowBegin,flowId:e.flowId,utmCampaign:o(this._utmCampaign),utmContent:o(this._utmContent),utmMedium:o(this._utmMedium),utmSource:o(this._utmSource),utmTerm:o(this._utmTerm)}},getFlowModel:function(){return this._flowModel},logNumStoredAccounts:function(e){this._numStoredAccounts=e},_setEmailDomain:function(e){var t=function(e){if(e){var t=e.split("@")[1];return l.POPULAR_EMAIL_DOMAINS[t]?t:l.OTHER_EMAIL_DOMAIN}}(e);t&&(this._emailDomain=t)},_setUid:function(e){e&&(this._uid=e)},_clearUid:function(){this._uid=b}}),u.mixin(s,g),i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(9);i.exports={transformUsingSchema:function(e,t,n){var i=r.validate(e,t),o=i.error;if(o instanceof ReferenceError)throw n.toMissingParameterError(o.key);if(o instanceof TypeError)throw n.toInvalidParameterError(o.key);return i.value}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i=n(0);e.exports={setTimeout:function(e,t){var n=this;this._timeouts||(this._timeouts=[]),this._isListeningForDestroy||(this._isListeningForDestroy=!0,this.on("destroy",function(){var e=this.window||window;(0,i.each)(this._timeouts,function(t){e.clearTimeout(t)}),this._timeouts=null}.bind(this)));var r=(this.window||window).setTimeout(function(){n.clearTimeout(r),e.call(n)},t);return this._timeouts.push(r),r},clearTimeout:function(e){e&&((this.window||window).clearTimeout(e),this._timeouts=(0,i.without)(this._timeouts,e))}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(248);i.exports={initialize:function(){var e=r({});this.writeToDOM(e)}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e,t){return new h({},{email:e.get("email"),namespace:t,uid:e.get("uid")})}var o=n(2),s=n(4),a=n(3),c=n(35),u=n(68),l=n(25),d=n(53),h=n(187),f=n(48),p=n(74),g=n(9),m=n(51),v=n(36),_=function(e){return e},y={automatedBrowser:g.boolean()},w=s.Model.extend({type:"base",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.relier=e.relier,this.window=e.window||window,this.environment=new c(this.window),this._behaviors=new s.Model(this.defaultBehaviors),this._capabilities=new s.Model(this.defaultCapabilities),this._fxaClient=e.fxaClient,this._metrics=e.metrics,this._notificationChannel=e.notificationChannel,this._notificationChannel&&this.setCapability("fxaStatus",this._notificationChannel.isFxaStatusSupported())},notifications:{"once!view-shown":"afterLoaded"},defaultBehaviors:{afterChangePassword:new d,afterCompletePrimaryEmail:new p(new l("primary_email_verified"),{success:_("Primary email verified successfully")}),afterCompleteResetPassword:new d,afterCompleteSecondaryEmail:new p(new l("secondary_email_verified"),{success:_("Secondary email verified successfully")}),afterCompleteSignIn:new l("signin_verified"),afterCompleteSignInWithCode:new l("settings"),afterCompleteSignUp:new l("signup_verified"),afterDeleteAccount:new d,afterForceAuth:new l("signin_confirmed"),afterResetPasswordConfirmationPoll:new d,afterSignIn:new l("signin_confirmed"),afterSignInConfirmationPoll:new l("signin_confirmed"),afterSignUp:new l("confirm"),afterSignUpConfirmationPoll:new l("signup_confirmed"),afterSignUpRequireTOTP:new l("signin"),beforeSignIn:new d,beforeSignUpConfirmationPoll:new d},setBehavior:function(e,t){this._behaviors.set(e,t)},getBehavior:function(e){if(!this._behaviors.has(e))throw Error("behavior not found for: "+e);return this._behaviors.get(e)},fetch:function(){var e=this;return Promise.resolve().then(function(){if(e._isForceAuth=e._isForceAuthUrl(),e.importSearchParamsUsingSchema(y,o),e.hasCapability("fxaStatus"))return e._fetchFxaStatus()}).then(function(){var t=e.relier&&e.relier.get("signinCode");if(t)return e._consumeSigninCode(t)})},_fetchFxaStatus:function(){var e=this,t=this._notificationChannel;return t.request(t.COMMANDS.FXA_STATUS,this.relier.pick("service")).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.set("browserSignedInAccount",t.signedInUser),e.trigger("fxa_status",t)},function(t){if(!o.is(t,"INVALID_WEB_CHANNEL"))throw t;e.setCapability("fxaStatus",!1)})},_consumeSigninCode:function(e){var t=this;this._metrics._initializeFlowModel();var n=this._metrics.getFlowEventMetadata();return this._fxaClient.consumeSigninCode(e,n.flowId,n.flowBeginTime).then(function(e){t.set("signinCodeAccount",e)},function(e){t._metrics.logError(e)})},afterLoaded:function(){return Promise.resolve()},beforeSignIn:function(){return Promise.resolve(this.getBehavior("beforeSignIn"))},afterSignIn:function(){return Promise.resolve(this.getBehavior("afterSignIn"))},afterSignInConfirmationPoll:function(){return Promise.resolve(this.getBehavior("afterSignInConfirmationPoll"))},afterCompleteSignIn:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompleteSignIn")})},afterCompleteSignInWithCode:function(){return Promise.resolve(this.getBehavior("afterCompleteSignInWithCode"))},afterCompletePrimaryEmail:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompletePrimaryEmail")})},afterCompleteSecondaryEmail:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompleteSecondaryEmail")})},afterForceAuth:function(){return Promise.resolve(this.getBehavior("afterForceAuth"))},persistVerificationData:function(e){var t=this;return Promise.resolve().then(function(){var n=r(e,"context");return n.set({context:t.relier.get("context")}),n.persist()})},unpersistVerificationData:function(e){return Promise.resolve().then(function(){!function(e,t){r(e,t).clear()}(e,"context")})},afterSignUp:function(e){return e.get("verified")?this.afterSignUpConfirmationPoll(e):Promise.resolve(this.getBehavior("afterSignUp"))},beforeSignUpConfirmationPoll:function(){return Promise.resolve(this.getBehavior("beforeSignUpConfirmationPoll"))},afterSignUpConfirmationPoll:function(){return Promise.resolve(this.getBehavior("afterSignUpConfirmationPoll"))},afterCompleteSignUp:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompleteSignUp")})},afterResetPasswordConfirmationPoll:function(e){var t=this;return Promise.resolve().then(function(){return e.get("verificationMethod")===m.TOTP_2FA&&e.get("verificationReason")===v.SIGN_IN?new l("signin_totp_code",{account:e}):t.getBehavior("afterResetPasswordConfirmationPoll")})},afterCompleteResetPassword:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return e.get("verificationMethod")===m.TOTP_2FA&&e.get("verificationReason")===v.SIGN_IN?new l("signin_totp_code",{account:e}):t.getBehavior("afterCompleteResetPassword")})},afterChangePassword:function(){return Promise.resolve(this.getBehavior("afterChangePassword"))},afterDeleteAccount:function(){return Promise.resolve(this.getBehavior("afterDeleteAccount"))},transformLink:function(e){return e},isForceAuth:function(){return!!this._isForceAuth},_isForceAuthUrl:function(){var e=this.window.location.pathname;return"/force_auth"===e||"/oauth/force_auth"===e},isAutomatedBrowser:function(){return!!this.get("automatedBrowser")},defaultCapabilities:{allowUidChange:!1,browserTransitionsAfterEmailVerification:!0,chooseWhatToSyncCheckbox:!0,convertExternalLinksToText:!1,emailFirst:!1,emailVerificationMarketingSnippet:!0,fxaStatus:!1,handleSignedInNotification:!0,reuseExistingSession:!1,signup:!0,tokenCode:!1},hasCapability:function(e){return this._capabilities.has(e)&&!!this._capabilities.get(e)},setCapability:function(e,t){this._capabilities.set(e,t)},unsetCapability:function(e){this._capabilities.unset(e)},getCapability:function(e){return this._capabilities.get(e)}});a.mixin(w,u,f),i.exports=w}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(25);i.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n,i){return i.isSignedIn().then(function(i){if(i){var o="Account verified successfully",s="settings";t.success&&(o=t.success);var a=n.relier.get("redirectTo");return a&&(a.indexOf("/settings/emails")>0?s="/settings/emails":a.indexOf("/settings/two_step_authentication")>0&&(s="/settings/two_step_authentication")),new r(s,{success:o})}return e})};return n.type="settings",n}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.e(22).then(n.t.bind(null,380,7))}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(39),s=function(e){return e},a=s("Unexpected error"),c={NETWORK_FAILURE:{errno:1,message:s("System unavailable, try again soon")},INVALID_EMAIL:{errno:2,message:a},UNKNOWN_EMAIL:{errno:3,message:a},UNKNOWN_TOKEN:{errno:4,message:a},USAGE_ERROR:{errno:5,message:s("Please try again later")},EMAIL_PROVIDER_AUTH_FAILURE:{errno:6,message:a},AUTH_ERROR:{errno:7,message:a},SSL_REQUIRED:{errno:8,message:a},INVALID_NEWSLETTER:{errno:9,message:a},INVALID_LANGUAGE:{errno:10,message:a},EMAIL_NOT_CHANGED:{errno:11,message:a},CHANGE_REQUEST_NOT_FOUND:{errno:12,message:a},ACCOUNT_PREFS_NOT_FOUND:{errno:13,message:s("Service unavailable, try again soon")},UNKNOWN_ERROR:{errno:99,message:a},SERVICE_UNAVAILABLE:{errno:998,message:s("System unavailable, try again soon")},UNEXPECTED_ERROR:{errno:999,message:a}};i.exports=r.extend({},o,{ERRORS:c,NAMESPACE:"basket-errors",normalizeXHRError:function(e){var t=e.responseJSON;return!t||"errno"in t||!t.code||(t.errno=t.code,t.code=e.status),o.normalizeXHRError.call(this,e)}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(39),s=function(e){return e},a=s("You've tried too many times. Try again later."),c={UNAUTHORIZED:{errno:100,message:s("Unauthorized")},INVALID_PARAMETER:{errno:101,message:s("Invalid parameter in request body: %(param)s")},UNSUPPORTED_PROVIDER:{errno:102,message:s("Unsupported image provider")},IMAGE_PROCESSING_ERROR:{errno:103,message:s("Image processing error")},OAUTH_ERROR:{errno:104,message:s("System unavailable, try again soon")},AUTH_ERROR:{errno:105,message:s("System unavailable, try again soon")},INVALID_TOKEN:{errno:110,message:s("Invalid Token")},THROTTLED:{errno:114,message:a},REQUEST_BLOCKED:{errno:125,message:s("The request was blocked for security reasons")},IMAGE_LOAD_ERROR:{errno:997,message:s("Unexpected error")},SERVICE_UNAVAILABLE:{errno:998,message:s("System unavailable, try again soon")},UNEXPECTED_ERROR:{errno:999,message:s("Unexpected error")}};i.exports=r.extend({},o,{ERRORS:c,NAMESPACE:"profile"})}(0,0,e))||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports=function(e){return function(){var t=this,n=arguments;return this._isSubmitting?Promise.resolve().then(function(){throw Error("submit already in progress")}):(this._isSubmitting=!0,Promise.resolve().then(function(){return t.invokeHandler(e,n)}).then(function(e){return t._isSubmitting=!1,e},function(e){throw t._isSubmitting=!1,e}))}}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(4),s=n(3),a=n(71),c=o.View.extend({tagName:"div",className:"spinner",_count:0,start:function(e){var t=this;if(this._count++,1>=this._count)return this._removeIndicatorTimeout?(this.clearTimeout(this._removeIndicatorTimeout),void(this._removeIndicatorTimeout=null)):void(this._showIndicatorTimeout=setTimeout(function(){t._showIndicatorTimeout=null,t.showIndicator(e)},100))},destroy:function(){this.done(),this.trigger("destroy"),this.remove()},done:function(){var e=this;if(this._count&&(this._count--,!this._count))return this._showIndicatorTimeout?(this.clearTimeout(this._showIndicatorTimeout),this._showIndicatorTimeout=null,void this.removeIndicator()):void(this._removeIndicatorTimeout=this.setTimeout(function(){e._removeIndicatorTimeout=null,e.removeIndicator()},100))},showIndicator:function(e){(e=r(e)).length&&(this._progressEl=e,this._progressHTML=e.html(),e.prop("disabled",!0).html(this.$el))},removeIndicator:function(e){(e=this._progressEl)&&e.length&&e.prop("disabled",!1).html(this._progressHTML)},isVisible:function(){return!!this._count}});s.mixin(c,a),i.exports=c}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(8)),o=i(n(0)),s=i(n(6)),a=i(n(3)),c=i(n(40)),u=i(n(81)),l=i(n(200)),d=s.default.prototype,h=s.default.extend({tagName:"aside",className:"tooltip",type:"generic",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.message=e.message||"",this.unsafeMessage=e.unsafeMessage||"",this.dismissible=e.dismissible||!1,this.extraClassNames=e.extraClassNames||"",this.invalidEl=(0,r.default)(e.invalidEl)},template:function(){return this.message?this.translate(this.message):this.unsafeMessage?this.unsafeTranslate(this.unsafeMessage):""},afterRender:function(){var e=this.invalidEl.closest(".input-row,.select-row-wrapper");return this.$el.addClass(this.extraClassNames),this.$el.appendTo(e),this.setPosition(),this.dismissible&&this.$el.append('<span class="dismiss" tabindex="2">&#10005;</span>'),this.bindDOMEvents(),d.afterRender.call(this)},removeAndDestroy:function(){this.destroy(!0)},beforeDestroy:function(){var e=this.invalidEl;e.off("keyup change",this._destroy),e.find("option").off("click",this._destroy)},canShowTooltipBelow:function(){var e=new l.default(this.window);return e.clientHeight>=480&&e.clientWidth>=520},setPosition:function(){var e=this.$el,t=this.invalidEl;t.hasClass("tooltip-below")&&this.canShowTooltipBelow()?(e.addClass("tooltip-below fade-up-tt"),e.css({top:t.outerHeight()+4})):(e.css({top:-e.outerHeight()-2}),e.addClass("fade-down-tt"))},bindDOMEvents:function(){var e=this.invalidEl;this._destroy=o.default.bind(this.destroy,this,!0),e.one("change",this._destroy);var t=(0,r.default)(e).val().trim(),n=function(){(0,r.default)(e).val().trim()!==t?this._destroy():e.one("keyup",n)}.bind(this);e.one("keyup",n),e.find("option").one("click",this._destroy),this.$el.find(".dismiss").one("click keypress",function(e){"click"!==e.type&&e.which!==c.default.ENTER||(this.logEvent("tooltip."+this.type+"-dismissed"),this._destroy())}.bind(this))}});a.default.mixin(h,(0,u.default)({hideMethod:"removeAndDestroy",showMethod:"afterRender",viewType:"tooltip"})),e.exports=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,i,r,o=e.hideMethod,s=e.viewType;return r=function(){var e=n[s];e&&e.view!==this&&e.view[e.hideMethod](),n[s]={hideMethod:o,view:this}},(i=e.showMethod)in(t={beforeDestroy:function(){var e=n[s];e&&e.view===this&&(n[s]=null,delete n[s])}})?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t};var n={}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(4),s=n(9),a=o.Model.prototype,c=o.Model.extend({initialize:function(e){a.initialize.call(this,e),r.each(this.defaults,function(e,t){if(this.has(t)){var n=this.get(t).replace(/ /g,"");n?this.set(t,n):this.unset(t)}},this)},defaults:{},validation:{},isValid:function(){var e;if(this.isDamaged())return!1;try{e=a.isValid.call(this)}catch(t){e=!1}return e},validate:function(e){var t=s.validate(e,this.validation,{allowUnknown:!0});if(t.error)throw t.error},markExpired:function(){this._isExpired=!0},isExpired:function(){return!!this._isExpired},markUsed:function(){this._isUsed=!0},isUsed:function(){return!!this._isUsed},markDamaged:function(){this._isDamaged=!0},isDamaged:function(){return!!this._isDamaged}});i.exports=c}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r,o=i(n(3)),s=i(n(6)),a=i(n(14)),c=i(n(294)),u=i(n(37)),l=i(n(43)),d=i(n(56)),h=s.default.extend({template:c.default,className:"account-recovery",viewName:"settings.account-recovery",events:{"click .account-recovery-support-link":"_clickedSupportLink","click .confirm-password":"_confirmPassword","click .confirm-revoke":"_confirmRevoke","click .refresh-status":"refresh"},_clickedSupportLink:function(){this.logFlowEvent("clicked-support-link",this.viewName)},_confirmPassword:function(){this.navigate("settings/account_recovery/confirm_password")},_confirmRevoke:function(){this.navigate("settings/account_recovery/confirm_revoke")},initialize:function(){this.listenTo(this.model,"change:hasRecoveryKey",this.render)},beforeRender:function(){var e=this,t=this.getSignedInAccount();return this.setupSessionGateIfRequired().then(function(){return t.checkRecoveryKeyExists().then(function(t){e.model.set("hasRecoveryKey",t.exists)})})},setInitialContext:function(e){var t=this.model.get("hasRecoveryKey");e.set({escapedLearnMoreLinkAttributes:'class="account-recovery-support-link" target="_blank" href="'+encodeURI("https://support.mozilla.org/kb/reset-your-firefox-account-password-recovery-keys")+'"',hasRecoveryKey:!!t,isPanelOpen:this.isPanelOpen()})},refresh:(0,u.default)(function(){return this.setLastCheckedTime(),this.logFlowEvent("refresh",this.viewName),this.render()},"button.settings-button.refresh-status",350)});o.default.mixin(h,(0,d.default)({gatedHref:"settings/account_recovery",title:(r="Account Recovery",r)}),a.default,l.default),e.exports=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(2)),s=i(n(3)),a=i(n(7)),c=i(n(10)),u=i(n(17)),l=i(n(21)),d=i(n(297)),h=a.default.extend({template:d.default,className:"account-recovery-confirm-password",viewName:"settings.account-recovery.confirm-password",events:r.default.extend({},a.default.prototype.events,{"click .cancel-link":a.default.preventDefaultThen("_cancelPasswordConfirm")}),_cancelPasswordConfirm:function(){this.logFlowEvent("cancel",this.viewName),this.navigate("settings/account_recovery",{hasRecoveryKey:!1})},setInitialContext:function(e){var t=this.getSignedInAccount().get("email");e.set({email:t})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue("#password");return t.createRecoveryBundle(n).then(function(t){e.logFlowEvent("success",e.viewName),e.model.set("recoveryKey",t.recoveryKey),e.showRecoveryKeyView=!0,e.navigate("settings/account_recovery/recovery_key",t)}).catch(function(t){if(o.default.is(t,"INCORRECT_PASSWORD"))return e.logFlowEvent("invalidPassword",e.viewName),e.showValidationError(e.$("#password"),t);throw t})}});s.default.mixin(h,c.default,l.default,u.default),e.exports=h},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(35);i.exports={isModal:!0,notifications:{navigate:"closePanel","navigate-back":"closePanel"},openPanel:function(){var e=this;this.$el.modal({clickClose:!1,escapeClose:!1,opacity:.75,showClose:!1,zIndex:999}),this.$el.on(r.modal.AFTER_CLOSE,function(){return e.onAfterClose()}),this._needsToSetBodyMinHeight()&&this._setBodyMinHeight(),this._boundBlockerClick=this.onBlockerClick.bind(this),r(".blocker").on("click",this._boundBlockerClick)},closePanel:function(){r.modal.isActive()&&r.modal.close()},onBlockerClick:function(e){e.target===e.currentTarget&&(this.closePanel(),this.trigger("modal-cancel"))},onAfterClose:function(){this.destroy(!0),this.trigger("modal-cancel"),r(".blocker").off("click",this._boundBlockerClick)},destroy:function(){this.closePanel(),this._needsToSetBodyMinHeight()&&this.model.has("origMinHeight")&&(r("body").css("min-height",this.model.get("origMinHeight")),this.model.unset("origMinHeight"))},_needsToSetBodyMinHeight:function(){return new o(this.window).isFramed()},_setBodyMinHeight:function(){var e=r("body").css("min-height"),t=parseInt(e||0,10),n=r(".modal").outerHeight();n>t&&(this.model.set("origMinHeight",e),r("body").css("min-height",n+"px"))}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(3)),s=i(n(10)),a=i(n(7)),c=i(n(17)),u=i(n(21)),l=i(n(298)),d=a.default.extend({template:l.default,className:"account-recovery-confirm-revoke",viewName:"settings.account-recovery.confirm-revoke",events:r.default.extend({},a.default.prototype.events,{"click .cancel-button":a.default.preventDefaultThen("_returnToAccountRecovery")}),beforeRender:function(){var e=this;return this.getSignedInAccount().checkRecoveryKeyExists().then(function(t){t.exists||e.navigate("/settings/account_recovery")})},submit:function(){var e=this;return this.getSignedInAccount().deleteRecoveryKey().then(function(){e.logFlowEvent("success",e.viewName),e.navigate("settings/account_recovery",{hasRecoveryKey:!1})})}});o.default.mixin(d,s.default,u.default,c.default),e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(3)),o=i(n(6)),s=i(n(21)),a=i(n(299)),c=i(n(88)),u=i(n(300)),l=i(n(12)),d=o.default.extend({template:u.default,className:"account-recovery-key",viewName:"settings.account-recovery.recovery-key",events:{"click .copy-option":"_copyKey","click .done-link":"_done","click .download-option":"_downloadKey","click .print-option":"_printKey"},_formatRecoveryKey:function(e){if(e)return e.replace(/(\w{4})/g,"$1 ").replace(/(^\s+|\s+$)/,"")},_getFormatedRecoveryKeyFilename:function(){var e=this.getSignedInAccount().get("email")+" "+"Firefox Recovery Key";return e.length>200&&(e=e.substring(0,196)),e+".txt"},_copyKey:function(){return this.logFlowEvent("copy-option",this.viewName),this.copy(this.recoveryKey,"#account-recovery-key")},_downloadKey:function(){this.logFlowEvent("download-option",this.viewName),this.download(this.recoveryKey,this._getFormatedRecoveryKeyFilename(),"#account-recovery-key")},_printKey:function(){this.logFlowEvent("print-option",this.viewName),this.print((0,a.default)({recoveryKey:this.recoveryKey}))},_done:function(){this.navigate("settings/account_recovery",{hasRecoveryKey:!0})},setInitialContext:function(e){this.recoveryKey=this._formatRecoveryKey(e.get("recoveryKey")),e.set({isIos:this.getUserAgent().isIos(),recoveryKey:this.recoveryKey})},beforeRender:function(){var e=this;return this.getSignedInAccount().checkRecoveryKeyExists().then(function(t){t.exists?e.recoveryKey=e.model.get("recoveryKey"):e.navigate("/settings/account_recovery")})}});r.default.mixin(d,s.default,c.default,l.default),e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(8)),o=i(n(12)),s=function(e){return e};e.exports={dependsOn:[o.default],setInitialContext:function(){this.$(".modal-success").addClass("hidden")},copy:function(e,t){if((0,r.default)('<textArea id="temporary-copy-area" class="temporary-copy-text-area"></textArea>').appendTo(t),this.$("textArea.temporary-copy-text-area").text(e),this.getUserAgent().isIos()){var n=this.window.document.getElementById("temporary-copy-area");n.contentEditable=!0,n.readOnly=!0;var i=document.createRange();i.selectNodeContents(n);var o=this.window.getSelection();o.removeAllRanges(),o.addRange(i),n.setSelectionRange(0,999999)}else this.$("textArea.temporary-copy-text-area").select().focus();try{this.window.document.execCommand("copy"),this._displaySuccess(s("Copied"))}catch(e){this._displayError(s("Failed to copy. Please manually copy."))}this.$("textArea.temporary-copy-text-area").remove()},download:function(e,t,n){var i=new Blob([e],{type:"text/plain"}),o=URL.createObjectURL(i);(0,r.default)('\n      <a id="download-link" href="'+o+'" download="'+t+'"></a>\n    ').appendTo(n),this.window.document.getElementById("download-link").click(),this.$("download-link").remove(),this._displaySuccess(s("Downloaded"))},print:function(e){var t=this.window.open("","Print","height=600,width=800");t.document.write(e),t.document.close(),t.focus(),t.print(),t.close(),this._displaySuccess(s("Printed"))},_displaySuccess:function(e){this.$(".error").addClass("hidden"),this.$(".modal-success").removeClass("hidden"),this.$(".modal-success").addClass("success"),this.$(".modal-success").text(this.translate(e))},_displayError:function(e){this.$(".error").removeClass("hidden"),this.$(".modal-success").addClass("hidden"),this.$(".modal-success").removeClass("success"),this.$(".error").text(this.translate(e))}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(2),s=n(15),a=(n(203),n(3)),c=n(5),u=n(91),l=n(30),d=n(35),h=n(7),f=n(21),p=n(90),g=n(79),m=n(301),v=n(204),_=c.PROFILE_IMAGE_EXPORT_SIZE,y=c.PROFILE_IMAGE_DISPLAY_SIZE,w=c.PROFILE_IMAGE_JPEG_QUALITY,E=c.DEFAULT_PROFILE_IMAGE_MIME_TYPE,b=h.prototype,S=h.extend({template:m,className:"avatar-camera",viewName:"settings.avatar.camera",setInitialContext:function(e){e.set({streaming:this.streaming})},initialize:function(e){var t=this;if(this.exportLength=e.exportLength||_,this.displayLength=e.displayLength||y,this.streaming=!1,this.broker.isAutomatedBrowser()){var n=new l("3s").milliseconds();this.streaming=!0,this.startStream=function(){return t.enableForm()},this.stream={stop:function(){}},this.window.setTimeout(r.bind(this.onLoadedMetaData,this),n)}},startStream:function(){var e=this;return this.window.navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(t){e.stream=t,v.attachMediaStream(e.video,t),e.video.play()},function(){e._avatarProgressIndicator.done(),e.displayError(o.toError("NO_CAMERA"))})},stopAndDestroyStream:function(){if(this.stream){var e=this.stream,t=this.video;e.getTracks?e.getTracks().forEach(function(e){e.stop()}):e.stop?e.stop():t.pause&&"mozSrcObject"in t&&(t.pause(),t.mozSrcObject=null),delete this.stream}},beforeRender:function(){new d(this.window).hasGetUserMedia()||this.navigate("settings/avatar/change",{error:o.toError("NO_CAMERA")})},afterRender:function(){return this.startStream(),this._avatarProgressIndicator=new g,this.wrapper=this.$("#avatar-camera-wrapper"),this.video=this.$("#video")[0],this._avatarProgressIndicator.start(this.$(".progress-container")),this.canvas=this.$("#canvas")[0],this.video.addEventListener("loadedmetadata",r.bind(this.onLoadedMetaData,this),!1),b.afterRender.call(this)},onLoadedMetaData:function(){if(this.streaming)this._avatarProgressIndicator.done();else{var e=this.video.videoWidth,t=this.video.videoHeight;0!==t&&0!==e||this.logError(o.toError("INVALID_CAMERA_DIMENSIONS")),t>e?(this.width=this.displayLength,this.height=t/(e/this.width)):(this.height=this.displayLength,this.width=e/(t/this.height));var n=this.centeredPos(this.width,this.height,this.displayLength);this.wrapper.css({marginLeft:n.left,marginTop:n.top}),this.canvas.width=this.width,this.canvas.height=this.height,this._avatarProgressIndicator.done(),this.$(".progress-container").addClass("hidden"),this.$("#video").height(this.height).removeClass("hidden"),this.streaming=!0,this.enableForm()}},isValidEnd:function(){return this.streaming},submit:function(){var e=this,t=void 0,n=this.getSignedInAccount();return this.logAccountImageChange(n),this.takePicture().then(function(e){return t=Date.now(),n.uploadAvatar(e)}).then(function(i){return e.logFlowEvent("timing.avatar.upload."+(Date.now()-t)),e.stopAndDestroyStream(),e.updateProfileImage(new p(i),n),e.navigate("settings"),i})},beforeDestroy:function(){this.stopAndDestroyStream()},takePicture:function(){var e=this;return new Promise(function(t){var n=e.video.videoWidth,i=e.video.videoHeight,r=Math.min(i,n);e.canvas.width=e.exportLength,e.canvas.height=e.exportLength;var o=e.centeredPos(n,i,r),s=e.video;e.broker.isAutomatedBrowser()&&((s=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAAAAAA6fptVAAAACklEQVQYV2P4DwABAQEAWk1v8QAAAABJRU5ErkJggg=="),e.canvas.getContext("2d").drawImage(s,Math.abs(o.left),Math.abs(o.top),r,r,0,0,e.exportLength,e.exportLength),e.canvas.toBlob(t,E,w)})},centeredPos:function(e,t,n){return e>t?{left:(n-e)/2,top:0}:{left:0,top:(n-t)/2}}});a.mixin(S,s,u,f),i.exports=S}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(202),s=n(77),a=r.Model.extend({defaults:{default:void 0,id:void 0,img:void 0,url:void 0},fetch:function(){var e=this;return this.has("url")?o.load(this.get("url")).then(function(t){return e.set("img",t)},function(){var t=s.toError("IMAGE_LOAD_ERROR");return t.context=e.get("url"),Promise.reject(t)}):Promise.resolve()},isDefault:function(){return!(this.has("url")&&this.has("id")&&this.has("img"))}});i.exports=a}(0,0,e))||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports={afterRender:function(){this.onFormChange()},onFormChange:function(){this.isValid()?this.enableForm():this.disableForm()},disableForm:function(){this.$("button[type=submit]").addClass("disabled")},enableForm:function(){this.$("button[type=submit]").removeClass("disabled")}}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(2),s=n(15),a=n(3),c=n(205),u=n(7),l=n(202),d=n(21),h=n(302),f=u.prototype,p=u.extend({template:h,className:"avatar-change",viewName:"settings.avatar.change",events:{"change #imageLoader":"fileSet","click #file":"filePicker","click .remove":"removeAvatar"},initialize:function(){this.FileReader=FileReader},getAccount:function(){return this._account||(this._account=this.getSignedInAccount()),this._account},beforeRender:function(){"avatar"===this.relier.get("setting")&&this.relier.unset("setting")},setInitialContext:function(e){var t=this.getSignedInAccount();e.set({avatarDefault:t.get("profileImageUrlDefault"),hasProfileImage:t.has("profileImageUrl")})},afterVisible:function(){var e=this;return f.afterVisible.call(this).then(function(){return e.displayAccountProfileImage(e.getAccount())})},afterRender:function(){var e=r("<div/>").css({height:1,opacity:0,overflow:"hidden",width:1});return this.$(":file").wrap(e),f.afterRender.call(this)},removeAvatar:function(){var e=this,t=this.getAccount();return this.deleteDisplayedAccountProfileImage(t).then(function(){e.navigate("settings")},function(t){throw e.displayError(t),t})},filePicker:function(){this.$("#imageLoader").click()},fileSet:function(e){var t=this,i=Date.now();return new Promise(function(r,s){var a=e.target.files[0],u=t.getAccount();t.logAccountImageChange(u);var d=function(e){var n=o.toMessage(e&&e.errno?e:"UNUSABLE_IMAGE");t.displayError(n),s(n)};if(a.type.match("image.*")){var h=new t.FileReader;h.onload=function(e){var o=e.target.result;l.load(o).then(function(e){t.logFlowEvent("timing.avatar.load."+(Date.now()-i));var s=new c({height:e.height,src:o,type:a.type,width:e.width});return Promise.all([n.e(14).then(n.t.bind(null,378,7)),Promise.all([n.e(14),n.e(19)]).then(n.t.bind(null,381,7))]).then(function(){t.navigate("settings/avatar/crop",{cropImg:s}),r()})}).catch(d)},h.readAsDataURL(a)}else d()})}});a.mixin(p,s,d),i.exports=p}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(15),s=n(3),a=n(5),c=n(303),u=n(205),l=n(7),d=n(21),h=n(90),f=n(304),p=l.prototype,g=l.extend({template:f,className:"avatar-crop",viewName:"settings.avatar.crop",initialize:function(){this._cropImg=this.model.get("cropImg"),!this._cropImg&&this.broker.isAutomatedBrowser()&&(this._cropImg=new u)},beforeRender:function(){this._cropImg||this.navigate("settings/avatar/change",{error:r.toMessage("UNUSABLE_IMAGE")})},afterRender:function(){return this.canvas=this.$("canvas")[0],p.afterRender.call(this)},afterVisible:function(){var e=this._cropImg.get("width"),t=this._cropImg.get("height"),n=this._cropImg.get("src");try{this.cropper=new c({container:this.$(".cropper"),displayLength:a.PROFILE_IMAGE_DISPLAY_SIZE,exportLength:a.PROFILE_IMAGE_EXPORT_SIZE,height:t,horizontalGutter:90,onRotate:this._onRotate.bind(this),onTranslate:this._onTranslate.bind(this),onZoomIn:this._onZoomIn.bind(this),onZoomOut:this._onZoomOut.bind(this),onZoomRangeChange:this._onZoomRangeChange.bind(this),src:n,verticalGutter:0,width:e})}catch(e){if(this.broker.isAutomatedBrowser()&&-1!==e.message.indexOf("draggable"))return;this.navigate("settings/avatar/change",{error:r.toMessage("UNUSABLE_IMAGE")})}return p.afterVisible.call(this)},toBlob:function(){var e=this;return new Promise(function(t){e.cropper.toBlob(t,e._cropImg.get("type"),a.PROFILE_IMAGE_JPEG_QUALITY)})},submit:function(){var e=this,t=void 0,n=this.getSignedInAccount();return this.logAccountImageChange(n),this.toBlob().then(function(e){return t=Date.now(),n.uploadAvatar(e)}).then(function(i){return e.logFlowEvent("timing.avatar.upload."+(Date.now()-t)),e.updateProfileImage(new h(i),n),e.navigate("settings"),i})},_onRotate:function(){this.logViewEvent("rotate.cw")},_onTranslate:function(){this.logViewEvent("translate")},_onZoomIn:function(){this.logViewEvent("zoom.in")},_onZoomOut:function(){this.logViewEvent("zoom.out")},_onZoomRangeChange:function(){this.logViewEvent("zoom.range")}});s.mixin(g,o,d),i.exports=g}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2)),o=i(n(16)),s=i(n(3)),a=i(n(7)),c=i(n(19)),u=i(n(17)),l=i(n(57)),d=i(n(11)),h=i(n(14)),f=i(n(308)),p=a.default.extend({template:f.default,className:"change-password",viewName:"settings.change-password",getAccount:function(){return this.getSignedInAccount()},setInitialContext:function(e){var t=this.getAccount();e.set("email",t.get("email"))},isValidEnd:function(){return this._getNewPassword()===this._getNewVPassword()},showValidationErrorsEnd:function(){if(this._getNewPassword()!==this._getNewVPassword()){var e=r.default.toError("PASSWORDS_DO_NOT_MATCH");this.showValidationError(this.$("#new_vpassword"),e)}},submit:function(){var e=this,t=this.getAccount(),n=this._getOldPassword(),i=this._getNewPassword();return this.hideError(),this.user.changeAccountPassword(t,n,i,this.relier).then(function(){return e.logViewEvent("success"),e.invokeBrokerMethod("afterChangePassword",t)}).then(function(){return e.displaySuccess("Password changed successfully"),e.navigate("settings"),e.render()}).catch(function(t){if(r.default.is(t,"INCORRECT_PASSWORD"))return e.showValidationError(e.$("#old_password"),t);if(r.default.is(t,"PASSWORDS_MUST_BE_DIFFERENT"))return e.showValidationError(e.$("#new_password"),t);throw t})},_getOldPassword:function(){return this.$("#old_password").val()},_getNewPassword:function(){return this.$("#new_password").val()},_getNewVPassword:function(){return this.$("#new_vpassword").val()}});s.default.mixin(p,c.default,u.default,(0,l.default)({balloonEl:".helper-balloon",passwordEl:"#new_password"}),h.default,d.default,o.default),e.exports=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2)),o=i(n(309)),s=n(5),a=i(n(20));e.exports={dependsOn:[a.default],VERIFICATION_POLL_IN_MS:s.VERIFICATION_POLL_IN_MS,initialize:function(){this._sessionVerificationPoll=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sessionVerificationPoll},beforeDestroy:function(){this._sessionVerificationPoll&&(this._sessionVerificationPoll.destroy(),this._sessionVerificationPoll=null)},waitForSessionVerification:function(e,t){var n=this,i=this.getSessionVerificationPoll(e);this.listenTo(i,"verified",t),this.listenTo(i,"error",function(t){return n._handleSessionVerificationPollErrors(e,t)}),i.start()},getSessionVerificationPoll:function(e){return this._sessionVerificationPoll||(this._sessionVerificationPoll=new o.default({},{account:e,pollIntervalInMS:this.VERIFICATION_POLL_IN_MS,window:this.window})),this._sessionVerificationPoll},_handleSessionVerificationPollErrors:function(e,t){var n=this;r.default.is(t,"SIGNUP_EMAIL_BOUNCE")?this.isSignUp()?this.navigate("signup",{bouncedEmail:e.get("email")}):this.navigate("signin_bounced",e.pick("email")):r.default.is(t,"UNEXPECTED_ERROR")||r.default.is(t,"BACKEND_SERVICE_FAILURE")?(this.logError(r.default.toError("POLLING_FAILED")),this.setTimeout(function(){return n.getSessionVerificationPoll(e).start()},this.VERIFICATION_POLL_IN_MS)):this.displayError(t)}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(3),o=n(7),s=n(21),a=n(58),c=n(312),u=function(e){return e},l={lost:u("We're sorry to hear about this. You should change your Firefox Account password, and look for information from your device manufacturer about erasing your data remotely."),suspicious:u("We're sorry to hear about this. If this was a device you really don't trust, you should change your Firefox Account password, and change any passwords saved in Firefox.")},d=o.extend({template:c,className:"clients-disconnect",viewName:"settings.clients.disconnect",events:{click:"_returnToClientListAfterDisconnect","click .cancel-disconnect":o.preventDefaultThen("_returnToClientList"),"click button[type=submit]":"_returnToConnectAnotherDevice"},initialize:function(){var e=this;this.hasDisconnected=!1,this.on("modal-cancel",function(){return e._returnToClientList()})},beforeRender:function(){var e=this.model.get("clients"),t=this.model.get("clientId");if(!e||!t)return this._returnToClientList();this.client=e.get(t)},setInitialContext:function(e){e.set({hasDisconnected:this.hasDisconnected,reasonHelp:this.reasonHelp}),this.hasDisconnected||e.set("deviceName",this.client.get("name"))},isValidStart:function(){return!!this.hasDisconnected||this.$("input[name=disconnect-reasons]:checked").length>0},submit:function(){var e=this,t=Date.now(),n=this.client,i=this.$("input[name=disconnect-reasons]:checked").val();return this.logViewEvent("submit."+i),this.user.destroyAccountClient(this.user.getSignedInAccount(),n).then(function(){e.logFlowEvent("timing.clients.disconnect."+(Date.now()-t)),e.hasDisconnected=!0,e.reasonHelp=l[i],n.get("isCurrentDevice")?e.navigateToSignIn():e.reasonHelp?e.render():e._returnToClientListAfterDisconnect()})},_returnToClientListAfterDisconnect:function(){this.hasDisconnected&&this._returnToClientList()},_returnToClientList:function(){this.navigate("settings/clients")}});r.mixin(d,s,a),i.exports=d}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(8),s=n(313),a=n(3),c=n(5),u=n(7),l=n(6).preventDefaultThen,d=n(14),h=n(58),f=n(23),p=n(317),g=n(12),m=function(e){return e},v=f.interpolate(c.DOWNLOAD_LINK_TEMPLATE_ANDROID,{campaign:"fxa-devices-page",creative:"button"}),_=f.interpolate(c.DOWNLOAD_LINK_TEMPLATE_IOS,{campaign:"fxa-devices-page",creative:"button"}),y={device:{withoutLocation:{precise:m("Last sync %(translatedTimeAgo)s"),approximate:m("Last sync over %(translatedTimeAgo)s")},withCountry:{precise:m("Last sync %(translatedTimeAgo)s in %(translatedCountry)s"),approximate:m("Last sync over %(translatedTimeAgo)s in %(translatedCountry)s")},withCityStateCountry:{precise:m("Last sync %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s"),approximate:m("Last sync over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s")}},oauth:{withoutLocation:{precise:m("Last active %(translatedTimeAgo)s"),approximate:m("Last active over %(translatedTimeAgo)s")},withCountry:{precise:m("Last active %(translatedTimeAgo)s in %(translatedCountry)s"),approximate:m("Last active over %(translatedTimeAgo)s in %(translatedCountry)s")},withCityStateCountry:{precise:m("Last active %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s"),approximate:m("Last active over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s")}},web:{withoutLocation:{precise:m("%(translatedTimeAgo)s"),approximate:m("Over %(translatedTimeAgo)s")},withCountry:{precise:m("%(translatedTimeAgo)s in %(translatedCountry)s"),approximate:m("Over %(translatedTimeAgo)s in %(translatedCountry)s")},withCityStateCountry:{precise:m("%(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s"),approximate:m("Over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s")}}},w=u.prototype,E=u.extend({template:p,className:"clients",viewName:"settings.clients",initialize:function(e){this._attachedClients=e.attachedClients,this._attachedClients||(this._attachedClients=new s([],{notifier:e.notifier})),this.listenTo(this._attachedClients,"remove",this._onItemRemoved)},_formatAccessTimeAndScope:function(e){var t=this;return r.map(e,function(e){return e.title=e.name,e.scope&&(e.title+=" - "+e.scope),e.lastAccessTimeFormatted?(e.isWebSession&&(e.title=e.userAgent?t.translate(m("Web Session, %(userAgent)s"),{userAgent:e.userAgent}):m("Web Session"),t._setLastAccessTimeFormatted(e,y.web)),e.isDevice&&t._setLastAccessTimeFormatted(e,y.device),e.clientType===c.CLIENT_TYPE_OAUTH_APP&&t._setLastAccessTimeFormatted(e,y.oauth)):e.lastAccessTimeFormatted=e.isDevice?m("Last sync time unknown"):"",e})},_setLastAccessTimeFormatted:function(e,t){var n=void 0,i=void 0,r=void 0,o=e.lastAccessTimeFormatted;e.location&&e.location.country?(i=e.location.country,e.location.city&&e.location.stateCode?(n=e.location.city,r=e.location.stateCode,t=t.withCityStateCountry):t=t.withCountry):t=t.withoutLocation,e.approximateLastAccessTime>e.lastAccessTime?(o=e.approximateLastAccessTimeFormatted,t=t.approximate):t=t.precise,e.lastAccessTimeFormatted=this.translate(t,{translatedCity:n,translatedCountry:i,translatedState:r,translatedTimeAgo:o})},setInitialContext:function(e){var t=this._attachedClients.toJSON();e.set({clients:this._formatAccessTimeAndScope(t),devicesSupportUrl:"https://support.mozilla.org/kb/fxa-managing-devices?utm_source=accounts.firefox.com&utm_medium=referral&utm_campaign=fxa-devices",isPanelOpen:this.isPanelOpen(),linkAndroid:v,linkIOS:_,showMobileApps:this._showMobileApps(t)})},events:{"click .client-disconnect":l("_onDisconnectClient"),"click .clients-refresh":"startRefresh","click [data-get-app]":"_onGetApp"},_showMobileApps:function(e){return!this.broker.hasCapability("convertExternalLinksToText")&&!r.some(e,function(e){return"mobile"===e.type||"tablet"===e.type})},_onItemRemoved:function(e){var t=this,n=e.get("id");o("#"+n).slideUp(150,function(){t.render()})},_onDisconnectClient:function(e){var t=this,n=this._attachedClients.get(o(e.currentTarget).data("id")),i=n.get("clientType");this.logViewEvent(i+".disconnect"),i===c.CLIENT_TYPE_DEVICE?this.navigate("settings/clients/disconnect",{clientId:n.get("id"),clients:this._attachedClients}):this.user.destroyAccountClient(this.user.getSignedInAccount(),n).then(function(){if(i===c.CLIENT_TYPE_WEB_SESSION)return t.user.sessionStatus().then(null,function(){t.clearSessionAndNavigateToSignIn()})})},_onGetApp:function(e){var t=this.$el.find(e.currentTarget).data("get-app");this.logViewEvent("get."+t)},openPanel:function(){return this.logViewEvent("open"),this.$el.find(".client-list-form").hide(),this.$el.find(".settings-button.settings-unit-loading").show(),this.validateAndSubmit(null,{artificialDelay:E.MIN_REFRESH_INDICATOR_MS})},_fetchAttachedClients:function(){var e=this,t=Date.now();return this._attachedClients.fetchClients({oAuthApps:!0,sessions:!0},this.user).then(function(){var n=e._attachedClients.length,i="settings.clients.items";e.logEventOnce(0===n?i+".zero":1===n?i+".one":2===n?i+".two":i+".many"),e.logFlowEvent("timing.clients.fetch."+(Date.now()-t))})},startRefresh:function(){this.$(".clients-refresh").data("minProgressIndicatorMs",E.MIN_REFRESH_INDICATOR_MS),this.logViewEvent("refresh")},submit:function(){if(this.isPanelOpen())return this._fetchAttachedClients()},afterSubmit:function(){var e=this;return w.afterSubmit.call(this).then(function(){return e.render()})}},{MIN_REFRESH_INDICATOR_MS:1600});a.mixin(E,d,h,g),i.exports=E}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(3),o=n(5),s=n(10),a=n(7),c=n(76),u=n(69),l=n(6).preventDefaultThen,d=n(14),h=n(318),f=n(206),p=o.MARKETING_EMAIL_NEWSLETTER_ID,g=a.extend({template:h,className:"communication-preferences",viewName:"settings.communication-preferences",events:{"click #marketing-email-manage":l("_openManagePage")},getMarketingEmailPrefs:function(){return this._marketingEmailPrefs||(this._marketingEmailPrefs=this.getSignedInAccount().getMarketingEmailPrefs()),this._marketingEmailPrefs},_isBasketReady:!1,afterVisible:function(){var e=this;return this.getMarketingEmailPrefs().fetch().catch(function(t){if(!c.is(t,"UNKNOWN_EMAIL")){e._error=c.is(t,"UNKNOWN_ERROR")?e.translateError(c.toError("SERVICE_UNAVAILABLE")):e.translateError(t),t=e._normalizeError(t);var n=u.prototype.errorToId(t);t.code=t.code||"unknown",e.logEvent(n=n+"."+t.code)}}).then(function(){return e._isBasketReady=!0,e.render()})},setInitialContext:function(e){var t=this.getMarketingEmailPrefs(),n=t.isOptedIn(p);this.logViewEvent("newsletter.optin."+n),e.set({error:this._error,isBasketReady:!!this._isBasketReady,isOptedIn:n,isPanelOpen:this.isPanelOpen(),preferencesUrl:f.href(t.get("preferencesUrl"))})},submit:function(){return this._optIn()},_optIn:function(){var e=this;return this.logViewEvent("optIn"),this.getMarketingEmailPrefs().optIn(p).then(function(){return e.logViewEvent("optIn.success"),e.logFlowEvent("newsletter.subscribed"),e.displaySuccess("Subscribed successfully"),e.navigate("settings"),e.render()})},_openManagePage:function(){this.logViewEvent("manage"),this.logFlowEvent("newsletter.manage");var e=this.getMarketingEmailPrefs().get("preferencesUrl");e?this.window.open(e,"_blank"):this.displayError(c.toError("ACCOUNT_PREFS_NOT_FOUND"))}});r.mixin(g,d,s),i.exports=g}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r,o,s;r=n(0),s=[{buttonName:(o=function(e){return e})("Open Gmail"),link:"https://mail.google.com/mail/u/?authuser=",regex:/@gmail\.com$/,webmailType:"gmail"},{buttonName:o("Open Hotmail"),link:"https://outlook.live.com/",regex:/@hotmail\.com$/,webmailType:"hotmail"},{buttonName:o("Open Yahoo"),link:"https://mail.yahoo.com",regex:/@yahoo\.com$/,webmailType:"yahoo"},{buttonName:o("Open Outlook"),link:"https://outlook.live.com/",regex:/@outlook\.com$/,webmailType:"outlook"},{buttonName:o("Open Restmail"),link:"http://restmail.net/mail/",regex:/@restmail\.net/,webmailType:"restmail"}],void 0===(i={events:{"click #open-webmail":"_webmailTabOpened"},addUserInfo:function(e,t){var n=this.getWebmailType(t);return"gmail"===n?e=e.concat(encodeURIComponent(t)):"restmail"===n&&(e=e.concat(t)),e},_getService:function(e){return r.find(s,function(t){return t.regex.test(e)})},setInitialContext:function(e){var t=e.get("email"),n=this.isOpenWebmailButtonVisible(t);e.set("isOpenWebmailButtonVisible",n),t&&n&&e.set({escapedWebmailLink:encodeURI(this.getWebmailLink(t)),webmailButtonText:this.getWebmailButtonText.bind(this,t),webmailType:this.getWebmailType(t)})},getWebmailLink:function(e){var t=this._getService(e).link;return this.addUserInfo(t,e)},isOpenWebmailButtonVisible:function(e){return this.broker.hasCapability("openWebmailButtonVisible")&&!!this._getService(e)},getWebmailButtonText:function(e){return this.translate(this._getService(e).buttonName)},getWebmailType:function(e){return this._getService(e).webmailType},_webmailTabOpened:function(e){var t=this.$el.find(e.target).data("webmailType");this.logViewEvent(t+"_clicked")}})||(e.exports=i)},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r;void 0===(r=function(e,t,r){var o,s=n(0),a=n(8),c=n(6),u=n(3),l=n(5),d=n(23),h=n(327),f=n(12),p=n(20),g=["ca","cs","da","de","en","es","et","fr","hu","id","it","ja","ko","lt","nb-NO","nl","pl","pt-BR","pt","ru","sk","sl","sv","tr","uk","zh-CN","zh-TW"],m=c.extend({template:h,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._marketingId=e.marketingId||l.MARKETING_ID_SPRING_2015,this._service=e.service,this._which=e.which},events:{"click .marketing-link":"_onMarketingClick"},setInitialContext:function(e){var t=this._shouldShowSignUpMarketing(),n=this._isIos(),i=this._isAndroid(),r=this._isOther(),o=this._storeLink(l.DOWNLOAD_LINK_TEMPLATE_ANDROID),s=this._storeImage("google_play_store_button","png"),a=this._storeLink(l.DOWNLOAD_LINK_TEMPLATE_IOS),c=this._storeImage("apple_app_store_button","svg"),u=this._marketingId;e.set({appStoreImage:c,downloadLinkAndroid:o,downloadLinkIos:a,isAndroid:i,isAutumn2016:u===l.MARKETING_ID_AUTUMN_2016,isIos:n,isOther:r,isSpring2015:u===l.MARKETING_ID_SPRING_2015,marketingId:u,playStoreImage:s,showSignUpMarketing:t})},afterRender:function(){var e=this;this.$(".marketing-link").each(function(t,n){e._logMarketingImpression(n)}),this.$el.addClass(this._marketingId)},_shouldShowSignUpMarketing:function(){var e=this.broker.hasCapability("emailVerificationMarketingSnippet"),t=this._isFirefoxMobile(),n=this.isSignIn(),i=this.isSignUp();return!!this._which||e&&(i||n)&&this._service===l.SYNC_SERVICE&&!t},_isFirefoxMobile:function(){var e=this.getUserAgent();return e.isFirefoxIos()||e.isFirefoxAndroid()},_isIos:function(){return!this._which&&this.getUserAgent().isIos()||this._which===m.WHICH.IOS},_isAndroid:function(){return!this._which&&this.getUserAgent().isAndroid()||this._which===m.WHICH.ANDROID},_isOther:function(){return!this._isIos()&&!this._isAndroid()||this._which===m.WHICH.BOTH},_storeLink:function(e){return d.interpolate(e,{campaign:"fxa-conf-page",creative:m.BUTTON_IDS[this._marketingId]})},_storeImage:function(e,t){var n=s.contains(g,this.lang)?this.lang:"en";return this._isHighRes()&&"png"===t&&(n+="@2x"),"/images/"+e+"/"+n+"."+t},_isHighRes:function(){var e=this.window;return!(!e.matchMedia||!e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 1.5dppx), (min-resolution: 144dpi)"))},_logMarketingImpression:function(e){var t=this._getMarketingLinkInfo(e),n=t.id,i=t.type,r=t.url;this.metrics.logMarketingImpression(n,r),this.notifier.trigger("marketing.impression",{id:n,type:i,url:r})},_onMarketingClick:function(e){this._logMarketingClick(e.currentTarget)},_logMarketingClick:function(e){var t=this._getMarketingLinkInfo(e),n=t.id,i=t.type,r=t.url;this.metrics.logMarketingClick(n,r),this.notifier.trigger("marketing.clicked",{id:n,type:i,url:r})},_getMarketingLinkInfo:function(e){var t=a(e);return{id:t.data("marketing-id"),type:t.data("marketing-type"),url:t.attr("href")}}},{BUTTON_IDS:(o={},i(o,l.MARKETING_ID_AUTUMN_2016,"button-autumn-2016-connect-another-device"),i(o,l.MARKETING_ID_SPRING_2015,"button"),o),WHICH:{ANDROID:"android",BOTH:"both",IOS:"ios"}});u.mixin(m,f,p),r.exports=m}(0,0,e))||(e.exports=r)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(5),s=n(13),a=n(12);i.exports={dependsOn:[a],_hasWebChannelSupport:function(){var e=this.getUserAgent(),t=e.browser.version;return e.isFirefoxDesktop()&&t>=40||e.isFirefoxAndroid()&&t>=43},isSyncAuthSupported:function(){return!!this._hasWebChannelSupport()},_getSyncContext:function(){var e=this.getUserAgent();return e.isFirefoxAndroid()?o.FX_FENNEC_V1_CONTEXT:e.isFirefoxDesktop()?o.FX_DESKTOP_V3_CONTEXT:void 0},getEscapedSyncUrl:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.window.location.origin,a=this.relier,c=r.extend({context:this._getSyncContext(),entrypoint:t,service:o.SYNC_SERVICE,utm_campaign:a.get("utmCampaign"),utm_content:a.get("utmContent"),utm_medium:a.get("utmMedium"),utm_source:a.get("utmSource"),utm_term:a.get("utmTerm")},n);return i+"/"+e+s.objToSearchString(c)}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(3),s=n(7),a=n(17),c=n(14),u=n(27),l=n(11),d=n(330),h=s.extend({template:d,className:"delete-account",viewName:"settings.delete-account",setInitialContext:function(e){e.set("email",this.getSignedInAccount().get("email"))},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue(".password");return this.user.deleteAccount(t,n).then(function(){return u.clear(),e.invokeBrokerMethod("afterDeleteAccount",t)}).then(function(){var t;e.logViewEvent("deleted"),e.navigate("signup",{success:(t="Account deleted successfully",t)},{clearQueryParams:!0})}).catch(function(t){if(r.is(t,"INCORRECT_PASSWORD"))return e.showValidationError(e.$("#password"),t);throw t})}});o.mixin(h,a,l,c),i.exports=h}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(15),o=n(3),s=n(91),a=n(7),c=n(14),u=n(331),l=a.extend({template:u,className:"display-name",viewName:"settings.display-name",onProfileUpdate:function(){this.render()},setInitialContext:function(e){e.set("displayName",this._displayName)},beforeRender:function(){var e=this,t=this.getSignedInAccount();return t.fetchProfile().then(function(){e.user.setAccount(t),e._displayName=t.get("displayName")})},isValidStart:function(){return(this.getSignedInAccount().get("displayName")||"")!==this.getElementValue("input.display-name").trim()},submit:function(){var e=this,t=Date.now(),n=this.getSignedInAccount(),i=this.getElementValue("input.display-name").trim();return n.postDisplayName(i).then(function(){e.logViewEvent("success"),e.updateDisplayName(i),e.displaySuccess("Display name updated"),e.logFlowEvent("timing.displayName.change."+(Date.now()-t)),e.navigate("settings")})}});o.mixin(l,r,s,c),i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(15),s=n(3),a=n(332),c=n(7),u=n(43),l=n(6).preventDefaultThen,d=n(14),h=n(56),f=n(23),p=n(37),g=n(333),m=function(e){return e},v=c.extend({template:g,className:"emails",viewName:"settings.emails",events:{"click .email-disconnect":l("_onDisconnectEmail"),"click .email-refresh.enabled":l("refresh"),"click .resend":l("resend"),"click .set-primary":l("setPrimary")},beforeRender:function(){var e=this;return this.setupSessionGateIfRequired().then(function(t){if(t)return e._fetchEmails()})},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._emails=e.emails?e.emails:[]},setInitialContext:function(e){e.set({buttonClass:this._hasSecondaryEmail()?"secondary-button":"primary-button",emails:this._emails,hasSecondaryEmail:this._hasSecondaryEmail(),hasSecondaryVerifiedEmail:this._hasSecondaryVerifiedEmail(),isPanelOpen:this.isPanelOpen(),lastCheckedTime:this.getLastCheckedTimeString(),newEmail:this.newEmail})},afterRender:function(){this._hasSecondaryEmail()&&!this._hasSecondaryVerifiedEmail()&&this.openPanel()},_hasSecondaryEmail:function(){return this._emails.length>1},_hasSecondaryVerifiedEmail:function(){return!!this._hasSecondaryEmail()&&this._emails[1].verified},_onDisconnectEmail:function(e){var t=this,n=r(e.currentTarget).data("id");return this.getSignedInAccount().recoveryEmailDestroy(n).then(function(){return t.render().then(function(){t.displaySuccess(m("Secondary email removed"),{closePanel:!0}),t.navigate("/settings")})})},_fetchEmails:function(){var e=this;return this.getSignedInAccount().recoveryEmails().then(function(t){e._emails=t.map(function(e){return new a(e).toJSON()})})},refresh:p(function(){return this.setLastCheckedTime(),this.render()},"button.settings-button.email-refresh",350),resend:function(e){var t=this,n=r(e.currentTarget).data("id");return this.getSignedInAccount().resendEmailCode({email:n}).then(function(){t.displaySuccess(m("Verification email sent"),{closePanel:!1}),t.navigate("/settings/emails")})},submit:function(){var e=this,t=this.getElementValue("input.new-email");if(this.isPanelOpen()&&t)return this.getSignedInAccount().recoveryEmailCreate(t).then(function(){e.displaySuccess(m("Verification email sent"),{closePanel:!1}),e.render()}).catch(function(t){return e.showValidationError(e.$("input.new-email"),t)})},setPrimary:function(e){var t=this,n=r(e.currentTarget).data("id");return this.getSignedInAccount().setPrimaryEmail(n).then(function(){t.updateDisplayEmail(n),t.displaySuccess(f.interpolate(m("Primary email set to %(email)s"),{email:n}),{closePanel:!1}),t.render()})}});s.mixin(v,h({gatedHref:"settings/emails",title:m("Secondary email")}),o,u,d),i.exports=v}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(60)),o=i(n(2)),s=i(n(15)),a=i(n(61)),c=i(n(3)),u=i(n(62)),l=i(n(63)),d=i(n(22)),h=i(n(7)),f=i(n(17)),p=i(n(32)),g=n(6),m=i(n(11)),v=i(n(27)),_=i(n(106)),y=i(n(45)),w=i(n(334)),E=function(e){return e},b=h.default.prototype,S=h.default.extend({template:w.default,className:"sign-in",initialize:function(){this.user.logNumStoredAccounts()},beforeRender:function(){this._account=this.suggestedAccount()},afterVisible:function(){var e=this;b.afterVisible.call(this);var t=this.getAccount();return this.listenTo(t,"change:accessToken",function(){if(!t.has("accessToken")&&e.$("input[type=password]").is(":hidden"))return e.model.set("chooserAskForPassword",!0),e.render().then(function(){return e.setDefaultPlaceholderAvatar()})}),this.displayAccountProfileImage(t,{spinner:!0})},getAccount:function(){return this._account},getEmail:function(){return this.getAccount().get("email")||this.getPrefillEmail()},setInitialContext:function(e){var t=this.getAccount(),n=t.get("email"),i=this.getEmail(),r=this.translate(E("Sign in"),{msgctxt:"submit button"}),o=this.translate(E("Sign in"),{msgctxt:"header text"});e.set({buttonSignInText:r,chooserAskForPassword:this.isPasswordNeededForAccount(t),email:i,error:this.error,headerSignInText:o,password:this.formPrefill.get("password"),suggestedAccount:n})},events:{"click .use-different":"useDifferentAccount"},submit:function(){var e=this.getAccount();if(this.$("input[type=password]").length){var t=this.getElementValue("input[type=email]"),n=this.getElementValue("input[type=password]");return function(e,t){return!e||!e.has("email")||e.get("email").toLowerCase()!==t.toLowerCase()}(e,t)&&(e=this.user.initAccount({email:t})),this._signIn(e,n)}return this.useLoggedInAccount(e)},_signIn:function(e,t){return this.signIn(e,t).catch(this.onSignInError.bind(this,e,t))},onSignInError:function(e,t,n){if(o.default.is(n,"UNKNOWN_ACCOUNT"))return this._suggestSignUp(n);if(!o.default.is(n,"USER_CANCELED_LOGIN")){if(o.default.is(n,"ACCOUNT_RESET"))return this.notifyOfResetAccount(e);if(o.default.is(n,"INCORRECT_PASSWORD"))return this.showValidationError(this.$("#password"),n);throw n}this.logViewEvent("canceled")},useDifferentAccount:(0,g.preventDefaultThen)(function(){return this.user.removeAllAccounts(),v.default.clear(),this.formPrefill.clear(),this.logViewEvent("use-different-account"),this.render()}),_suggestSignUp:function(e){return e.forceMessage=E('Unknown account. <a href="/signup">Sign up</a>'),this.unsafeDisplayError(e)}});c.default.mixin(S,r.default,s.default,a.default,l.default,(0,u.default)({treatmentPathname:"/"}),d.default,f.default,p.default,m.default,y.default,_.default),e.exports=S},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(31),o={notifications:{},_navigateToSignedInView:function(e){return this.broker.hasCapability("handleSignedInNotification")&&(this.user.setSignedInAccountByUid(e.uid),this.navigate(this.model.get("redirectTo")||"settings")),Promise.resolve()}};o.notifications[r.SIGNED_IN]="_navigateToSignedInView",i.exports=o}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(19);i.exports={dependsOn:[r],beforeRender:function(){if(this.isInTokenCodeExperiment()){var e=this.getTokenCodeExperimentGroup();this.createExperiment("tokenCode",e)}},getTokenCodeExperimentGroup:function(){return this.getExperimentGroup("tokenCode",this._getTokenCodeExperimentSubject())},isInTokenCodeExperiment:function(){return this.isInExperiment("tokenCode",this._getTokenCodeExperimentSubject())},_getTokenCodeExperimentSubject:function(){return{account:this.model.get("account"),clientId:this.relier.get("clientId"),isTokenCodeSupported:this.broker.getCapability("tokenCode"),service:this.relier.get("service")}}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(3)),o=i(n(7)),s=i(n(21)),a=i(n(341)),c=i(n(342)),u=i(n(343)),l=i(n(88)),d=i(n(12)),h=function(e){return e},f=o.default.preventDefaultThen,p=o.default.extend({template:a.default,className:"recovery-codes",viewName:"settings.two-step-authentication.recovery-codes",events:{"click .copy-option":f("_copyCodes"),"click .download-option":"_downloadCodes","click .print-option":f("_printCodes"),"click .replace-codes-link":f("_replaceRecoveryCodes"),"click .two-step-authentication-done":f("_returnToTwoStepAuthentication")},_returnToTwoStepAuthentication:function(){if("sign_in_recovery_code"===this.model.get("previousViewName")){var e=this.getSignedInAccount();return this.invokeBrokerMethod("afterCompleteSignInWithCode",e)}this.navigate("settings/two_step_authentication")},_getFormatedRecoveryCodeFilename:function(){var e=this.getSignedInAccount().get("email")+" "+h("Firefox Recovery Codes");return e.length>200&&(e=e.substring(0,196)),e+".txt"},_copyCodes:function(){return this.logFlowEvent("copy-option",this.viewName),this.copy(this.recoveryCodesText,"#recovery-codes")},_downloadCodes:function(){this.logFlowEvent("download-option",this.viewName),this.download(this.recoveryCodesText,this._getFormatedRecoveryCodeFilename(),"#recovery-codes")},_printCodes:function(){this.logFlowEvent("print-option",this.viewName);var e=this.recoveryCodes.map(function(e){return new u.default({code:e}).toJSON()});this.print((0,c.default)({recoveryCodes:e}))},_replaceRecoveryCodes:function(){var e=this;return this.getSignedInAccount().replaceRecoveryCodes().then(function(t){e._setupRecoveryCodes(t.recoveryCodes,h("New recovery codes generated"))})},_setupRecoveryCodes:function(e,t){this.recoveryCodesText="",e&&(this.recoveryCodes=e,this.recoveryCodesText=this.recoveryCodes.join(" \r\n"),this.model.set("recoveryCodes",e),t&&this.model.set("modalSuccessMsg",t))},initialize:function(){this._setupRecoveryCodes(this.model.get("recoveryCodes")),this.listenTo(this.model,"change",this.render)},setInitialContext:function(e){var t=this.model.get("recoveryCodes");t=t?t.map(function(e){return new u.default({code:e}).toJSON()}):[];var n=this.model.get("modalSuccessMsg");n||t.length>0&&(n=h("Two-step authentication enabled")),e.set({isIos:this.getUserAgent().isIos(),modalSuccessMsg:n&&this.translate(n),recoveryCodes:t,showRecoveryCodes:t.length>0})}});r.default.mixin(p,s.default,l.default,d.default),e.exports=p},function(e,t,n){"use strict";var i=n(0),r=n(15),o=n(2),s=n(3),a=n(7),c=n(43),u=n(14),l=n(56),d=n(351),h=n(6).preventDefaultThen,f=n(37),p=function(e){return e},g=a.extend({template:d,className:"two-step-authentication",viewName:"settings.two-step-authentication",events:{"click .replace-codes-link":h("_replaceRecoveryCodes"),"click .show-code-link":h("_showCode"),"click .totp-cancel":h("cancel"),"click .totp-create":h("createToken"),"click .totp-delete":h("deleteToken"),"click .totp-refresh":h("refresh")},_checkTokenExists:function(){var e=this;return this.getSignedInAccount().checkTotpTokenExists().then(function(t){e._hasToken=t.exists})},_showQrCode:function(){this.$("#totp").removeClass("hidden")},_hideStatus:function(){this.$(".totp-list").addClass("hidden")},_showCode:function(){this.$(".manual-code").removeClass("hidden"),this.$(".show-code-link").addClass("hidden")},_getFormattedCode:function(e){return e.replace(/(\w{4})/g,"$1 ")},_showRecoveryCodes:function(e){this.model.set("recoveryCodes",e),this.navigate("/settings/two_step_authentication/recovery_codes",{recoveryCodes:e})},_replaceRecoveryCodes:function(){var e=this;return this.getSignedInAccount().replaceRecoveryCodes().then(function(t){e._showRecoveryCodes(t.recoveryCodes)})},beforeRender:function(){var e=this;return this.setupSessionGateIfRequired().then(function(t){if(t)return e._checkTokenExists()})},initialize:function(){this._hasToken=!1,this._statusVisible=!0},setInitialContext:function(e){e.set({escapedTotpSupportAttributes:i.escape("class=totp-support-link target=_blank href=https://support.mozilla.org/kb/secure-firefox-account-two-step-authentication"),hasToken:this._hasToken,isPanelOpen:this.isPanelOpen(),statusVisible:this._statusVisible})},cancel:function(){var e=this;return this.render().then(function(){return e.navigate("/settings")})},createToken:function(){var e=this;return this.getSignedInAccount().createTotpToken().then(function(t){e.$(".qr-image").attr("src",t.qrCodeUrl);var n=p("Use the code %(code)s to set up two-step authentication in supported applications.");e.$(".qr-image").attr("alt",e.translate(n,{code:t.secret})),e.$(".code").text(e._getFormattedCode(t.secret)),e._showQrCode(),e._hideStatus()})},deleteToken:function(){var e=this;return this.getSignedInAccount().deleteTotpToken().then(function(){return e.displaySuccess(p("Two-step authentication removed"),{closePanel:!0}),e.render()}).then(function(){return e.navigate("/settings")})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue("input.totp-code");return t.verifyTotpCode(n,this.relier.get("service")).then(function(t){if(!t.success)throw o.toError("INVALID_TOTP_CODE");e.displaySuccess(p("Two-step authentication enabled"),{}),e._showRecoveryCodes(t.recoveryCodes),e.render()}).catch(function(t){return o.is(t,"INVALID_PARAMETER")&&(t=o.toError("INVALID_TOTP_CODE")),e.showValidationError(e.$("input.totp-code"),t)})},refresh:f(function(){return this.setLastCheckedTime(),this.render()},"button.settings-button.totp-refresh",350)});s.mixin(g,l({gatedHref:"settings/two_step_authentication",title:p("Two-step Authentication")}),r,c,u),e.exports=g},function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._experimentGroupingRules=e.experimentGroupingRules,this._marketingEmailEnabled=!1!==e.marketingEmailEnabled},setInitialContext:function(e){e.set("isEmailOptInVisible",this._isEmailOptInEnabled())},afterRender:function(){this.logViewEvent("email-optin.visible."+this._isEmailOptInEnabled())},_isEmailOptInEnabled:function(){return!!this._marketingEmailEnabled&&!!this._experimentGroupingRules.choose("communicationPrefsVisible",{lang:this.navigator.language})},hasOptedInToMarketingEmail:function(){return!!this.$(".marketing-email-optin").is(":checked")}}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(33);i.exports={dependsOn:[r],events:{"click #suggest-sync a":"onSuggestSyncClick"},signUp:function(e,t){var n=this;return this.invokeBrokerMethod("beforeSignIn",e).then(function(){return n.logFlowEvent("attempt","signup"),n.user.signUpAccount(e,t,n.relier,{resume:n.getStringifiedResumeToken(e)})}).then(function(e){n.formPrefill&&n.formPrefill.clear(),n.notifier.trigger("account.created");var t=n.onSignUpSuccess.bind(n);return n.relier.accountNeedsPermissions(e)?n.navigate("signup_permissions",{account:e,onSubmitComplete:t}):n.broker.hasCapability("chooseWhatToSyncWebV1")?n.navigate("choose_what_to_sync",{account:e,onSubmitComplete:t}):n.onSignUpSuccess(e)})},onSignUpSuccess:function(e){this.logViewEvent("success"),this.logViewEvent("signup.success"),this.invokeBrokerMethod("afterSignUp",e)},onSuggestSyncClick:function(){this.logViewEvent("sync-suggest.clicked")}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(19);i.exports={dependsOn:[r],getSmsFeatures:function(){return["signinCodes"]}}}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(4),s=n(6),a=n(3),c=n(40),u=n(72),l=s.extend({initialize:function(e){this._environment=(e=e||{}).environment,this._createView=e.createView},notifications:{"show-child-view":"showChildView","show-view":"showView"},events:{'click a[href^="/"]':"onAnchorClick",keyup:"onKeyUp"},onKeyUp:function(e){e.which===c.ESCAPE&&(r.modal.isActive()?r.modal.close():0>e.currentTarget.className.indexOf("settings")||(r(".settings-unit").removeClass("open"),this.navigate("settings")))},onAnchorClick:function(e){if(!(e.isDefaultPrevented()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){e.preventDefault();var t=r(e.currentTarget).attr("href").replace(/^\//,"");this._environment.isFramed()&&t.indexOf("legal")>-1?this.window.open(t,"_blank"):this.navigate(t)}},_currentView:null,showView:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.resolve().then(function(){n.model=n.model||new o.Model;var i=t._currentView;if(i instanceof e&&!0!==n.force)return i.model.set(n.model.toJSON()),t.notifier.trigger("navigate-from-child-view",n),t.setTitle(i.titleFromView()),i;i&&i.destroy();var r=t._createView(e,n);return t._currentView=r,r.render().then(function(e){return e?(t.setTitle(r.titleFromView()),t.writeToDOM(r.el),r.logView(),r.afterVisible(),t.notifier.trigger("view-shown",r),r):(r.destroy(),r===t._currentView&&(t._currentView=null),Promise.resolve(null))})}).catch(this.fatalError.bind(this))},showChildView:function(e,t,n){var i=this;return Promise.resolve().then(function(){if(!(i._currentView instanceof t))return i.showView(t,n)}).then(function(){return i._currentView.showChildView(e,n)}).then(function(e){var t=e.titleFromView(i._currentView.titleFromView());return i.setTitle(t),e.logView(),e.model.set(n.model.toJSON()),e.displayStatusMessages(),e})},setTitle:function(e){this.window.document.title=e}});a.mixin(l,u),i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8);i.exports={afterRender:function(){var e,t=this.$("a[href^=http]"),n=this.broker&&this.broker.environment&&this.broker.environment.isAboutAccounts();t.each(function(e,t){r(t).attr("rel","noopener noreferrer"),n&&r(t).attr("target","_blank")}),(e=this.broker)&&e.hasCapability("convertExternalLinksToText")&&t.each(function(e,t){return function(e){var t=r(e),n=t.attr("href"),i=t.text();n&&n!==i&&t.addClass("visible-url").attr("data-visible-url",t.attr("href"))}(t)})},events:{"click a[href^=http]":"_onExternalLinkClick"},_onExternalLinkClick:function(e){return this._shouldIgnoreClick(e)?Promise.resolve():(e.preventDefault(),this._flushMetricsThenRedirect(e.currentTarget.href))},_shouldIgnoreClick:function(e){return this._isEventModifiedOrPrevented(e)||this._doesLinkOpenInAnotherTab(r(e.currentTarget))},_isEventModifiedOrPrevented:function(e){return!!(e.isDefaultPrevented()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},_doesLinkOpenInAnotherTab:function(e){return!!e.attr("target")},_flushMetricsThenRedirect:function(e){var t=this;return this.metrics.flush().then(function(){t.window.location=e})}}}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(3),o=n(41);i.exports=function(e){var t=function t(n,i){return Promise.resolve().then(function(){if(t.ensureConnectAnotherDeviceMixin(n),n.isEligibleForConnectAnotherDevice(i))return n.navigateToConnectAnotherDeviceScreen(i)}).then(function(){return n.hasNavigated()?new Promise(function(){}):e})};return t.ensureConnectAnotherDeviceMixin=function(e){r.isMixedIn(e,o)||r.mixin(e,o)},t.type="connect-another-device",t}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(5),s=n(190),a=n(119),c=s.prototype,u=s.extend({type:"fx-sync-web-channel",defaultCapabilities:r.extend({},c.defaultCapabilities,{sendChangePasswordNotice:!1}),commands:r.pick(a,"CAN_LINK_ACCOUNT","CHANGE_PASSWORD","DELETE_ACCOUNT","LOADED","LOGIN","VERIFIED"),createChannel:function(){var e=new a(o.ACCOUNT_UPDATES_WEBCHANNEL_ID);return e.initialize({window:this.window}),e},afterCompleteResetPassword:function(e){var t=this;return Promise.resolve().then(function(){if(e.get("verified")&&!e.get("verificationReason")&&!e.get("verificationMethod"))return t._notifyRelierOfLogin(e)}).then(function(){return c.afterCompleteResetPassword.call(t,e)})},afterCompleteSignInWithCode:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return c.afterSignInConfirmationPoll.call(t,e)})}});i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(!e)throw Error("WebChannel must have an id");this._id=e}var o=i(n(0)),s=i(n(2)),a=i(n(3)),c=i(n(120)),u=i(n(49)),l=i(n(12)),d=i(n(256)),h=i(n(257)),f={CAN_LINK_ACCOUNT:"fxaccounts:can_link_account",CHANGE_PASSWORD:"fxaccounts:change_password",DELETE:"fxaccounts:delete",DELETE_ACCOUNT:"fxaccounts:delete_account",FXA_STATUS:"fxaccounts:fxa_status",LOADED:"fxaccounts:loaded",LOGIN:"fxaccounts:login",LOGOUT:"fxaccounts:logout",PAIR_AUTHORIZE:"fxaccounts:pair_authorize",PAIR_COMPLETE:"fxaccounts:pair_complete",PAIR_DECLINE:"fxaccounts:pair_decline",PAIR_HEARTBEAT:"fxaccounts:pair_heartbeat",PAIR_REQUEST_SUPPLICANT_METADATA:"fxaccounts:pair_supplicant_metadata",PROFILE_CHANGE:"profile:change",VERIFIED:"fxaccounts:verified"};o.default.extend(r,f),o.default.extend(r.prototype,new c.default,{COMMANDS:f,initialize:function(){var e=this.window=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window||window,t=this._id,n=this._sender=new h.default;n.initialize({webChannelId:t,window:e});var i=this._receiver=new d.default;i.initialize({webChannelId:t,window:e}),c.default.prototype.initialize.call(this,{receiver:i,sender:n,window:e})},isFxaStatusSupported:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getUserAgentString(),t=this.getUserAgent(e);return t.isFirefoxDesktop()&&t.parseVersion().major>=55},onErrorReceived:function(e){var t=this.parseError(e).error;/no such channel/i.test(t&&t.message)&&this.rejectAllOutstandingRequests(s.default.toError("INVALID_WEB_CHANNEL")),c.default.prototype.onErrorReceived.call(this,e)}}),a.default.mixin(r,u.default,l.default),e.exports=r},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){this._window=e.window,this._sendTimeoutLength=e.sendTimeoutLength||l,this._requests={},this._logger=new u(this._window)}function o(){}var s=n(0),a=n(191),c=n(30),u=n(18),l=new c("90s").milliseconds();r.prototype={add:function(e,t){this.remove(e),t.timeout=this._window.setTimeout(function(e){this._logger.error("Response not received for: "+e)}.bind(this,t.command),this._sendTimeoutLength),this._requests[e]=t},remove:function(e){var t=this.get(e);t&&(this._window.clearTimeout(t.timeout),delete this._requests[t.messageId])},get:function(e){return this._requests[e]},clear:function(){for(var e in this._requests)this.remove(this._requests[e])},each:function(e){s.each(this._requests,e)}};var d=0;s.extend(o.prototype,new a,{initialize:function(e){var t=this;if(this._sender=(e=e||{}).sender,!this._sender)throw Error("DuplexChannel must have a sender");if(this._receiver=e.receiver,!this._receiver)throw Error("DuplexChannel must have a receiver");this._receiver.on("error",function(e){return t.onErrorReceived(e)}),this._receiver.on("message",function(e){return t.onMessageReceived(e)}),this._outstandingRequests=new r({sendTimeoutLength:e.sendTimeoutLength,window:e.window})},teardown:function(){this._outstandingRequests.clear(),this._sender&&this._sender.teardown(),this._receiver&&this._receiver.teardown()},send:function(e,t){var n=this;return Promise.resolve().then(function(){return n._sender.send(e,t,null)})},request:function(e,t){var n=this,i=this.createMessageId(e,t);return new Promise(function(r,o){n._outstandingRequests.add(i,{command:e,data:t,messageId:i,reject:o,resolve:r}),n._sender.send(e,t,i)}).catch(function(e){throw n._outstandingRequests.remove(i),e})},createMessageId:function(){return""+Date.now()+ ++d},onMessageReceived:function(e){var t=this.parseMessage(e),n=t.command,i=t.data,r=t.messageId;if(r){var o=this._outstandingRequests.get(r);o&&(this._outstandingRequests.remove(r),o.resolve(i))}this.trigger(n,i)},parseMessage:function(e){return s.pick(e,"command","data","messageId")},onErrorReceived:function(e){var t=this.parseError(e),n=t.error,i=t.messageId;if(i){var r=this._outstandingRequests.get(i);r&&(this._outstandingRequests.remove(i),r.reject(n))}this.trigger("error",n)},parseError:function(e){return s.pick(e,"error","messageId")},rejectAllOutstandingRequests:function(e){var t=this;this._outstandingRequests.each(function(n,i){t._outstandingRequests.remove(i),n.reject(e)})}}),i.exports=o}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(42);i.exports=function(e){var t=function(t){return t.broker.getCapability("browserTransitionsAfterEmailVerification")?new r:e};return t.type="halt-if-browser-transitions",t}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r,o,s=n(0),a=n(2),c=n(73),u=n(5),l=n(42),d=n(53),h=n(25),f=n(24),p=n(52),g=n(265),m=n(70),v=n(13),_=n(9),y=n(51),w=n(36),E=c.prototype,b={code:_.oauthCode().required(),state:_.string()};i.exports=c.extend({type:"redirect",defaultBehaviors:s.extend({},E.defaultBehaviors,{afterForceAuth:new l,afterSignIn:new l,afterSignInConfirmationPoll:new l}),defaultCapabilities:s.extend({},E.defaultCapabilities,{handleSignedInNotification:!1,reuseExistingSession:!0,tokenCode:!0}),initialize:function(e){return this.session=(e=e||{}).session,this._assertionLibrary=e.assertionLibrary,this._oAuthClient=e.oAuthClient,this._scopedKeys=g,this._metrics=e.metrics,E.initialize.call(this,e)},DELAY_BROKER_RESPONSE_MS:100,sendOAuthResultToRelier:function(e){var t=this.window;return this._metrics.flush().then(function(){var n={};e.error&&(n.error=e.error),e.action&&(n.action=e.action),t.location.href=v.updateSearchString(e.redirect,n)})},getOAuthResult:function(e){var t=this;if(!e||!e.get("sessionToken"))return Promise.reject(a.toError("INVALID_TOKEN"));var n=void 0,i=this.relier,r=i.get("clientId");return this._assertionLibrary.generate(e.get("sessionToken"),null,r).then(function(r){if(n=r,i.wantsKeys())return t._provisionScopedKeys(e,n)}).then(function(e){var o={acr_values:i.get("acrValues"),assertion:n,client_id:r,code_challenge:i.get("codeChallenge"),code_challenge_method:i.get("codeChallengeMethod"),keys_jwe:e,scope:i.get("scope"),state:i.get("state")};return i.get("accessType")===u.ACCESS_TYPE_OFFLINE&&(o.access_type=u.ACCESS_TYPE_OFFLINE),t._oAuthClient.getCode(o)}).then(function(e){if(!e)return Promise.reject(f.toError("INVALID_RESULT"));delete e.redirect;var t=m.transformUsingSchema(e,b,f);return t.redirect=v.updateSearchString(i.get("redirectUri"),{code:t.code,state:t.state}),t})},_provisionScopedKeys:function(e,t){var n=this,i=this.relier,r=e.get("uid");return Promise.resolve().then(function(){if(e.canFetchKeys())return n._oAuthClient.getClientKeyData({assertion:t,client_id:i.get("clientId"),scope:i.get("scope")})}).then(function(t){return t&&0!==Object.keys(t).length?e.accountKeys().then(function(e){return n._scopedKeys.createEncryptedBundle(e,r,t,i.get("keysJwk"))}):null})},afterForceAuth:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return E.afterForceAuth.call(t,e)})},afterSignIn:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return E.afterSignIn.call(t,e)})},afterSignInConfirmationPoll:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return E.afterSignInConfirmationPoll.call(t,e)})},afterCompleteSignInWithCode:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return E.afterSignIn.call(t,e)})},afterSignUpConfirmationPoll:function(e){return this.relier.wantsTwoStepAuthentication()?this.getBehavior("afterSignUpRequireTOTP"):this.finishOAuthSignUpFlow(e)},afterResetPasswordConfirmationPoll:function(e){var t=this;return Promise.resolve().then(function(){return!e.get("verified")||e.get("verificationReason")||e.get("verificationMethod")?E.afterResetPasswordConfirmationPoll.call(t,e):t.finishOAuthSignInFlow(e)})},transformLink:function(e){"/"!==e[0]&&(e="/"+e),/^\/(force_auth|signin|signup)?$/.test(e)&&(e="/oauth"+e);var t=v.searchParams(this.window.location.search);return v.updateSearchString(e,t)},setOriginalTabMarker:function(){this.window.sessionStorage.setItem("originalTab","1")},isOriginalTab:function(){return!!this.window.sessionStorage.getItem("originalTab")},clearOriginalTabMarker:function(){this.window.sessionStorage.removeItem("originalTab")},persistVerificationData:function(e){var t=this;return Promise.resolve().then(function(){var n=t.relier;return t.session.set("oauth",{access_type:n.get("access_type"),action:n.get("action"),client_id:n.get("clientId"),keys:n.get("keys"),scope:n.get("scope"),state:n.get("state")}),t.setOriginalTabMarker(),E.persistVerificationData.call(t,e)})},finishOAuthSignInFlow:function(e){return this.finishOAuthFlow(e,{action:u.OAUTH_ACTION_SIGNIN})},finishOAuthSignUpFlow:function(e){return this.finishOAuthFlow(e,{action:u.OAUTH_ACTION_SIGNUP})},finishOAuthFlow:function(e,t){var n=this;return this.session.clear("oauth"),Promise.resolve().then(function(){return n.clearOriginalTabMarker(),n.getOAuthResult(e).then(function(e){return e=s.extend(e,t),n.sendOAuthResultToRelier(e)})})},afterCompleteResetPassword:function(e){var t=this;return E.afterCompleteResetPassword.call(this,e).then(function(n){return e.get("verified")&&!e.get("verificationReason")&&!e.get("verificationMethod")&&t.isOriginalTab()?t.finishOAuthSignInFlow(e):t.isOriginalTab()?n:e.get("verificationMethod")===y.TOTP_2FA&&e.get("verificationReason")===w.SIGN_IN&&t.relier.has("state")?new h("signin_totp_code",{account:e}):new d})},afterCompleteSignUp:(r="afterCompleteSignUp",o="finishOAuthSignUpFlow",function(e){var t=this;return E[r].call(this,e).then(function(e){return p.delay(t.DELAY_BROKER_RESPONSE_MS).then(function(){return e})}).then(function(n){return t.isOriginalTab()?t[o](e).then(function(){return new l}):n})})})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(5)),s=i(n(24)),a=i(n(124)),c=i(n(70)),u=i(n(9)),l={id:u.default.hex().required().renameTo("clientId"),image_uri:u.default.url().allow("").renameTo("imageUri"),name:u.default.string().required().min(1).renameTo("serviceName"),redirect_uri:u.default.url().required().renameTo("redirectUri"),trusted:u.default.boolean().required()},d={access_type:u.default.accessType().renameTo("accessType"),acr_values:u.default.string().renameTo("acrValues"),action:u.default.action(),client_id:u.default.clientId().required().renameTo("clientId"),code_challenge:u.default.codeChallenge().renameTo("codeChallenge"),code_challenge_method:u.default.codeChallengeMethod().renameTo("codeChallengeMethod"),keys_jwk:u.default.keysJwk().renameTo("keysJwk"),login_hint:u.default.email().renameTo("loginHint"),prompt:u.default.prompt(),redirect_uri:u.default.url().allow(o.default.DEVICE_PAIRING_AUTHORITY_REDIRECT_URI).renameTo("redirectUri"),redirectTo:u.default.url(),scope:u.default.string().required().min(1),state:u.default.string()},h={access_type:u.default.accessType().renameTo("accessType"),acr_values:u.default.string().renameTo("acrValues"),action:u.default.string().min(1),client_id:u.default.clientId().required().renameTo("clientId"),prompt:u.default.prompt(),redirect_uri:u.default.url().renameTo("redirectUri"),scope:u.default.string().min(1),service:u.default.clientId(),state:u.default.string().min(1)},f=a.default.extend({defaults:r.default.extend({},a.default.prototype.defaults,{accessType:null,acrValues:null,clientId:null,context:o.default.OAUTH_CONTEXT,keysJwk:null,permissions:null,prompt:null,redirectTo:null,redirectUri:null,scope:null,state:null}),initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.default.prototype.initialize.call(this,e,t),this._config=t.config,this._oAuthClient=t.oAuthClient,this._session=t.session},fetch:function(){var e=this;return a.default.prototype.fetch.call(this).then(function(){return e._isVerificationFlow()?e._setupVerificationFlow():e._setupSignInSignUpFlow(),e.has("service")||e.set("service",e.get("clientId")),e._setupOAuthRPInfo()}).then(function(){e.has("scope")&&e._normalizeScopesAndPermissions()}).then(function(){e._validateKeyScopeRequest()})},_normalizeScopesAndPermissions:function(){var e,t,n,i=this.scopeStrToArray(this.get("scope"));if(this.isTrusted()?this.wantsConsent()&&(t=o.default.OAUTH_TRUSTED_PROFILE_SCOPE_EXPANSION,i=(n=r.default.without(e=i,o.default.OAUTH_TRUSTED_PROFILE_SCOPE)).length!==e.length?r.default.union(n,t):e):i=function(e){return r.default.intersection(e,o.default.OAUTH_UNTRUSTED_ALLOWED_PERMISSIONS)}(i),!i.length)throw s.default.toInvalidParameterError("scope");this.set("scope",i.join(" ")),this.set("permissions",i)},isOAuth:function(){return!0},_isVerificationFlow:function(){return!!this.getSearchParam("code")},_setupVerificationFlow:function(){var e=this._session.oauth;e||(e={client_id:this.getSearchParam("service"),service:this.getSearchParam("service")});var t=c.default.transformUsingSchema(e,h,s.default);this.set(t)},_setupSignInSignUpFlow:function(){if(this.importSearchParamsUsingSchema(d,s.default),this.get("email")||this.set("email",this.get("loginHint")),this.getSearchParam("service"))throw s.default.toInvalidParameterError("service")},_setupOAuthRPInfo:function(){var e=this,t=this.get("clientId");return this._oAuthClient.getClientInfo(t).then(function(t){var n,i=c.default.transformUsingSchema(t,l,s.default);if((n=e.get("redirectUri"))&&n!==i.redirectUri&&n!==o.default.DEVICE_PAIRING_AUTHORITY_REDIRECT_URI)throw s.default.toError("INCORRECT_REDIRECT");e.set(i)},function(e){throw s.default.is(e,"INVALID_PARAMETER")&&e.validation&&e.validation.keys&&"client_id"===e.validation.keys[0]&&((e=s.default.toError("UNKNOWN_CLIENT")).client_id=t),e})},isTrusted:function(){return this.get("trusted")},wantsConsent:function(){return this.get("prompt")===o.default.OAUTH_PROMPT_CONSENT},wantsTwoStepAuthentication:function(){var e=this.get("acrValues");return!!e&&e.split(" ").includes(o.default.TWO_STEP_AUTHENTICATION_ACR)},wantsKeys:function(){return!!(this._config&&this._config.scopedKeysEnabled&&this.has("keysJwk"))},_validateKeyScopeRequest:function(){var e=this;if(!this.has("keysJwk"))return!1;var t=this._config.scopedKeysValidation||{},n=!1;if(!this.get("scope"))throw Error("Invalid scope parameter");if(this.scopeStrToArray(this.get("scope")).forEach(function(i){if(t.hasOwnProperty(i)){if(!t[i].redirectUris.includes(e.get("redirectUri")))throw Error("Invalid redirect parameter");n=!0}}),!n)throw Error("No key-bearing scopes requested");return!0},accountNeedsPermissions:function(e){if(this.isTrusted()&&!this.wantsConsent())return!1;var t=e.getPermissionsWithValues(this.get("permissions"));return!e.hasSeenPermissions(this.get("clientId"),t)},scopeStrToArray:function(e){return r.default.isString(e)&&e.trim().length?r.default.uniq(e.split(/\s+|\++/g)):[]}});e.exports=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(2)),s=i(n(274)),a=i(n(3)),c=i(n(5)),u=i(n(47)),l=i(n(48)),d=i(n(9)),h={action:d.default.action(),coppa:d.default.boolean().renameTo("isCoppaEnabled"),entryPoint:d.default.string(),entrypoint:d.default.string(),migration:d.default.string().valid(c.default.AMO_MIGRATION,c.default.SYNC11_MIGRATION),reset_password_confirm:d.default.boolean().renameTo("resetPasswordConfirm"),setting:d.default.string(),uid:d.default.uid(),utm_campaign:d.default.string().renameTo("utmCampaign"),utm_content:d.default.string().renameTo("utmContent"),utm_medium:d.default.string().renameTo("utmMedium"),utm_source:d.default.string().renameTo("utmSource"),utm_term:d.default.string().renameTo("utmTerm")},f={email:d.default.string().min(1)},p={email:d.default.email()},g=r.default.extend({},h,{email:d.default.string(),redirectTo:d.default.url(),uid:d.default.string()}),m=s.default.extend({defaults:{context:c.default.CONTENT_SERVER_CONTEXT,email:null,entrypoint:null,migration:null,resetPasswordConfirm:!0,setting:null,uid:null,utmCampaign:null,utmContent:null,utmMedium:null,utmSource:null,utmTerm:null},initialize:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isVerification=e.isVerification,this.sentryMetrics=e.sentryMetrics,this.window=e.window||window},fetch:function(){var e=this;return Promise.resolve().then(function(){e.populateFromStringifiedResumeToken(e.getSearchParam("resume")),e.isVerification?e.importSearchParamsUsingSchema(g,o.default):(e.importSearchParamsUsingSchema(h,o.default),"email"===e.get("action")?e.importSearchParamsUsingSchema(f,o.default):e.importSearchParamsUsingSchema(p,o.default)),e.has("entryPoint")&&!e.has("entrypoint")&&e.set("entrypoint",e.get("entryPoint")),e.has("migration")&&e.unset("migration")})},resumeTokenFields:["entrypoint","resetPasswordConfirm","utmCampaign","utmContent","utmMedium","utmSource","utmTerm"]});a.default.mixin(m,u.default,l.default),e.exports=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(2)),s=i(n(3)),a=i(n(7)),c=i(n(10)),u=i(n(32)),l=i(n(29)),d=i(n(293)),h=i(n(13)),f=i(n(201)),p=a.default.extend({className:"recovery-key-confirm",template:d.default,viewName:"account-recovery-confirm-key",events:r.default.extend({},a.default.prototype.events,{"click .lost-recovery-key":a.default.preventDefaultThen("_lostRecoveryKey")}),_lostRecoveryKey:function(){this.logFlowEvent("lost-recovery-key",this.viewName),this.navigate("/complete_reset_password",{lostRecoveryKey:!0})},initialize:function(){this._searchParams=h.default.searchParams(this.window.location.search),this._verificationInfo=new f.default(this._searchParams)},setInitialContext:function(e){var t=this._verificationInfo.isExpired();e.set({isLinkExpired:t})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this._verificationInfo,i=n.get("email"),r=n.get("token"),s=n.get("code"),a=n.get("uid"),c=this.$("#recovery-key").val();return Promise.resolve().then(function(){var e=t.get("accountResetToken");return e||t.passwordForgotVerifyCode(s,r,{accountResetWithRecoveryKey:!0}).then(function(e){return t.set("accountResetToken",e.accountResetToken),e.accountResetToken})}).then(function(n){return t.getRecoveryBundle(a,c).then(function(t){e.logFlowEvent("success",e.viewName),e.navigate("/account_recovery_reset_password",{accountResetToken:n,email:i,kB:t.keys.kB,recoveryKeyId:t.recoveryKeyId})})}).catch(function(t){if(o.default.is(t,"INVALID_TOKEN"))return e._verificationInfo.markExpired(),e.render();if(o.default.is(t,"INVALID_RECOVERY_KEY"))return e.logFlowEvent("invalidRecoveryKey",e.viewName),e.showValidationError(e.$(".recovery-key"),t);throw t})},resend:function(){return this.resetPassword(this._verificationInfo.get("email"))}});s.default.mixin(p,c.default,u.default,l.default),e.exports=p},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2);i.exports=function(e){return function(){var t,n=this,i=arguments;return this.clearTimeout(this._workingTimeout),this._workingTimeout=this.setTimeout(function(){var e=r.toError("WORKING");t=n.displayError(e)},this.LONGER_THAN_EXPECTED),Promise.resolve().then(function(){return n.invokeHandler(e,i)}).then(function(e){return n.clearTimeout(n._workingTimeout),t===n.$(".error").text()&&n.hideError(),e},function(e){throw n.clearTimeout(n._workingTimeout),e})}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(){function e(e){return i.find(f,function(t){return t.match(e)})}var t=n(8),i=n(0),r=n(128),o=n(129),s=n(130),a=n(131),c=n(132),u=n(133),l=n(134),d=n(135),h=n(28),f=[n(136),n(137),u,l,r,o,a,c,n(138),d,h,s];t.fn.validate=function(){return this.data("validate")?this.data("validate")():e(this).validate.call(this)},t.fn.__val=t.fn.val,t.fn.val=function(){var n=e(this);return n.val?n.val.apply(this,arguments):t.fn.__val.apply(this,arguments)}}())||(e.exports=i)},function(e){"use strict";e.exports={match:function(e){return"checkbox"===e.attr("type")},val:function(){return!!this.is(":checked")},validate:function(){}}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2);i.exports={match:function(e){return"number"===e.attr("type")&&"age"===e.prop("id")},validate:function(){var e=void 0!==this.attr("required"),t=this.val();if(e&&!function(e){return e&&e.length&&!isNaN(parseInt(e,10))}(t))throw r.toError("AGE_REQUIRED")}}}(0,0,e))||(e.exports=i)},function(e){"use strict";e.exports={match:function(){return!0},validate:function(){}}},function(e,t,n){"use strict";var i,r,o;r=n(2),o=n(9),void 0===(i={match:function(e){return"email"===e.attr("type")},val:function(e){return 1===arguments.length?this.__val(e):this.__val().trim()},validate:function(){var e=this.val();if(!e)throw r.toError("EMAIL_REQUIRED");if(o.email().validate(e).error)throw r.toError("INVALID_EMAIL")}})||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2)),o=i(n(9));e.exports={match:function(e){var t=e.attr("type");return"password"===t||"text"===t&&e.hasClass("password")},validate:function(){var e=this.val();if(!e)throw r.default.toError("PASSWORD_REQUIRED");if(o.default.password().validate(e).error)throw r.default.toError("PASSWORD_TOO_SHORT")}}},function(e,t,n){"use strict";var i=n(2),r=n(28),o=n(9),s=Object.create(r);s.match=function(e){return"text"===e.attr("type")&&e.hasClass("recovery-code")},s.val=function(e){return 1===arguments.length?this.__val(e):this.__val().trim()},s.validate=function(){var e=this.val();if(!e.length)throw i.toError("RECOVERY_CODE_REQUIRED");if(o.recoveryCode().validate(e).error)throw i.toError("INVALID_RECOVERY_CODE")},e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(28),o=n(9),s=Object.create(r);s.match=function(e){return"text"===e.attr("type")&&e.hasClass("recovery-key")},s.val=function(e){return 1===arguments.length?this.__val(e):this.__val().replace(/ /g,"").toUpperCase()},s.validate=function(){var e=this.val();if(!e.length)throw i.toError("RECOVERY_KEY_REQUIRED");if(o.base32().validate(e).error)throw i.toError("INVALID_RECOVERY_KEY")},e.exports=s},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(66),s=n(28),a=Object.create(s);a.match=function(e){return"tel"===e.attr("type")},a.val=function(e){return 1===arguments.length?this.__val(e):this.__val().replace(/[.,()\s-]/g,"")},a.validate=function(){var e=void 0!==this.attr("required"),t=this.val(),n=t.length,i=this.data("country")||"US",s=o[i].pattern;if(!n&&e)throw r.toError("PHONE_NUMBER_REQUIRED");if(n&&!s.test(t))throw r.toError("INVALID_PHONE_NUMBER")},i.exports=a}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i=n(2),r=n(28),o=n(9),s=Object.create(r);s.match=function(e){return"number"===e.attr("type")&&e.hasClass("totp-code")},s.val=function(e){return 1===arguments.length?this.__val(e.replace(/[- ]*/g,"")):this.__val()},s.validate=function(){var e=this.val();if(!e.length)throw i.toError("TOTP_CODE_REQUIRED");if(o.totpCode().validate(e).error)throw i.toError("INVALID_TOTP_CODE")},e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(28),o=n(9),s=Object.create(r);s.match=function(e){return"number"===e.attr("type")&&e.hasClass("token-code")},s.val=function(e){return 1===arguments.length?this.__val(e.replace(/[- ]/g,"")):this.__val()},s.validate=function(){var e=this.val();if(!e.length)throw i.toError("TOKEN_VERIFICATION_CODE_REQUIRED");if(o.totpCode().validate(e).error)throw i.toError("INVALID_TOKEN_VERIFICATION_CODE")},e.exports=s},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(28),s=n(9),a=Object.create(o);a.match=function(e){return"text"===e.attr("type")&&e.hasClass("unblock-code")},a.val=function(e){return 1===arguments.length?this.__val(e):this.__val().trim()},a.validate=function(){var e=void 0!==this.attr("required"),t=this.val();if(e&&!t.length)throw r.toError("UNBLOCK_CODE_REQUIRED");if(s.unblockCode().validate(t).error)throw r.toError("INVALID_UNBLOCK_CODE")},i.exports=a}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r,o,s=n(31),a={notifications:(i={},r=s.SESSION_VERIFIED,o="_render",r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o,i),_render:function(){this.render()}};e.exports=a},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(6),o=n(305),s=r.extend({template:o,className:"cannot-create-account",setInitialContext:function(e){e.set("isSync",this.relier.isSync())}});i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2)),o=n(0),s=i(n(7)),a=i(n(142)),c=s.default.extend({events:{change:"updateModelAfterDelay",focus:"createBalloonIfNeeded",keypress:"updateModelAfterDelay"},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.passwordHelperBalloon=t.passwordHelperBalloon,this.balloonEl=t.balloonEl,this.$el.data("validate",function(){return e.validate()}),this.listenTo(this.model,"invalid",function(){return e.createBalloonIfNeeded()}),this.updateModelAfterDelay=(0,o.debounce)(function(){return e.updateModel()},t.delayBeforeUpdateModelMS||1e3)},createBalloonIfNeeded:function(){this.shouldCreateBalloon()&&this.createBalloon()},shouldCreateBalloon:function(){if(this.passwordHelperBalloon)return!1;var e=this.$el.val();return!e||!!this.model.validate({password:e})},createBalloon:function(){var e=this,t=this.passwordHelperBalloon=new a.default({el:this.balloonEl,lang:this.lang,model:this.model,translator:this.translator});return this.trackChildView(t),this.listenTo(t,"rendered",function(){return e.updateStyles()}),t.render().then(function(){e.$el.attr("aria-described-by","password-strength-balloon"),e.$el.val()&&e.updateModel()})},updateModel:function(){this.model.set("password",this.$el.val())},updateStyles:function(){var e=this.model.validationError;if(e){var t=this._getDescribedById(e);this.markElementInvalid(this.$el,t)}else this.markElementValid(this.$el)},_getDescribedById:function(e){return r.default.is(e,"PASSWORD_REQUIRED")?"password-too-short":r.default.is(e,"PASSWORD_TOO_SHORT")?"password-too-short":r.default.is(e,"PASSWORD_SAME_AS_EMAIL")?"password-same-as-email":r.default.is(e,"PASSWORD_TOO_COMMON")?"password-too-common":void 0},validate:function(){this.updateModel();var e=this.model.validationError;if(e)throw e.describedById=this._getDescribedById(e),e}});t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2)),a=i(n(6)),c=i(n(3)),u=i(n(81)),l=i(n(307)),d=i(n(206)).default.href("https://support.mozilla.org/kb/password-strength"),h=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,s=Array(o),a=0;o>a;a++)s[a]=arguments[a];return n=i=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.template=l.default,r(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,a.default),o(e,[{key:"initialize",value:function(){this.delayBeforeHideMS=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delayBeforeHideMS||750,this.listenTo(this.model,"change:password",this.update)}},{key:"setInitialContext",value:function(e){var t=this.model.validationError;e.set({escapedCommonPasswordLinkAttrs:'href="'+d+'" target="_blank"',isCommon:t&&s.default.is(t,"PASSWORD_TOO_COMMON"),isSameAsEmail:t&&s.default.is(t,"PASSWORD_SAME_AS_EMAIL"),isTooShort:t&&(s.default.is(t,"PASSWORD_REQUIRED")||s.default.is(t,"PASSWORD_TOO_SHORT"))})}},{key:"afterRender",value:function(){this.model.validationError&&this.show()}},{key:"update",value:function(){var e=this;return this.clearTimeouts(),this.render().then(function(){if(!e.model.validationError)return e.hideAfterDelay()})}},{key:"clearTimeouts",value:function(){this.clearTimeout(this._hideTimeout),this.clearTimeout(this._hideBalloonElTimeout)}},{key:"show",value:function(){this.$(".password-strength-balloon").show().css("opacity","1")}},{key:"hide",value:function(){var e=this.$(".password-strength-balloon");e.css("opacity","0"),this._hideBalloonElTimeout=this.setTimeout(function(){e.hide()},500)}},{key:"hideAfterDelay",value:function(){var e=this;this._hideTimeout=this.setTimeout(function(){e.hide()},this.delayBeforeHideMS)}}]),e}();c.default.mixin(h,(0,u.default)({hideMethod:"hide",showMethod:"show",viewType:"tooltip"})),t.default=h},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(8),s=n(16),a=n(3),c=n(7),u=n(95),l=n(310),d="screen-choose-what-to-sync",h=c.prototype,f=c.extend({template:l,className:"choose-what-to-sync",initialize:function(){this._account=this.user.initAccount(this.model.get("account")),this.onSubmitComplete=this.model.get("onSubmitComplete")},getAccount:function(){return this._account},beforeRender:function(){this.getAccount().get("sessionToken")||this.navigate("signup")},afterRender:function(){o("body").addClass(d)},afterVisible:function(){var e=this,t=this.getAccount();return h.afterVisible.call(this).then(function(){return e.broker.persistVerificationData(t)}).then(function(){e.waitForSessionVerification(t,function(){return e.validateAndSubmit()})})},destroy:function(){var e;o("body").removeClass(d);for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return(e=h.destroy).call.apply(e,[this].concat(n))},setInitialContext:function(e){var t=this.getAccount(),n=this._getOfferedEngines();e.set({email:t.get("email"),engines:n})},submit:function(){var e=this.getAccount(),t=this._getDeclinedEngineIds(),n=this._getOfferedEngineIds();return this._trackDeclinedEngineIds(t),e.set({customizeSync:!0,declinedSyncEngines:t,offeredSyncEngines:n}),this.user.setAccount(e).then(this.onSubmitComplete)},_getOfferedEngines:function(){var e=this;return this.broker.get("chooseWhatToSyncWebV1Engines").toJSON().map(function(t,n){var i=Object.create(t);return i.tabindex=5*(n+1),i.text=e.translate(i.text,{}),i})},_getOfferedEngineIds:function(){return this._getOfferedEngines().map(function(e){return e.id})},_getDeclinedEngineIds:function(){return this.$el.find("input[name=sync-content]").not(":checked").map(function(){return this.value}).get()},_trackDeclinedEngineIds:function(e){var t=this;r.isArray(e)&&e.forEach(function(e){t.logViewEvent("engine-unchecked."+e)})}},{SCREEN_CLASS:d});a.mixin(f,s,u),i.exports=f}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(6),o=n(311),s=r.extend({template:o,beforeRender:function(){try{localStorage.clear(),sessionStorage.clear(),document.cookie="tooyoung=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}catch(e){}}});i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(2)),s=i(n(3)),a=i(n(7)),c=i(n(10)),u=i(n(31)),l=i(n(17)),d=i(n(32)),h=i(n(57)),f=i(n(29)),p=i(n(11)),g=i(n(319)),m=i(n(13)),v=i(n(201)),_=i(n(320)),y=a.default.prototype,w=a.default.extend({template:g.default,className:"complete-reset-password",events:r.default.extend({},a.default.prototype.events,{"click .remember-password":a.default.preventDefaultThen("_navigateToSignin")}),_navigateToSignin:function(){this.navigate("signin")},initialize:function(e){e=e||{};var t=m.default.searchParams(this.window.location.search);this._verificationInfo=new v.default(t);var n=e.model;this.lostRecoveryKey=n&&n.get("lostRecoveryKey"),this.lostRecoveryKey||n&&n.get("recoveryKeyId")&&(this._accountRecoveryVerficationInfo=new _.default(n.toJSON()))},getAccount:function(){var e=this._verificationInfo.get("email");return this.user.initAccount({email:e})},beforeRender:function(){var e=this;this.logViewEvent("verification.clicked");var t=this._verificationInfo;if(t.isValid()){var n=this.getAccount(),i=t.get("token");return n.isPasswordResetComplete(i).then(function(i){if(!e._accountRecoveryVerficationInfo&&!e.lostRecoveryKey)return i&&!e._accountRecoveryVerficationInfo?(t.markExpired(),void e.logError(o.default.toError("EXPIRED_VERIFICATION_LINK"))):n.checkRecoveryKeyExistsByEmail().then(function(t){if(t.exists)return e.navigate("account_recovery_confirm_key")})})}this.logError(o.default.toError("DAMAGED_VERIFICATION_LINK"))},afterVisible:function(){return this.notifier.triggerRemote(u.default.COMPLETE_RESET_PASSWORD_TAB_OPEN),y.afterVisible.call(this)},setInitialContext:function(e){var t=this._verificationInfo,n=t.isValid(),i=t.isExpired(),r=this.relier.get("resetPasswordConfirm"),o=!!this._accountRecoveryVerficationInfo;o&&(r=!1),e.set({email:t.get("email"),isLinkDamaged:!n,isLinkExpired:i,isLinkValid:n&&!i,showAccountRecoveryInfo:o,showSyncWarning:r})},isValidEnd:function(){return this._getPassword()===this._getVPassword()},showValidationErrorsEnd:function(){if(this._getPassword()!==this._getVPassword()){var e=o.default.toError("PASSWORDS_DO_NOT_MATCH");this.displayError(e)}},submit:function(){var e=this,t=this._verificationInfo,n=this._getPassword(),i=t.get("token"),r=t.get("code"),s=t.get("emailToHashWith"),a=this.getAccount();return Promise.resolve().then(function(){var t=e._accountRecoveryVerficationInfo;return t?e.user.completeAccountPasswordResetWithRecoveryKey(a,n,t.get("accountResetToken"),t.get("recoveryKeyId"),t.get("kB"),e.relier,s):e.user.completeAccountPasswordReset(a,n,i,r,e.relier,s)}).then(function(t){return e.relier.set("resetPasswordConfirm",!0),e.logViewEvent("verification.success"),e.invokeBrokerMethod("afterCompleteResetPassword",t)}).then(function(){e.navigate(e._accountRecoveryVerficationInfo?"reset_password_with_recovery_key_verified":"reset_password_verified")}).catch(function(t){if(o.default.is(t,"INVALID_TOKEN"))return e.logError(t),delete e._accountRecoveryVerficationInfo,e.render();throw t})},_getPassword:function(){return this.$("#password").val()},_getVPassword:function(){return this.$("#vpassword").val()},resend:function(){return this.resetPassword(this._verificationInfo.get("email"))}});s.default.mixin(w,c.default,l.default,d.default,(0,h.default)({balloonEl:".helper-balloon",passwordEl:"#password"}),(0,f.default)(),p.default),e.exports=w},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(6),s=n(3),a=n(321),c=n(41),u=n(76),l=n(29)(),d=n(33),h=n(322),f=o.extend({template:a,className:"complete_sign_up",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._verificationInfo=new h(this.getSearchParams());var t=this._verificationInfo.get("uid");this.notifier.trigger("set-uid",t);var n=e.account||this.user.getAccountByUid(t);n.isDefault()&&n.set("uid",t),this._account=n,this._email=this._account.get("email")},getAccount:function(){return this._account},beforeRender:function(){var e=this;this.logViewEvent("verification.clicked");var t=this._verificationInfo;if(!t.isValid())return this.logError(r.toError("DAMAGED_VERIFICATION_LINK")),!0;var n=this.getAccount();n.populateFromStringifiedResumeToken(this.getSearchParam("resume"));var i=t.get("code"),o={primaryEmailVerified:this.getSearchParam("primary_email_verified")||null,reminder:t.get("reminder"),secondaryEmailVerified:this.getSearchParam("secondary_email_verified")||null,service:this.relier.get("service")||null,type:t.get("type")};return this.user.completeAccountSignUp(n,i,o).catch(function(t){return e._logAndAbsorbMarketingClientErrors(t)}).then(function(){return e._notifyBrokerAndComplete(n)}).catch(function(t){return e._handleVerificationErrors(t)})},setInitialContext:function(e){var t=this._verificationInfo;e.set({canResend:this._canResend(),error:this.model.get("error"),isLinkDamaged:!t.isValid(),isLinkExpired:t.isExpired(),isLinkUsed:t.isUsed(),isPrimaryEmailVerification:this.isPrimaryEmail()})},_logAndAbsorbMarketingClientErrors:function(e){if(!u.created(e))throw e;this.logError(e)},_notifyBrokerAndComplete:function(e){this.logViewEvent("verification.success"),this.notifier.trigger("verification.success"),this.isSignIn()&&this.logEvent("signin.success"),this.user.setAccount(e);var t=this._getBrokerMethod();return this.invokeBrokerMethod(t,e)},_getBrokerMethod:function(){var e=void 0;if(this.isPrimaryEmail())e="afterCompletePrimaryEmail";else if(this.isSecondaryEmail())e="afterCompleteSecondaryEmail";else if(this.isSignIn())e="afterCompleteSignIn";else{if(!this.isSignUp())throw Error("New broker method needed for "+this.model.get("type"));e="afterCompleteSignUp"}return e},_handleVerificationErrors:function(e){var t=this._verificationInfo;r.is(e,"UNKNOWN_ACCOUNT")?(t.markExpired(),e=r.toError("UNKNOWN_ACCOUNT_VERIFICATION")):r.is(e,"INVALID_VERIFICATION_CODE")||r.is(e,"INVALID_PARAMETER")?this.isPrimaryEmail()?(t.markUsed(),e=r.toError("REUSED_PRIMARY_EMAIL_VERIFICATION_CODE")):this.isSignIn()?(t.markUsed(),e=r.toError("REUSED_SIGNIN_VERIFICATION_CODE")):(t.markDamaged(),e=r.toError("DAMAGED_VERIFICATION_LINK")):this.model.set("error",e),this.logError(e)},_canResend:function(){return!!this._hasResendSessionToken()&&this.isSignUp()},_hasResendSessionToken:function(){return!!this.user.getAccountByEmail(this._email).get("sessionToken")},resend:function(){var e=this,t=this.user.getAccountByEmail(this._email);return t.retrySignUp(this.relier,{resume:this.getStringifiedResumeToken(t)}).catch(function(t){if(r.is(t,"INVALID_TOKEN"))return e.navigate("signup",{error:t});throw t})}});s.mixin(f,c,l,d),i.exports=f}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(148)),s=i(n(2)),a=i(n(6)),c=i(n(3)),u=i(n(31)),l=i(n(32)),d=i(n(99)),h=i(n(29)),f=i(n(11)),p=i(n(27)),g=i(n(325)),m=n(5),v=function(e){return e},_=a.default.extend({template:g.default,className:"confirm-reset-password",initialize:function(){this._verificationPollMS=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verificationPollMS||m.VERIFICATION_POLL_IN_MS},setInitialContext:function(e){var t=this.model.get("email"),n=this.relier.get("resetPasswordConfirm");e.set({email:t,encodedEmail:encodeURIComponent(t),forceAuth:this.broker.isForceAuth(),isSignInEnabled:n})},beforeRender:function(){var e=this;if(this.model.has("passwordForgotToken"))return this.user.initAccount({email:this.model.get("email")}).checkRecoveryKeyExistsByEmail().then(function(t){e.model.set("hasRecoveryKey",t.exists)});this.navigate("reset_password")},afterVisible:function(){var e=this,t=this.user.initAccount({email:this.model.get("email")});return this.broker.persistVerificationData(t).then(function(){return e._waitForConfirmation().then(function(n){return e.logViewEvent("verification.success"),e.relier.set("resetPasswordConfirm",!0),!t.canFetchKeys()&&e.relier.wantsKeys()&&e.relier.isOAuth()?e._finishPasswordResetDifferentBrowser():n?e._finishPasswordResetSameBrowser(n):e._finishPasswordResetDifferentBrowser()}).catch(e.displayError.bind(e))})},_waitForConfirmation:function(){var e=this;return new Promise(function(t,n){var i=function(n){e._stopWaiting(),t(n)},r=function(t){e._stopWaiting(),n(t)};e.notifier.on(u.default.COMPLETE_RESET_PASSWORD_TAB_OPEN,function(){e._isWaitingForLoginMessage||(e._waitForLoginMessage().then(i,r),e._stopWaitingForServerConfirmation())}),e._waitForServerConfirmation().then(i,r)})},_finishPasswordResetSameBrowser:function(e){var t=this,n=this.user.getAccountByUid(e.uid);return n.set(r.default.pick(e,o.default.ALLOWED_KEYS)),n.isDefault()?Promise.reject(s.default.toError("UNEXPECTED_ERROR")):this.user.setSignedInAccount(n).then(function(){return t.displaySuccess(v("Password reset")),t.invokeBrokerMethod("afterResetPasswordConfirmationPoll",n)}).then(function(){t.navigate("reset_password_confirmed")})},_finishPasswordResetDifferentBrowser:function(){p.default.clear();var e={};this.model.get("hasRecoveryKey")||(e.success=v("Password reset successfully. Sign in to continue.")),this.navigate("signin",e)},_isWaitingForServerConfirmation:!1,_waitForServerConfirmation:function(){var e=this;this._isWaitingForServerConfirmation=!0;var t=this.model.get("email"),n=this.user.initAccount({email:t}),i=this.model.get("passwordForgotToken");return n.isPasswordResetComplete(i).then(function(t){return e._isWaitingForServerConfirmation?t?null:new Promise(function(t){e._waitForServerConfirmationTimeout=e.setTimeout(function(){e._isWaitingForServerConfirmation&&t(e._waitForServerConfirmation())},e._verificationPollMS)}):new Promise(function(){})})},_stopWaitingForServerConfirmation:function(){this._waitForServerConfirmationTimeout&&this.clearTimeout(this._waitForServerConfirmationTimeout),this._isWaitingForServerConfirmation=!1},_isWaitingForLoginMessage:!1,_waitForLoginMessage:function(){var e=this;return new Promise(function(t){e._isWaitingForLoginMessage=!0,e.notifier.on(u.default.SIGNED_IN,t)})},_stopListeningForInterTabMessages:function(){this._isWaitingForLoginMessage=!1,this.notifier.off()},_stopWaiting:function(){this._stopWaitingForServerConfirmation(),this._stopListeningForInterTabMessages()},resend:function(){var e=this;return this.retryResetPassword(this.model.get("email"),this.model.get("passwordForgotToken")).catch(function(t){if(s.default.is(t,"INVALID_TOKEN"))return e.navigate("reset_password",{error:t});throw t})}});c.default.mixin(_,l.default,d.default,(0,h.default)(),f.default),e.exports=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(2)),s=i(n(4)),a=i(n(3)),c=i(n(5)),u=i(n(323)),l=i(n(24)),d=i(n(324)),h=i(n(77)),f=i(n(90)),p=i(n(47)),g=i(n(199)),m=i(n(54)),v=i(n(9)),_={accountResetToken:void 0,displayName:void 0,email:void 0,grantedPermissions:void 0,hadProfileImageSetBefore:void 0,lastLogin:void 0,needsOptedInToMarketingEmail:void 0,originalLoginEmail:void 0,permissions:void 0,profileImageId:void 0,profileImageUrl:void 0,profileImageUrlDefault:void 0,recoveryKeyId:void 0,sessionToken:void 0,sessionTokenContext:void 0,uid:void 0,verified:void 0},y=r.default.extend({accessToken:void 0,customizeSync:void 0,declinedSyncEngines:void 0,keyFetchToken:void 0,offeredSyncEngines:void 0,unwrapBKey:void 0,verificationMethod:void 0,verificationReason:void 0},_),w=Object.keys(y),E=Object.keys(_),b={"profile:avatar":"profileImageUrl","profile:display_name":"displayName","profile:email":"email","profile:uid":"uid"},S=s.default.Model.extend({defaults:y,initialize:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._oAuthClientId=e.oAuthClientId,this._oAuthClient=e.oAuthClient,this._assertion=e.assertion,this._profileClient=e.profileClient,this._fxaClient=e.fxaClient,this._marketingEmailClient=e.marketingEmailClient,this._metrics=e.metrics,this._notifier=e.notifier,this._sentryMetrics=e.sentryMetrics,this._assertionPromises={},this._upgradeGrantedPermissions(),this._boundOnChange=this.onChange.bind(this),this.on("change",this._boundOnChange),this.get("email")&&this._notifier&&this._notifier.trigger("set-email-domain",this.get("email"))},resumeTokenFields:["email","needsOptedInToMarketingEmail"],resumeTokenSchema:{email:v.default.email(),needsOptedInToMarketingEmail:v.default.boolean()},fetch:function(){var e=this;return!this.get("sessionToken")||this.get("verified")?Promise.resolve():this.sessionStatus().catch(function(t){o.default.is(t,"INVALID_TOKEN")&&e.discardSessionToken(),!o.default.is(t,"UNAUTHORIZED")&&e._sentryMetrics&&e._sentryMetrics.captureException(Error(r.default.isEmpty(t)?"Something went wrong!":t))})},discardSessionToken:function(){this.set({accessToken:null,sessionToken:null,sessionTokenContext:null})},_fetchProfileOAuthToken:function(){var e=this;return this.createOAuthToken("profile profile:write clients:write").then(function(t){e.set("accessToken",t.get("token"))})},profileClient:function(){var e=this;return this.fetch().then(function(){if(!e.get("verified"))throw o.default.toError("UNVERIFIED_ACCOUNT");if(e._needsAccessToken())return e._fetchProfileOAuthToken()}).then(function(){return e._profileClient})},isFromSync:function(){return this.get("sessionTokenContext")===c.default.SESSION_TOKEN_USED_FOR_SYNC},isDefault:function(){var e=this;return!r.default.find(w,function(t){return e.get(t)!==y[t]})},_needsAccessToken:function(){return this.get("verified")&&!this.get("accessToken")},_generateAssertion:function(){var e=this.get("sessionToken");if(!e)return Promise.reject(o.default.toError("INVALID_TOKEN"));var t=this._assertionPromises[e];if(this._isAssertionValid(t))return t;var n=this._assertion.generate(e);return n.__expiresAt=Date.now()+36e5,this._assertionPromises[e]=n,n},_isAssertionValid:function(e){return!(!e||!e.__expiresAt||e.__expiresAt<Date.now())},createOAuthToken:function(e){var t=this;return this._generateAssertion().then(function(n){return t._oAuthClient.getToken({assertion:n,client_id:t._oAuthClientId,scope:e})}).then(function(e){return new d.default({oAuthClient:t._oAuthClient,token:e.access_token})})},sessionStatus:function(){var e=this,t=this.get("sessionToken");return t?this._fxaClient.recoveryEmailStatus(t).then(function(t){return e.set(t),t},function(t){throw o.default.is(t,"INVALID_TOKEN")&&e.unset("sessionToken"),t}):Promise.reject(o.default.toError("INVALID_TOKEN"))},sessionVerificationStatus:function(){var e=this,t=this.get("sessionToken");return t?this._fxaClient.sessionVerificationStatus(t).then(function(e){return e},function(t){throw o.default.is(t,"INVALID_TOKEN")&&e.unset("sessionToken"),t}):Promise.reject(o.default.toError("INVALID_TOKEN"))},isSignedIn:function(){return this._fxaClient.isSignedIn(this.get("sessionToken"))},toJSON:function(){throw Error("toJSON is explicitly disabled, use `.pick` instead")},toPersistentJSON:function(){return this.pick(E)},setProfileImage:function(e){this.set({profileImageId:e.get("id"),profileImageUrl:e.get("url"),profileImageUrlDefault:e.get("default")}),this.get("profileImageUrl")&&this.set("hadProfileImageSetBefore",!0)},onChange:function(){delete this._profileFetchPromise},_profileFetchPromise:null,fetchProfile:function(){var e=this;return this._profileFetchPromise?this._profileFetchPromise:(this.off("change",this._boundOnChange),this._profileFetchPromise=this.getProfile().then(function(t){var n=new f.default({default:t.avatarDefault,url:t.avatar});e.setProfileImage(n),e.set("displayName",t.displayName),e.on("change",e._boundOnChange)}),this._profileFetchPromise)},fetchCurrentProfileImage:function(){var e=this,t=new f.default;return this.getAvatar().then(function(n){return t=new f.default({default:n.avatarDefault,id:n.id,url:n.avatar}),e.setProfileImage(t),t.fetch()}).then(function(){return t})},signIn:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.get("email");return Promise.resolve().then(function(){var s=n.get("sessionToken");if(e){var a={metricsContext:n._metrics.getFlowEventMetadata(),reason:i.reason||g.default.SIGN_IN,resume:i.resume,skipCaseError:!0,unblockCode:i.unblockCode},c=n.get("originalLoginEmail");return c&&(a.originalLoginEmail=c),i.verificationMethod&&(a.verificationMethod=i.verificationMethod),s?n._fxaClient.sessionReauth(s,r,e,t,a).catch(function(i){if(!o.default.is(i,"INVALID_TOKEN"))throw i;return n.discardSessionToken(),n._fxaClient.signIn(r,e,t,a)}):n._fxaClient.signIn(r,e,t,a)}if(s)return n._fxaClient.recoveryEmailStatus(s);throw o.default.toError("UNEXPECTED_ERROR")}).then(function(e){return i.originalLoginEmail&&r.toLowerCase()!==i.originalLoginEmail.toLowerCase()&&(e.email=i.originalLoginEmail),n.set(e),n._notifier.trigger("set-uid",n.get("uid")),e}).catch(function(s){if(o.default.is(s,"INCORRECT_EMAIL_CASE"))return n.set("originalLoginEmail",r),n.set("email",s.email),n.signIn(e,t,i);if(o.default.is(s,"THROTTLED")||o.default.is(s,"REQUEST_BLOCKED")){var a=n.get("originalLoginEmail");a&&n.set("email",a)}throw s})},signUp:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._fxaClient.signUp(this.get("email"),e,t,{customizeSync:this.get("customizeSync"),metricsContext:this._metrics.getFlowEventMetadata(),resume:i.resume}).then(function(e){n.set(e)})},retrySignUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fxaClient.signUpResend(e,this.get("sessionToken"),{resume:t.resume})},requestVerifySession:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._fxaClient.sessionVerifyResend(this.get("sessionToken"),{redirectTo:e.redirectTo})},verifySignUp:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.get("needsOptedInToMarketingEmail");return i&&(this.unset("needsOptedInToMarketingEmail"),n.marketingOptIn=!0),this._fxaClient.verifyCode(this.get("uid"),e,n).then(function(){i&&(t._notifier.trigger("flow.initialize"),t._notifier.trigger("flow.event",{event:"newsletter.subscribed"}))})},verifyTokenCode:function(e){return this._fxaClient.verifyTokenCode(this.get("sessionToken"),this.get("uid"),e)},checkEmailExists:function(){return this._fxaClient.checkAccountExistsByEmail(this.get("email"))},checkUidExists:function(){return this._fxaClient.checkAccountExists(this.get("uid"))},signOut:function(){return this._notifier.trigger("clear-uid"),this._fxaClient.sessionDestroy(this.get("sessionToken"))},destroy:function(e){var t=this;return this._fxaClient.deleteAccount(this.get("email"),e,this.get("sessionToken")).then(function(){t._notifier.trigger("clear-uid"),t.trigger("destroy",t)})},_upgradeGrantedPermissions:function(){var e=this;if(this.has("grantedPermissions")){var t=this.get("grantedPermissions"),n=function(n){var i={};t[n].forEach(function(e){i[e]=!0}),e.setClientPermissions(n,i)};for(var i in t)n(i);this.unset("grantedPermissions")}},getClientPermissions:function(e){return(this.get("permissions")||{})[e]||{}},getClientPermission:function(e,t){return this.getClientPermissions(e)[t]},setClientPermissions:function(e,t){var n=this.get("permissions")||{};n[e]=t,this.set("permissions",n)},hasSeenPermissions:function(e,t){var n=Object.keys(this.getClientPermissions(e)),i=[t].concat(n);return 0===r.default.without.apply(r.default,i).length},getPermissionsWithValues:function(e){var t=this;return e.map(function(e){var n=b[e];return n&&t.has(n)?e:null}).filter(function(e){return null!==e})},getMarketingEmailPrefs:function(){return new u.default({account:this,marketingEmailClient:this._marketingEmailClient})},changePassword:function(e,t,n){var i=this,r=this._fxaClient,s=this.get("email");return r.checkPassword(s,e,this.get("sessionToken")).then(function(){if(e===t)throw o.default.toError("PASSWORDS_MUST_BE_DIFFERENT");return r.changePassword(s,e,t,i.get("sessionToken"),i.get("sessionTokenContext"),n)}).then(this.set.bind(this))},set:r.default.wrap(s.default.Model.prototype.set,function(e,t,n,i){var o=void 0;for(var s in r.default.isObject(t)?o=t:(o={})[t]=n,o)if(!r.default.contains(w,s))throw Error(s+" cannot be set on an Account");return e.call(this,t,n,i)}),completePasswordReset:function(e,t,n,i,r){return this._fxaClient.completePasswordReset(this.get("email"),e,t,n,i,{emailToHashWith:r,metricsContext:this._metrics.getFlowEventMetadata()}).then(this.set.bind(this))},fetchDevices:function(){return this._fxaClient.deviceList(this.get("sessionToken")).then(function(e){return e.map(function(e){e.clientType=c.default.CLIENT_TYPE_DEVICE}),e})},fetchOAuthApps:function(){var e=this;return this._oAuthClient.fetchOAuthApps(this.get("accessToken")).catch(function(t){if(l.default.is(t,"UNAUTHORIZED"))return e._fetchProfileOAuthToken().then(function(){return e._oAuthClient.fetchOAuthApps(e.get("accessToken"))});throw t}).then(function(e){return e.map(function(e){e.clientType=c.default.CLIENT_TYPE_OAUTH_APP,e.isOAuthApp=!0}),e})},fetchSessions:function(){return this._fxaClient.sessions(this.get("sessionToken")).then(function(e){return e.map(function(e){e.isDevice?(e.clientType=c.default.CLIENT_TYPE_DEVICE,e.id=e.deviceId,e.name=e.deviceName,e.type=e.deviceType):(e.clientType=c.default.CLIENT_TYPE_WEB_SESSION,e.isWebSession=!0),e.genericOS=m.default.toGenericOSName(e.os)}),e})},destroyDevice:function(e){var t=e.get("id"),n=this.get("sessionToken");return this._fxaClient.deviceDestroy(n,t).then(function(){e.destroy()})},destroySession:function(e){var t=e.get("id"),n=this.get("sessionToken");return this._fxaClient.sessionDestroy(n,{customSessionToken:t}).then(function(){e.destroy()})},destroyOAuthApp:function(e){var t=this,n=e.get("id"),i=this.get("accessToken");return this._oAuthClient.destroyOAuthApp(i,n).catch(function(e){if(l.default.is(e,"UNAUTHORIZED"))return t._fetchProfileOAuthToken().then(function(){return t._oAuthClient.destroyOAuthApp(i,n)});throw e}).then(function(){e.destroy()})},resetPassword:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fxaClient.passwordReset(this.get("email"),e,{metricsContext:this._metrics.getFlowEventMetadata(),resume:t.resume})},retryResetPassword:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._fxaClient.passwordResetResend(this.get("email"),e,t,{metricsContext:this._metrics.getFlowEventMetadata(),resume:n.resume})},canFetchKeys:function(){return this.has("keyFetchToken")&&this.has("unwrapBKey")},accountKeys:function(){return this.canFetchKeys()?this._fxaClient.accountKeys(this.get("keyFetchToken"),this.get("unwrapBKey")):Promise.resolve(null)},isPasswordResetComplete:function(e){return this._fxaClient.isPasswordResetComplete(e)},sendUnblockEmail:function(){return this._fxaClient.sendUnblockEmail(this.get("email"),{metricsContext:this._metrics.getFlowEventMetadata()})},rejectUnblockCode:function(e){return this._fxaClient.rejectUnblockCode(this.get("uid"),e)},sendSms:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._fxaClient.sendSms(this.get("sessionToken"),e,t,{features:n.features||[],metricsContext:this._metrics.getFlowEventMetadata()})},smsStatus:function(e){var t=this.get("sessionToken");return t?this._fxaClient.smsStatus(t,e):Promise.resolve({ok:!1})},recoveryEmails:function(){return this._fxaClient.recoveryEmails(this.get("sessionToken"))},recoveryEmailCreate:function(e){return this._fxaClient.recoveryEmailCreate(this.get("sessionToken"),e)},recoveryEmailDestroy:function(e){return this._fxaClient.recoveryEmailDestroy(this.get("sessionToken"),e)},resendEmailCode:function(e){return this._fxaClient.resendEmailCode(this.get("sessionToken"),e)},getEmails:function(){return this._fxaClient.getEmails(this.get("sessionToken"))},createEmail:function(e){return this._fxaClient.createEmail(this.get("sessionToken"),e)},deleteEmail:function(e){return this._fxaClient.deleteEmail(this.get("sessionToken"),e)},setPrimaryEmail:function(e){return this._fxaClient.recoveryEmailSetPrimaryEmail(this.get("sessionToken"),e)},createTotpToken:function(){return this._fxaClient.createTotpToken(this.get("sessionToken"),{metricsContext:this._metrics.getFlowEventMetadata()})},deleteTotpToken:function(){return this._fxaClient.deleteTotpToken(this.get("sessionToken"))},verifyTotpCode:function(e,t){var n={metricsContext:this._metrics.getFlowEventMetadata(),service:t};return this._fxaClient.verifyTotpCode(this.get("sessionToken"),e,n)},checkTotpTokenExists:function(){return this._fxaClient.checkTotpTokenExists(this.get("sessionToken"))},consumeRecoveryCode:function(e){return this._fxaClient.consumeRecoveryCode(this.get("sessionToken"),e,{metricsContext:this._metrics.getFlowEventMetadata()})},replaceRecoveryCodes:function(){return this._fxaClient.replaceRecoveryCodes(this.get("sessionToken"))},createRecoveryBundle:function(e){return this._fxaClient.createRecoveryBundle(this.get("email"),e,this.get("sessionToken"),this.get("uid"))},deleteRecoveryKey:function(){return this._fxaClient.deleteRecoveryKey(this.get("sessionToken"))},checkRecoveryKeyExists:function(){return this._fxaClient.recoveryKeyExists(this.get("sessionToken"))},checkRecoveryKeyExistsByEmail:function(){return this._fxaClient.recoveryKeyExists(void 0,this.get("email"))},passwordForgotVerifyCode:function(e,t,n){return this._fxaClient.passwordForgotVerifyCode(e,t,n)},getRecoveryBundle:function(e,t){return this._fxaClient.getRecoveryBundle(this.get("accountResetToken"),e,t)},resetPasswordWithRecoveryKey:function(e,t,n,i,r,o){return this._fxaClient.resetPasswordWithRecoveryKey(e,this.get("email"),t,n,i,r,{emailToHashWith:o,metricsContext:this._metrics.getFlowEventMetadata()}).then(this.set.bind(this))}},{ALLOWED_KEYS:w,PERMISSIONS_TO_KEYS:b});["getProfile","getAvatar","deleteAvatar","uploadAvatar","postDisplayName"].forEach(function(e){S.prototype[e]=function(){for(var t=this,n=arguments.length,i=Array(n),r=0;n>r;r++)i[r]=arguments[r];var o=void 0;return this.profileClient().then(function(n){var r;o=n;var s=t.get("accessToken");return(r=o[e]).call.apply(r,[o,s].concat(i))}).catch(function(n){if(h.default.is(n,"INVALID_TOKEN"))t.discardSessionToken();else if(h.default.is(n,"UNAUTHORIZED"))return t._fetchProfileOAuthToken().then(function(){var n,r=t.get("accessToken");return(n=o[e]).call.apply(n,[o,r].concat(i))}).catch(function(e){throw h.default.is(e,"UNAUTHORIZED")&&t.unset("accessToken"),e});throw n})}}),a.default.mixin(S,p.default),e.exports=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(2)),s=i(n(16)),a=i(n(6)),c=i(n(3)),u=i(n(41)),l=i(n(99)),d=i(n(59)),h=i(n(29)),f=i(n(33)),p=i(n(11)),g=i(n(95)),m=i(n(326)),v=a.default.prototype,_=a.default.extend({template:m.default,className:"confirm",initialize:function(){this._account=this.user.initAccount(this.model.get("account"))},getAccount:function(){return this._account},setInitialContext:function(e){var t=this.getAccount().get("email"),n=this.isSignIn(),i=this.isSignUp();e.set({canGoBack:n&&this.canGoBack(),email:t,escapedEmail:'<span class="email">'+r.default.escape(t)+"</span>",isSignIn:n,isSignUp:i})},_getMissingSessionTokenScreen:function(){return this.isSignUp()?"signup":"signin"},beforeRender:function(){this.getAccount().get("sessionToken")||this.navigate(this._getMissingSessionTokenScreen())},afterVisible:function(){var e=this,t=this.getAccount();return v.afterVisible.call(this).then(function(){return e.broker.persistVerificationData(t)}).then(function(){return e.invokeBrokerMethod("beforeSignUpConfirmationPoll",t)}).then(function(){return e.waitForSessionVerification(t,function(){return e._gotoNextScreen()})})},_gotoNextScreen:function(){var e=this,t=this.getAccount();return this.user.setAccount(t).then(function(){e.logViewEvent("verification.success"),e.notifier.trigger("verification.success");var n=e.isSignUp()?"afterSignUpConfirmationPoll":"afterSignInConfirmationPoll";return e.invokeBrokerMethod(n,t)})},resend:function(){var e=this,t=this.getAccount();return t.retrySignUp(this.relier,{resume:this.getStringifiedResumeToken(t)}).catch(function(t){if(o.default.is(t,"INVALID_TOKEN"))return e.navigate("signup",{error:t});throw t})}});c.default.mixin(_,s.default,u.default,l.default,d.default,(0,h.default)(),f.default,p.default,g.default),e.exports=_},function(e,t,n){"use strict";var i,r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};void 0===(i=function(e,t,i){var s=n(3),a=n(41),c=n(19),u=n(10),l=n(7),d=n(5),h=d.MARKETING_ID_AUTUMN_2016,f=d.SYNC_SERVICE,p=d.UTM_SOURCE_EMAIL,g=n(44),m=n(100),v=n(101),_=n(328),y=n(12),w=n(20),E=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,l),r(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._createView=t.createView,this.template=_,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this,t)}},{key:"showChildView",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$(".child-view").append("<div>"),n.el=this.$(".child-view > div");var i=this._createView(e,n);return i.render().then(function(){return t.trackChildView(i)})}},{key:"beforeRender",value:function(){var e=this,t=this.getAccount();return this.getEligibleSmsCountry(t).then(function(n){if(n)return e.replaceCurrentPageWithSmsScreen(t,n,e._showSuccessMessage())})}},{key:"afterRender",value:function(){var e={marketingId:h};return(this._isSignedIn()&&this.getUserAgent().isFirefoxAndroid()||this.getUserAgent().isFirefoxIos())&&(e.which=m.WHICH.BOTH),this.createMarketingSnippet(e)}},{key:"afterVisible",value:function(){return this._logViewMetrics(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"afterVisible",this).call(this)}},{key:"getAccount",value:function(){return this.model.get("account")||this.model.set("account",this.user.getSignedInAccount()),this.model.get("account")}},{key:"_logViewMetrics",value:function(){var e=this._isSignedIn();this.logFlowEvent("signedin."+e);var t=this.getContext(),n=t.isFirefoxAndroid,i=t.isFirefoxDesktop,r=t.isFirefoxIos,o=t.isOther,s=t.isOtherAndroid,a=t.isOtherIos,c=void 0;t.canSignIn?(this.logFlowEvent("signin.eligible"),n?c="signin_from.fx_android":i&&(c="signin_from.fx_desktop")):(this.logFlowEvent("signin.ineligible"),r?c="signin_from.fx_ios":n?c="install_from.fx_android":i?c="install_from.fx_desktop":s?c="install_from.other_android":a?c="install_from.other_ios":o&&(c="install_from.other")),c&&this.logFlowEvent(c)}},{key:"setInitialContext",value:function(e){var t=this._isSignedIn(),n=this._canSignIn(),i=this.getAccount().get("email"),r=this._getEscapedSignInUrl(i),o=this.getUserAgent(),s=o.supportsSvgTransformOrigin()?"graphic-connect-another-device-hearts":"graphic-connect-another-device",a=o.isAndroid(),c=o.isFirefoxAndroid(),u=o.isFirefoxDesktop(),l=o.isFirefoxIos(),d=o.isIos(),h=a&&!c,f=d&&!l,p=!a&&!d&&!u,g=this.isSignIn(),m=this.isSignUp(),v=this._showSuccessMessage();e.set({canSignIn:n,email:i,escapedSignInUrl:r,graphicId:s,isFirefoxAndroid:c,isFirefoxDesktop:u,isFirefoxIos:l,isOther:p,isOtherAndroid:h,isOtherIos:f,isSignedIn:t,isSignIn:g,isSignUp:m,showSuccessMessage:v})}},{key:"_isSignedIn",value:function(){return this.user.isSignedInAccount(this.getAccount())||this.broker.get("isVerificationSameBrowser")}},{key:"_canSignIn",value:function(){return!this._isSignedIn()&&this.isSyncAuthSupported()}},{key:"_showSuccessMessage",value:function(){return!!this.model.get("showSuccessMessage")||!!this.getSearchParam("showSuccessMessage")}},{key:"_getEscapedSignInUrl",value:function(t){return this.getEscapedSyncUrl("signin",e.ENTRYPOINT,{email:t,utm_source:p})}}],[{key:"ENTRYPOINT",get:function(){return"fxa:connect_another_device"}}]),e}();s.mixin(E,a,c,u,g({autocreate:!1,service:f}),v,y,w),i.exports=E}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(16),s=n(6),a=n(3),c=n(26),u=n(329),l=s.extend({constructor:function(e){s.call(this,e),this._Storage=e.Storage||c},template:u,className:"cookies-disabled",events:{"click #submit-btn":"backIfLocalStorageEnabled"},backIfLocalStorageEnabled:function(){if(!this._Storage.isLocalStorageEnabled())return this.displayError(r.toError("COOKIES_STILL_DISABLED"));this.back()}});a.mixin(l,o),i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=i(n(0)),s=i(n(2)),a=n(6),c=i(n(3)),u=i(n(7)),l=i(n(53)),d=i(n(32)),h=i(n(105)),f=i(n(11)),p=i(n(335)),g=i(n(70)),m=i(n(9)),v={email:m.default.email().required(),uid:m.default.uid().allow(null)},_=h.default.prototype,y=h.default.extend({template:p.default,className:"force-auth",afterSignInBrokerMethod:"afterForceAuth",afterSignInNavigateData:{clearQueryParams:!0},_getAndValidateAccountData:function(){var e={},t=this.relier;return["email","uid"].forEach(function(n){t.has(n)&&(e[n]=t.get(n))}),g.default.transformUsingSchema(e,v,s.default)},beforeRender:function(){var e,t=this;try{e=this._getAndValidateAccountData()}catch(e){return this.fatalError(e),!1}var n=this.user.initAccount({email:e.email,uid:e.uid});return e.uid?Promise.all([this.user.checkAccountEmailExists(n),this.user.checkAccountUidExists(n)]).then(function(e){var i=r(e,2);return i[0]?i[1]?void 0:t._signInIfUidChangeSupported(n):t._signUpIfUidChangeSupported(n)}):this.user.checkAccountEmailExists(n).then(function(e){if(!e)return t._navigateToForceSignUp(n)})},_signUpIfUidChangeSupported:function(e){if(this.broker.hasCapability("allowUidChange"))return this._navigateToForceSignUp(e);this.model.set("error",s.default.toError("DELETED_ACCOUNT"))},_signInIfUidChangeSupported:function(){this.broker.hasCapability("allowUidChange")||this.model.set("error",s.default.toError("DELETED_ACCOUNT"))},_navigateToForceSignUp:function(e){return this.broker.setBehavior("beforeSignUpConfirmationPoll",new l.default),this.navigate("signup",{error:s.default.toError("DELETED_ACCOUNT"),forceEmail:e.get("email")})},_navigateToForceResetPassword:function(){return this.navigate("reset_password",{forceEmail:this.relier.get("email")})},setInitialContext:function(e){var t=this.translate("Sign in",{msgctxt:"submit button"});e.set({buttonSignInText:t,email:this.relier.get("email")})},events:o.default.extend({},h.default.prototype.events,{'click a[href="/reset_password"]':(0,a.cancelEventThen)("_navigateToForceResetPassword")}),onSignInError:function(e,t,n){if(s.default.is(n,"UNKNOWN_ACCOUNT")){if(!this.relier.has("uid"))return this._navigateToForceSignUp(e);if(this.broker.hasCapability("allowUidChange"))return this._navigateToForceSignUp(e);this.displayError(s.default.toError("DELETED_ACCOUNT"))}return _.onSignInError.call(this,e,t,n)},afterVisible:function(){var e=this.relier.get("email"),t=this.user.getAccountByEmail(e);return u.default.prototype.afterVisible.call(this),this.displayAccountProfileImage(t,{spinner:!0})}});c.default.mixin(y,d.default,f.default),e.exports=y},function(e,t,n){"use strict";var i,r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(64),s=(i=o)&&i.__esModule?i:{default:i},a=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),r(e,[{key:"afterRender",value:function(){var e=this,t=this.relier.toJSON(),n=t.email;return"email"===t.action?this.chooseEmailActionPage():Promise.resolve().then(function(){if(n){var t=e.user.initAccount({email:n});return e.user.checkAccountEmailExists(t).then(function(e){return e?"signin":"signup"},function(t){e.logError(t)})}}).then(function(t){t||(t=e.user.getChooserAccount().isDefault()?"signup":"signin"),e.replaceCurrentPage(t)})}}]),e}();e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(148)),s=i(n(16)),a=i(n(3)),c=i(n(7)),u=i(n(24)),l=i(n(338)),d=i(n(11)),h=i(n(23)),f=i(n(339)),p=i(n(20)),g=function(e){return e},m=g("%(permissionName)s (required)"),v=[{label:g("Email address"),name:"profile:email",required:!0},{label:g("Display name"),name:"profile:display_name"},{label:g("Account picture"),name:"profile:avatar",valueVisible:!1},{label:"uid",name:"profile:uid",required:!0,visible:!1}],_=c.default.extend({template:f.default,className:"permissions",initialize:function(e){this._account=this.user.initAccount(this.model.get("account")),this.type=e.type,this.onSubmitComplete=this.model.get("onSubmitComplete"),this._validatePermissions(this.relier.get("permissions")||[])},getAccount:function(){return this._account},setInitialContext:function(e){var t=this.getAccount(),n=this.relier.get("permissions"),i=this._getApplicablePermissions(t,n);e.set({unsafePermissionsHTML:this._getPermissionsHTML(t,i)})},_validatePermissions:function(e){e.forEach(function(e){this._getPermissionConfig(e)||this.logError(u.default.toError("INVALID_SCOPES",e))},this)},_getPermissionConfig:function(e){var t=r.default.findWhere(v,{name:e});return t?r.default.clone(t):null},_getApplicablePermissions:function(e,t){var n=this;return e.getPermissionsWithValues(t).map(function(e){return n._getPermissionConfig(e)?e:null}).filter(function(e){return null!==e})},_getPermissionIndex:function(e){return r.default.findIndex(v,function(t){return t.name===e})},_sortPermissions:function(e){var t=this;return[].concat(e).sort(function(e,n){return t._getPermissionIndex(e)-t._getPermissionIndex(n)})},_getPermissionsHTML:function(e,t){var n=this;return this._sortPermissions(t).map(function(t){var i=n._getPermissionConfig(t);return i.label=n.translate(i.label),!0!==i.required&&(i.required=!1),i.required&&(i.label=h.default.interpolate(n.translate(m),{permissionName:i.label})),!1!==i.valueVisible&&(i.valueVisible=!0),!1!==i.visible&&(i.visible=!0),i.value=e.get(o.default.PERMISSIONS_TO_KEYS[t]),i}).map(l.default).join("\n")},_getFormPermissions:function(){var e={};return this.$(".permission").each(function(t,n){e[n.name]=!!n.checked}),e},beforeRender:function(){if(this.getAccount().get("sessionToken")){var e=this.getAccount();return e.get("verified")?e.fetchProfile():void 0}this.navigate(this._previousView())},submit:function(){var e=this.getAccount();return this.logViewEvent("accept"),e.setClientPermissions(this.relier.get("clientId"),this._getFormPermissions()),this.user.setAccount(e).then(this.onSubmitComplete)},_previousView:function(){return this.isSignUp()?"/signup":"/signin"}},{PERMISSIONS:v});a.default.mixin(_,s.default,d.default,p.default),e.exports=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(3)),s=i(n(5)),a=i(n(19)),c=i(n(10)),u=i(n(7)),l=i(n(44)),d=i(n(59)),h=i(n(11)),f=i(n(340)),p=i(n(20)),g=function(e){return e},m={FORCE_AUTH:{headerId:"fxa-force-auth-complete-header",headerTitle:g("Welcome back"),readyToSyncText:g("Firefox Sync will resume momentarily")},PASSWORD_RESET:{headerId:"fxa-reset-password-complete-header",headerTitle:g("Your password has beenÂ reset"),readyToSyncText:g("Complete set-up by entering the new password on your other Firefox devices.")},PASSWORD_RESET_WITH_RECOVERY_KEY:{headerId:"fxa-reset-password-complete-header",headerTitle:g("Your password has beenÂ reset"),readyToSyncText:g("Complete set-up by entering the new password on your other Firefox devices.")},PRIMARY_EMAIL_VERIFIED:{emailReadyText:g("You are now ready to make changes to your Firefox Account."),headerId:"fxa-sign-up-complete-header",headerTitle:g("Primary email verified")},SECONDARY_EMAIL_VERIFIED:{emailReadyText:g("Account notifications will now also be sent to %(secondaryEmailVerified)s."),headerId:"fxa-sign-up-complete-header",headerTitle:g("Secondary email verified")},SIGN_IN:{headerId:"fxa-sign-in-complete-header",headerTitle:g("Sign-in confirmed"),readyToSyncText:g("You are now ready to use %(serviceName)s")},SIGN_UP:{headerId:"fxa-sign-up-complete-header",headerTitle:g("Account verified"),readyToSyncText:g("You are now ready to use %(serviceName)s")}},v=u.default.extend({template:f.default,className:"ready",events:r.default.extend({},u.default.prototype.events,{"click .btn-continue":u.default.preventDefaultThen("continue"),"click .btn-create-recovery-key":u.default.preventDefaultThen("createRecoveryKey"),"click .btn-goto-account":u.default.preventDefaultThen("gotoSettings")}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._templateInfo=m[this.keyOfVerificationReason(e.type)],this.type=e.type},setInitialContext:function(e){e.set({emailVerified:this.getSearchParam("secondary_email_verified")||this.getSearchParam("primary_email_verified"),escapedEmailReadyText:this._getEscapedEmailReadyText(),escapedHeaderTitle:this._getEscapedHeaderTitle(),escapedReadyToSyncText:this._getEscapedReadyToSyncText(),headerId:this._getHeaderId(),isPasswordReset:this.isPasswordReset(),isSync:this.relier.isSync(),secondaryEmailVerified:this.getSearchParam("secondary_email_verified")||null,showContinueButton:!!this.model.get("continueBrokerMethod")})},continue:function(){var e=this;return Promise.resolve().then(function(){var t=e.model.toJSON(),n=t.account,i=t.continueBrokerMethod;if(i&&n)return e.invokeBrokerMethod(i,n)}).catch(function(t){return e.displayError(t)})},createRecoveryKey:function(){this.navigate("settings/account_recovery/confirm_password")},gotoSettings:function(){this.navigate("settings")},isPasswordReset:function(){return"reset_password_with_recovery_key"===this.type},_getHeaderId:function(){return this._templateInfo.headerId},_getEscapedHeaderTitle:function(){return this.translateInTemplate(this._templateInfo.headerTitle)},_getEscapedReadyToSyncText:function(){return this.translateInTemplate(this._templateInfo.readyToSyncText)},_getEscapedEmailReadyText:function(){return this.translateInTemplate(this._templateInfo.emailReadyText)}});o.default.mixin(v,a.default,c.default,(0,l.default)({marketingId:s.default.MARKETING_ID_SPRING_2015}),d.default,h.default,p.default),e.exports=v},function(e,t,n){"use strict";var i,r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),s=(i=o)&&i.__esModule?i:{default:i},a=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),r(e,[{key:"beforeRender",value:function(){var e=this.relier.get("action");e?this.replaceCurrentPage("email"===e?"/oauth/":e):this.replaceCurrentPage("/oauth/")}}]),e}();e.exports=a},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(5),s=n(7),a=n(344),c=n(345),u=s.extend({className:"report-sign-in",template:a,initialize:function(){this._signInToReport=new c(this.getSearchParams())},beforeRender:function(){this._signInToReport.isValid()||this.logError(r.toError("DAMAGED_REJECT_UNBLOCK_LINK"))},submit:function(){var e=this,t=this._signInToReport,n=this.user.initAccount({uid:t.get("uid")}),i=t.get("unblockCode");return this.user.rejectAccountUnblockCode(n,i).then(function(){return e.navigate("signin_reported")})},setInitialContext:function(e){var t=!this._signInToReport.isValid(),n=!t,i=this._getSupportLink();e.set({escapedSupportLink:encodeURI(i),hasSupportLink:!!i,isLinkDamaged:t,isLinkValid:n})},_getSupportLink:function(){return o.BLOCKED_SIGNIN_SUPPORT_URL}});i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(16),s=n(3),a=n(10),c=n(7),u=n(32),l=n(6).preventDefaultThen,d=n(11),h=n(27),f=n(346),p=c.extend({events:{"click .remember-password":l("_rememberPassword")},initialize:function(e){this.template=f,this.className="reset_password",this._formPrefill=e.formPrefill,c.prototype.initialize.call(this,e)},setInitialContext:function(e){e.set({forceEmail:this.model.get("forceEmail")}),c.prototype.setInitialContext.call(this,e)},beforeRender:function(){var e=this,t=this.relier.get("email");if(!1===this.relier.get("resetPasswordConfirm")&&t)return this._resetPassword(t).then(function(){return!1}).catch(function(t){e.model.set("error",t)});c.prototype.beforeRender.call(this)},beforeDestroy:function(){var e=this.getElementValue(".email");e&&this._formPrefill.set({email:e})},submit:function(){return this._resetPassword(this.getElementValue(".email"))},_rememberPassword:function(){this.model.get("forceEmail")?this.navigate("force_auth"):this.navigate("signin")},_resetPassword:function(e){var t=this;return this.resetPassword(e).catch(function(e){if(h.clear("oauth"),r.is(e,"UNKNOWN_ACCOUNT"))return e.forceMessage='Unknown account. <a href="/signup">Sign up</a>',t.unsafeDisplayError(e);if(!r.is(e,"USER_CANCELED_LOGIN"))throw e;t.logEvent("login.canceled")})}});s.mixin(p,o,a,u,d),i.exports=p}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(78),s=n(83),a=n(84),c=n(86),u=n(87),l=n(89),d=n(92),h=n(93),f=n(15),p=n(160),g=n(6),m=n(94),v=n(96),_=n(97),y=n(3),w=n(98),E=n(102),b=n(103),S=n(30),I=n(104),A=n(72);n(207);var C=n(27),T=n(348),x=n(58),k=n(161),O=n(350),P=n(12),R=[p,b,I,s,a,c,u,n(109),n(108),_,v,w,m,E,d,h,l],N=g.prototype,M=g.extend({template:O,className:"settings",layoutClassName:"settings",viewName:"settings",mustVerify:!0,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._childView=e.childView,this._createView=e.createView,this._experimentGroupingRules=e.experimentGroupingRules,this._marketingEmailEnabled=!1!==e.marketingEmailEnabled;var t=this.relier.get("uid");this.notifier.trigger("set-uid",t),this.user.getAccountByUid(t).isDefault()?t&&(C.clear(),this.user.clearSignedInAccount(),this.logViewEvent("signout.forced")):this.user.setSignedInAccountByUid(t)},notifications:{"navigate-from-child-view":"_onNavigateFromChildView"},setInitialContext:function(e){var t=this.getSignedInAccount();e.set({showSignOut:!t.isFromSync(),unsafeHeaderHTML:this._getHeaderHTML(t)})},events:{"click #signout":g.preventDefaultThen("signOut")},onProfileUpdate:function(){this._showAvatar()},showChildView:function(e,t){return this._subPanels.showChildView(e,t)},_onNavigateFromChildView:function(){r.modal.isActive()?r.modal.close():0>this.currentPage.indexOf("settings")||r(".settings-unit").removeClass("open"),this.displayStatusMessages()},beforeRender:function(){var e=this,t=this.getSignedInAccount();return t.fetchProfile().then(function(){return e.user.setAccount(t)})},_onAccountUpdate:function(e){this.$("#fxa-settings-profile-header").html(this._getHeaderHTML(e))},_getHeaderHTML:function(e){return T(e.pick("displayName","email"))},afterRender:function(){var e=this.getSignedInAccount();return this.listenTo(e,"change:displayName",this._onAccountUpdate),this.listenTo(e,"change:email",this._onAccountUpdate),this.logViewEvent("communication-prefs-link.visible."+this._areCommunicationPrefsVisible()),this._initializeSubPanels(this.$("#sub-panels")[0]).render().then(N.afterRender.bind(this))},afterVisible:function(){return"avatar"===this.relier.get("setting")&&(this.relier.set("setting",null),this.navigate("settings/avatar/change")),N.afterVisible.call(this).then(this._showAvatar.bind(this))},_setupAvatarChangeLinks:function(){this.supportsAvatarUpload()?this.$(".avatar-wrapper > *").wrap('<a href="/settings/avatar/change" class="change-avatar"></a>'):this.$(".avatar-wrapper").addClass("nohover")},_showAvatar:function(){var e=this,t=this.getSignedInAccount();return this.displayAccountProfileImage(t).then(function(){return e._setupAvatarChangeLinks()})},_initializeSubPanels:function(e){return this._subPanels||(this._subPanels=new k({createView:this._createView,el:e,initialChildView:this._childView,panelViews:this._getPanelsToDisplay(),parent:this})),this._subPanels},_getPanelsToDisplay:function(){var e=this._areCommunicationPrefsVisible();return R.filter(function(t){return t!==w||e})},_areCommunicationPrefsVisible:function(){return!!this._marketingEmailEnabled&&(!!this._experimentGroupingRules.choose("communicationPrefsVisible",{lang:this.navigator.language})&&!this.getUserAgent().isFirefoxIos())},signOut:o(function(){var e=this,t=this.getSignedInAccount();return this.logViewEvent("signout.submit"),this.user.signOutAccount(t).catch(function(){e.logViewEvent("signout.error")}).then(function(){e.logViewEvent("signout.success"),e.clearSessionAndNavigateToSignIn()})}),SUCCESS_MESSAGE_DELAY_MS:new S("5s").milliseconds(),displaySuccess:function(){var e=this;return this.clearTimeout(this._successTimeout),this._successTimeout=this.setTimeout(function(){e.hideSuccess()},this.SUCCESS_MESSAGE_DELAY_MS),g.prototype.displaySuccess.apply(this,arguments)},unsafeDisplaySuccess:function(){var e=this;return this.clearTimeout(this._successTimeout),this._successTimeout=this.setTimeout(function(){e.hideSuccess()},this.SUCCESS_MESSAGE_DELAY_MS),g.prototype.unsafeDisplaySuccess.apply(this,arguments)}});y.mixin(M,f,A,x,P),i.exports=M}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(15),o=n(3),s=n(7),a=n(14),c=n(347),u=s.extend({template:c,className:"avatar",viewName:"settings.avatar",beforeRender:function(){this.supportsAvatarUpload()||this.remove()},onProfileUpdate:function(){this.render()},setInitialContext:function(e){var t=this.getSignedInAccount();e.set("avatarDefault",t.get("profileImageUrlDefault"))}});o.mixin(u,r,a),i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(6),s=n(18),a=n(349),c=o.prototype,u=o.extend({template:a,className:"sub-panels",initialize:function(e){this._panelViews=(e=e||{}).panelViews||[],this._parent=e.parent,this._createView=e.createView,this._logger=new s},showChildView:function(e,t){var n=this;return-1===this._panelViews.indexOf(e)?(this._logger.warn("Tried to show a view that is not a subpanel"),Promise.resolve(null)):this._createChildViewIfNeeded(e,t).then(function(e){if(e)return n._currentChildView=e,e.openPanel(),e})},_childViewInstanceFromClass:function(e){return this.childViews.filter(function(t){if(t instanceof e)return!0})[0]},_isModalView:function(e){return!!e.prototype.isModal},_childViewClassName:function(e){return e.prototype.className},_createChildViewIfNeeded:function(e,t){t=t||{};var n=this._childViewInstanceFromClass(e);if(n)return Promise.resolve(n);var i=this._childViewClassName(e),o="."+i;this.$(".child-views").append('<div class="settings-child-view '+i+'"></div>');var s=new r.Model;t.model&&s.set(t.model.toJSON());var a=this._createView(e,{el:this.$(o),model:s,parentView:this._parent});return this.trackChildView(a),this.renderChildView(a)},renderChildView:function(e){return e.render().then(function(t){if(t)return e.afterVisible(),e;e.destroy(!0)})},afterRender:function(){var e=this,t=this._panelViews.filter(function(t){return!e._isModalView(t)});return Promise.all(t.map(function(t){return e._createChildViewIfNeeded(t)})).then(c.afterRender.bind(this))}});i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(16),o=n(6),s=n(3),a=n(10),c=n(27),u=n(352),l=o.extend({events:{"click #create-account":"_createAccount"},template:u,initialize:function(e){this._formPrefill=e.formPrefill},beforeRender:function(){this.model.has("email")||this.navigate("signin")},setInitialContext:function(e){e.set({email:this.model.get("email"),escapedSupportLinkAttrs:'id="support" href="https://support.mozilla.org/" target="_blank" data-flow-event="link.support"'})},_createAccount:o.preventDefaultThen(function(){this.user.removeAllAccounts(),c.clear(),this._formPrefill.clear(),this.navigate("signup")})});s.mixin(l,r,a),i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(60)),o=n(0),s=i(n(2)),a=i(n(61)),c=i(n(3)),u=i(n(10)),l=i(n(22)),d=i(n(7)),h=i(n(17)),f=n(6),p=i(n(11)),g=i(n(45)),m=i(n(353)),v=i(n(164)),_=d.default.extend({template:m.default,events:(0,o.assign)({},d.default.prototype.events,{"click .use-different":(0,f.preventDefaultThen)("useDifferentAccount")}),useDifferentAccount:function(){this.navigate("/",{account:this.getAccount()})},getAccount:function(){return this.model.get("account")},beforeRender:function(){this.getAccount()||this.navigate("/")},setInitialContext:function(e){var t=this.getAccount();e.set({email:t.get("email"),isPasswordNeeded:this.isPasswordNeededForAccount(t)})},submit:function(){var e=this,t=this.getAccount();if(this.isPasswordNeededForAccount(t)){var n=this.getElementValue("input[type=password]");return this.signIn(t,n).catch(function(i){return e.onSignInError(t,n,i)})}return this.useLoggedInAccount(t)},onSignInError:function(e,t,n){if(!s.default.is(n,"USER_CANCELED_LOGIN")){if(s.default.is(n,"ACCOUNT_RESET"))return this.notifyOfResetAccount(e);if(s.default.is(n,"INCORRECT_PASSWORD"))return this.showValidationError(this.$("input[type=password]"),n);throw n}this.logViewEvent("canceled")}});c.default.mixin(_,r.default,a.default,u.default,l.default,h.default,p.default,g.default,v.default),e.exports=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(15)),o=i(n(354));t.default={dependsOn:[r.default],afterVisible:function(){var e=this,t=this.getAccount();return this.listenTo(t,"change:accessToken",function(){return e._onAccessTokenChange()}),this.displayAccountProfileImage(t,{spinner:!0})},setInitialContext:function(e){e.set({userCardHTML:this.renderTemplate(o.default,{email:this.getAccount().get("email")})})},_onAccessTokenChange:function(){this.getAccount().has("accessToken")||this.setDefaultPlaceholderAvatar()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2)),o=i(n(3)),s=i(n(7)),a=i(n(11)),c=i(n(355)),u=s.default.extend({className:"sign-in-recovery-code",template:c.default,viewName:"sign_in_recovery_code",beforeRender:function(){var e=this.getSignedInAccount();e&&e.get("sessionToken")||this.navigate(this._getAuthPage())},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue("input.recovery-code").toLowerCase();return t.consumeRecoveryCode(n).then(function(n){return 2>n.remaining?e.navigate("/settings/two_step_authentication/recovery_codes",{previousViewName:e.viewName}):(e.logViewEvent("success"),e.invokeBrokerMethod("afterCompleteSignInWithCode",t))}).catch(function(t){r.default.is(t,"INVALID_PARAMETER")&&(t=r.default.toError("INVALID_RECOVERY_CODE")),e.showValidationError(e.$("input.recovery-code"),t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"}});o.default.mixin(u,a.default),e.exports=u},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(6),o=n(356);i.exports=r.extend({template:o})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(5)),o=i(n(7)),s=i(n(357)),a=o.default.extend({className:"sign-in-token-code",template:s.default,getAccount:function(){return this.model.get("account")},beforeRender:function(){this.model.get("account")||this.navigate(this._getAuthPage())},setInitialContext:function(e){var t=this.getAccount().get("email"),n=r.default.BLOCKED_SIGNIN_SUPPORT_URL;e.set({email:t,escapedSupportLink:encodeURI(n),hasSupportLink:!!n})},submit:function(){var e=this,t=this.getAccount(),n=this.getElementValue("input.token-code");return t.verifyTokenCode(n).then(function(){return e.logViewEvent("success"),e.invokeBrokerMethod("afterCompleteSignInWithCode",t)}).catch(function(t){return e.showValidationError(e.$("input.token-code"),t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"}});e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2)),o=i(n(3)),s=i(n(7)),a=i(n(11)),c=i(n(358)),u=i(n(20)),l=i(n(10)),d=s.default.extend({className:"sign-in-totp-code",template:c.default,getAccount:function(){return this.model.get("account")||this.getSignedInAccount()},beforeRender:function(){var e=this.getAccount();e&&e.get("sessionToken")||this.navigate(this._getAuthPage())},submit:function(){var e=this,t=this.getAccount(),n=this.getElementValue("input.totp-code");return t.verifyTotpCode(n,this.relier.get("service")).then(function(n){if(n.success)return e.logFlowEvent("success",e.viewName),e.invokeBrokerMethod("afterCompleteSignInWithCode",t);throw r.default.toError("INVALID_TOTP_CODE")}).catch(function(t){return e.showValidationError(e.$("input.totp-code"),t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"}});o.default.mixin(d,l.default,a.default,u.default),e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2)),o=i(n(3)),s=i(n(5)),a=i(n(7)),c=i(n(29)),u=i(n(33)),l=i(n(45)),d=i(n(359)),h=a.default.extend({template:d.default,className:"sign-in-unblock",getAccount:function(){return this.model.get("account")},beforeRender:function(){this.model.get("account")||this.navigate(this._getAuthPage())},setInitialContext:function(e){var t=this.getAccount().get("email"),n=this._getSupportLink();e.set({email:t,escapedSupportLink:encodeURI(n),hasSupportLink:!!n,unblockCodeLength:s.default.UNBLOCK_CODE_LENGTH})},submit:function(){var e=this,t=this.getAccount(),n=this.model.get("password"),i=this.getElementValue("#unblock_code");return this.signIn(t,n,{unblockCode:i}).catch(function(i){return e.onSignInError(t,n,i)})},onSignInError:function(e,t,n){if(!r.default.is(n,"INCORRECT_PASSWORD"))throw n;this.navigate(this._getAuthPage(),{email:e.get("email"),error:n})},resend:function(){return this._sendUnblockEmail()},_sendUnblockEmail:function(){var e=this;return this.getAccount().sendUnblockEmail().catch(function(t){return e.displayError(t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"},_getSupportLink:function(){return s.default.BLOCKED_SIGNIN_SUPPORT_URL}});o.default.mixin(h,(0,c.default)(),u.default,l.default),e.exports=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),o=i(n(2)),s=i(n(3)),a=i(n(65)),c=i(n(110)),u=i(n(10)),l=i(n(22)),d=i(n(7)),h=i(n(17)),f=i(n(57)),p=n(6),g=i(n(11)),m=i(n(111)),v=i(n(360)),_=d.default.prototype,y=d.default.extend({template:v.default,events:(0,r.assign)({},d.default.prototype.events,{"click .use-different":(0,p.preventDefaultThen)("useDifferentAccount")}),useDifferentAccount:function(){this.navigate("/",{account:this.getAccount()})},getAccount:function(){return this.model.get("account")},beforeRender:function(){this.getAccount()||this.navigate("/")},setInitialContext:function(e){e.set(this.getAccount().pick("email"))},isValidEnd:function(){return!!this._doPasswordsMatch()&&_.isValidEnd.call(this)},showValidationErrorsEnd:function(){this._doPasswordsMatch()||this.displayError(o.default.toError("PASSWORDS_DO_NOT_MATCH"))},submit:function(){var e=this;return Promise.resolve().then(function(){if(!e.isUserOldEnough())return e.tooYoung();var t=e.getAccount();return t.set("needsOptedInToMarketingEmail",e.hasOptedInToMarketingEmail()),e.signUp(t,e._getPassword())})},_getPassword:function(){return this.getElementValue("#password")},_getVPassword:function(){return this.getElementValue("#vpassword")},_doPasswordsMatch:function(){return this._getPassword()===this._getVPassword()}});s.default.mixin(y,(0,a.default)({required:!0}),c.default,u.default,l.default,h.default,(0,f.default)({balloonEl:".helper-balloon",passwordEl:"#password"}),g.default,m.default),e.exports=y},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(60),o=n(2),s=n(3),a=n(65),c=n(62),u=n(110),l=n(19),d=n(63),h=n(22),f=n(7),p=n(361),g=n(17),m=n(11),v=n(106),_=n(45),y=n(111),w=n(172),E=n(363),b=function(e){return e},S=f.prototype,I=f.extend({template:E,className:"sign-up",beforeRender:function(){var e=this.model.get("error");return e&&o.is(e,"DELETED_ACCOUNT")&&(e.forceMessage=b("Account no longer exists. Recreate it?")),S.beforeRender.call(this)},afterRender:function(){var e=this._selectAutoFocusEl();return this.$(e).attr("autofocus","autofocus"),S.afterRender.call(this)},afterVisible:function(){return this.model.get("bouncedEmail")&&this.showValidationError("input[type=email]",o.toError("SIGNUP_EMAIL_BOUNCE")),this.broker.isAutomatedBrowser()&&this.$el.find("input[type=password]").click(function(){this.onEmailBlur()}.bind(this)),S.afterVisible.call(this)},events:{"blur input.email":"onEmailBlur"},getPrefillEmail:function(){return this.formPrefill.get("email")||this.relier.get("email")},_selectAutoFocusEl:function(){var e=this.model.get("forceEmail")||this.getPrefillEmail(),t=this.formPrefill.get("password");return this.model.get("bouncedEmail")?"input[type=email]":e?t?"#age":"input[type=password]":"input[type=email]"},setInitialContext:function(e){var t=this.model.get("forceEmail"),n=this.getPrefillEmail(),i=this.relier,r=i.isSync();e.set({chooseWhatToSyncCheckbox:this.broker.hasCapability("chooseWhatToSyncCheckbox"),email:n,error:this.error,forceEmail:t,isCustomizeSyncChecked:i.isCustomizeSyncChecked(),isSignInEnabled:!t,isSync:r})},isValidEnd:function(){return!!this._doPasswordsMatch()&&(!this._isEmailSameAsBouncedEmail()&&(!this._isEmailFirefoxDomain()&&f.prototype.isValidEnd.call(this)))},showValidationErrorsEnd:function(){this._doPasswordsMatch()?this._isEmailSameAsBouncedEmail()?this.showValidationError("input[type=email]",o.toError("DIFFERENT_EMAIL_REQUIRED")):this._isEmailFirefoxDomain()&&this.showValidationError("input[type=email]",o.toError("DIFFERENT_EMAIL_REQUIRED_FIREFOX_DOMAIN")):this.displayError(o.toError("PASSWORDS_DO_NOT_MATCH"))},submit:function(){var e=this;return this.notifier.trigger("signup.submit"),Promise.resolve().then(function(){var t=e._initAccount(),n=e.getElementValue("#password");return e.isUserOldEnough()?e._signUp(t,n):e._signIn(t,n)}).catch(function(t){if(!o.is(t,"USER_CANCELED_LOGIN"))throw t;e.logEvent("login.canceled")})},_checkMailcheckResult:function(){var e=this.$el.find(".email"),t=e.val(),n=e.data("mailcheckValue");t.length>0&&n===t&&this.logEvent("mailcheck.corrected")},_signUp:function(e,t){return this._checkMailcheckResult(this),this.signUp(e,t).catch(this.onSignUpError.bind(this,e,t))},onSignUpError:function(e,t,n){if(o.is(n,"ACCOUNT_ALREADY_EXISTS"))return this._signIn(e,t);throw n},_signIn:function(e,t){return this.signIn(e,t).catch(this.onSignInError.bind(this,e,t))},onSignInError:function(e,t,n){if(o.is(n,"INCORRECT_PASSWORD"))return this._suggestSignIn(n);if(o.is(n,"UNKNOWN_ACCOUNT"))return this.coppaHasValue()?this.tooYoung():void this.showValidationError(this.$("#age"),o.toError("AGE_REQUIRED"));if(o.is(n,"ACCOUNT_RESET"))return this.notifyOfResetAccount(e);throw n},onEmailBlur:function(){p(this.$el.find(".email"),this)},_isEmailSameAsBouncedEmail:function(){var e=this.model.get("bouncedEmail");return e&&e===this.getElementValue("input[type=email]")},_isEmailFirefoxDomain:function(){var e=this.getElementValue(".email");return/@firefox(\.com)?$/.test(e)},_doPasswordsMatch:function(){return this.getElementValue("#password")===this.getElementValue("#vpassword")},_initAccount:function(){var e=this.user.initAccount({customizeSync:this.$(".customize-sync").is(":checked"),email:this.getElementValue(".email"),needsOptedInToMarketingEmail:this.hasOptedInToMarketingEmail()});if(this.relier.isSync()){var t=e.get("customizeSync");this.logViewEvent("customizeSync."+t)}return e},_suggestSignIn:function(e){return e.forceMessage=b('Account already exists. <a href="/signin">Sign in</a>'),this.unsafeDisplayError(e)}},{ENTRYPOINT:"fxa:signup"});s.mixin(I,r,a({required:!1}),c({treatmentPathname:"/"}),u,l,d,h,g,m,_,y,v,w({entrypoint:I.ENTRYPOINT,flowEvent:"link.signin",pathname:"signup"})),i.exports=I}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(5)),o=i(n(10)),s=i(n(55)),a=i(n(101)),c=i(n(362));e.exports=function(e){return(0,s.default)(e.entrypoint,"entrypoint"),(0,s.default)(e.flowEvent,"flowEvent"),(0,s.default)(e.pathname,"pathname"),{dependsOn:[o.default,a.default],events:{"click #suggest-sync .dismiss":"onSuggestSyncDismiss"},afterVisible:function(){this.isSyncSuggestionEnabled()&&this.logViewEvent("sync-suggest.visible")},setInitialContext:function(t){var n=void 0;n=this.isSyncAuthSupported()?this.getEscapedSyncUrl(e.pathname,e.entrypoint):encodeURI(r.default.MOZ_ORG_SYNC_GET_STARTED_LINK);var i=this.renderTemplate(c.default,{escapedSyncSuggestionAttrs:'data-flow-event="'+e.flowEvent+'" href="'+n+'"',showSyncSuggestion:this.isSyncSuggestionEnabled()});t.set({syncSuggestionHTML:i})},isSyncSuggestionEnabled:function(){return!this.relier.get("service")},onSuggestSyncDismiss:function(){this.$("#suggest-sync").hide()}}}},function(e,t,n){"use strict";var i,r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();void 0===(i=function(e,t,i){var o=n(2),s=n(3),a=n(66),c=n(209).FIREFOX_MOBILE_INSTALL,u=n(10),l=n(22),d=n(7),h=n(5),f=h.MARKETING_ID_AUTUMN_2016,p=h.SYNC_SERVICE,g=n(44),m=n(59),v=n(112),_=n(364),y=n(12),w=n(20),E=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,d),r(e,[{key:"initialize",value:function(t){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this,t),this.mustAuth=!0,this.template=_,this._createView=t.createView}},{key:"getAccount",value:function(){return this.model.get("account")||this.user.getSignedInAccount()}},{key:"setInitialContext",value:function(t){var n='id="learn-more" href="'+encodeURI(e.LEARN_MORE_LINK)+'" target="_learn-more" data-flow-event="link.learn_more"',i=this._getCountry();a[i]||(i="US");var r=a[i].prefix,o=this.formPrefill.get("phoneNumber");o||r===a.US.prefix||(o=r);var s=this.isSignIn(),c=this.getUserAgent().supportsSvgTransformOrigin()?"graphic-connect-another-device-hearts":"graphic-connect-another-device";t.set({country:i,escapedLearnMoreAttributes:n,graphicId:c,isSignIn:s,phoneNumber:o,showSuccessMessage:this.model.get("showSuccessMessage")})}},{key:"showChildView",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$(".child-view").append("<div>"),n.el=this.$(".child-view > div");var i=this._createView(e,n);return i.render().then(function(){return t.trackChildView(i)})}},{key:"submit",value:function(){return this._sendSms(this._getNormalizedPhoneNumber(),c)}},{key:"_getCountry",value:function(){return this.relier.get("country")||this.model.get("country")||"US"}},{key:"_sendSms",value:function(e,t){var n=this;return this.getAccount().sendSms(e,t,{features:this.getSmsFeatures()}).then(function(e){return n._onSendSmsSuccess(e.formattedPhoneNumber)}).catch(function(e){return n._onSendSmsError(e)})}},{key:"_formatServerPhoneNumber",value:function(e){var t=this._getCountry();return a[t].format(e)}},{key:"_getNormalizedPhoneNumber",value:function(){var e=this._getCountry(),t=this.getElementValue("input[type=tel]");return a[e].normalize(t)}},{key:"_onSendSmsSuccess",value:function(e){var t=this._getCountry();this.navigate("sms/sent",{account:this.getAccount(),country:t,formattedPhoneNumber:this._formatServerPhoneNumber(e),normalizedPhoneNumber:this._getNormalizedPhoneNumber()})}},{key:"_onSendSmsError",value:function(e){if(!o.is(e,"INVALID_PHONE_NUMBER"))throw e;this.showValidationError(this.$("input[type=tel]"),e)}}],[{key:"LEARN_MORE_LINK",get:function(){return"https://www.mozilla.org/privacy/websites/#campaigns"}}]),e}();s.mixin(E,u,l,g({marketingId:f,service:p}),m,v,y,w),i.exports=E}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(16),s=n(6),a=n(3),c=n(209).FIREFOX_MOBILE_INSTALL,u=n(10),l=n(5).MARKETING_ID_AUTUMN_2016,d=n(44)({marketingId:l}),h=n(29)({successMessage:!1}),f=n(112),p=n(365),g=n(12),m=s.extend({template:p,mustAuth:!0,beforeRender:function(){var e;(e=this.model).has("normalizedPhoneNumber")&&e.has("formattedPhoneNumber")||this.navigate("sms")},setInitialContext:function(e){var t=this.getUserAgent().supportsSvgTransformOrigin()?"graphic-connect-another-device-hearts":"graphic-connect-another-device";e.set({escapedBackLinkAttrs:r.escape("id=back href=#"),escapedPhoneNumber:r.escape(this.model.get("formattedPhoneNumber")),graphicId:t,isResend:this.model.get("isResend")})},resend:function(){var e=this,t=this.model.get("account"),n=this.model.get("normalizedPhoneNumber");return t.sendSms(n,c,{features:this.getSmsFeatures()}).then(function(){return e.model.set("isResend",!0),e.render()})}});a.mixin(m,o,u,d,h,g,f),i.exports=m}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(16),o=n(6),s=n(3),a=n(85),c=n(366),u=o.extend({template:c,initialize:function(){var e=this;this.once("modal-cancel",function(){return e.back()})},afterRender:function(){this.openPanel()}});s.mixin(u,r,a),i.exports=u}(0,0,e))||(e.exports=i)},,,,,,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8);i.exports={write:function(e,t){r("#loading-spinner").hide(),r("#stage").html(t).addClass("fade-in-forward").css("opacity",1),e.scrollTo(0,0),r("#fox-logo").addClass("fade-in-forward").css("opacity",1)}}}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){try{return JSON.parse(atob(e))}catch(e){}}function o(e){return btoa(JSON.stringify(e))}var s=n(0),a=n(4).Model.extend({defaults:{deviceId:void 0,email:void 0,entrypoint:void 0,flowBegin:void 0,flowId:void 0,needsOptedInToMarketingEmail:void 0,resetPasswordConfirm:void 0,uniqueUserId:void 0,utmCampaign:null,utmContent:null,utmMedium:null,utmSource:null,utmTerm:null},initialize:function(e){this.allowedKeys=Object.keys(this.defaults),this.clear();var t=s.pick(e,this.allowedKeys);this.set(t)},stringify:function(){return o(this.pick(this.allowedKeys))}});s.extend(a,{createFromStringifiedResumeToken:function(e){var t=r(e);return new a(t)},parse:r,stringify:o}),i.exports=a}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(8),o=n(0),s=n(23),a=n(46),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.forceEnglish&&(this._forceEnglish=!0),this._xhr=e.xhr||a};c.prototype={__translations__:{"":{"project-id-version":"PACKAGE VERSION","report-msgid-bugs-to":"","pot-creation-date":"2019-03-01 16:03+0000","po-revision-date":"2014-09-03 08:41+0000","last-translator":"Zachary <zcarter@mozilla.com>","language-team":"LANGUAGE <LL@li.org>","language":"en","mime-version":"1.0","content-type":"text/plain; charset=UTF-8","content-transfer-encoding":"8bit","plural-forms":"nplurals=2; plural=(n != 1);","x-generator":"Pootle 2.5.0","x-pootle-mtime":"1409733678.0"},"Password reset":"","Password reset successfully. Sign in to continue.":"","Sign in":"","%(permissionName)s (required)":"","Email address":"","Display name":"","Account picture":"","Welcome back":"","Firefox Sync will resume momentarily":"","Your password has beenÂ reset":"","Complete set-up by entering the new password on your other Firefox devices.":"","You are now ready to make changes to your Firefox Account.":"","Primary email verified":"","Account notifications will now also be sent to %(secondaryEmailVerified)s.":"","Secondary email verified":"","Sign-in confirmed":"","You are now ready to use %(serviceName)s":"","Account verified":"","Unknown account. <a href=\"/signup\">Sign up</a>":"","Account no longer exists. Recreate it?":"","Account already exists. <a href=\"/signin\">Sign in</a>":"","Password changed successfully":"","We're sorry to hear about this. You should change your Firefox Account password, and look for information from your device manufacturer about erasing your data remotely.":"","We're sorry to hear about this. If this was a device you really don't trust, you should change your Firefox Account password, and change any passwords saved in Firefox.":"","Last sync %(translatedTimeAgo)s":"","Last sync over %(translatedTimeAgo)s":"","Last sync %(translatedTimeAgo)s in %(translatedCountry)s":"","Last sync over %(translatedTimeAgo)s in %(translatedCountry)s":"","Last sync %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last sync over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last active %(translatedTimeAgo)s":"","Last active over %(translatedTimeAgo)s":"","Last active %(translatedTimeAgo)s in %(translatedCountry)s":"","Last active over %(translatedTimeAgo)s in %(translatedCountry)s":"","Last active %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last active over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","%(translatedTimeAgo)s":"","Over %(translatedTimeAgo)s":"","%(translatedTimeAgo)s in %(translatedCountry)s":"","Over %(translatedTimeAgo)s in %(translatedCountry)s":"","%(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Web Session, %(userAgent)s":"","Web Session":"","Last sync time unknown":"","Subscribed successfully":"","Account deleted successfully":"","Display name updated":"","Secondary email removed":"","Verification email sent":"","Primary email set to %(email)s":"","Secondary email":"","Firefox Recovery Codes":"","New recovery codes generated":"","Two-step authentication enabled":"","Use the code %(code)s to set up two-step authentication in supported applications.":"","Two-step authentication removed":"","Two-step Authentication":"","Account Recovery":"","Firefox Recovery Key":"","Your account has been locked for security reasons":"","Reset password":"","none":"","Last checked: %(lastCheckTime)s":"","Open Gmail":"","Open Hotmail":"","Open Yahoo":"","Open Outlook":"","Open Restmail":"","Email resent. Add accounts@firefox.com to your contacts to ensure a smooth delivery.":"","Copied":"","Failed to copy. Please manually copy.":"","Downloaded":"","Printed":"","Primary email verified successfully":"","Account verified successfully":"","Open tabs":"","Bookmarks":"","Add-ons":"","Logins":"","History":"","Preferences":"","Addresses":"","Credit cards":"","Firefox Sync":"","Secondary email verified successfully":"","Password reset successfully":"","Unexpected error":"","The link you clicked to verify your email is expired.":"","You've tried too many times. Try again later.":"","You've tried too many times. Try again %(retryAfterLocalized)s.":"","Invalid token":"","Invalid timestamp in request signature":"","Invalid nonce in request signature":"","Account already exists":"","Unknown account":"","Incorrect email case":"","Incorrect password":"","Unverified account":"","Invalid verification code":"","Invalid JSON in request body":"","Invalid parameter: %(param)s":"","Missing parameter: %(param)s":"","Invalid request signature":"","Missing content-length header":"","Request body too large":"","The request was blocked for security reasons":"","Invalid authorization code":"","Invalid phone number":"","Cannot send to this country":"","Could not send a message to this number":"","Your email was just returned":"","Your email was just returned. Mistyped email?":"","Unable to deliver email":"","This email was already verified by another user":"","Secondary email must be different than your account email":"","Primary account email required for sign-in":"","Address in use by another account":"","Primary account email required for reset":"","Invalid signin code":"","Can not change primary email to an unverified email":"","Can not change primary email to an email that does not belong to this account":"","This email can not currently be used to login":"","Failed to send email":"","Valid code required":"","This verification code has expired":"","A TOTP token already exists for this account":"","TOTP token not found":"","Recovery code not found":"","Unavailable device command":"","Recovery key not found":"","Invalid recovery key":"","This request requires two step authentication enabled on your account.":"","Server busy, try again soon":"","Feature not enabled":"","System unavailable, try again soon":"","This endpoint is no longer supported":"","Login attempt cancelled":"","Session expired. Sign in to continue.":"","Cookies are still disabled":"","Passwords do not match":"","Workingâ€¦":"","Could not get Privacy Notice":"","Could not get Terms of Service":"","Your new password must be different":"","Must be at least 8 characters":"","Valid password required":"","Valid email required":"","A usable image was not found":"","Could not initialize camera":"","Valid URL required":"","Your verification email was just returned. Mistyped email?":"","Enter a valid email address. firefox.com does not offer email.":"","Firefox Accounts can only be placed into an IFRAME on approved sites":"","Verification link damaged":"","The image dimensions must be at least 100x100px":"","Signup is coming soon to Firefox for iOS":"","You must enter your age to sign up":"","You must enter a valid age to sign up":"","Account no longer exists.":"","Invalid property in resume token: %(property)s":"","Missing property in resume token: %(property)s":"","Invalid data attribute: %(property)s":"","Missing data attribute: %(property)s":"","That confirmation link was already used, and can only be used once.":"","This is a required field":"","Authorization code required":"","Link damaged":"","Phone number required":"","Two-step authentication code required":"","Invalid two-step authentication code":"","Recovery code required":"","Invalid recovery code":"","Recovery key required":"","Please enter verification code":"","Missing configuration":"","Invalid configuration":"","Did you mean <span %(escapedEmailSuggestionAttrs)s>%(escapedDomain)s</span>?":"","Please try again later":"","Service unavailable, try again soon":"","Unknown client":"","Incorrect redirect_uri":"","Invalid assertion":"","Unknown code":"","Incorrect code":"","Expired code":"","Invalid OAuth parameter: %(param)s":"","Unauthorized":"","Forbidden":"","Expired token":"","Something went wrong. Please close this tab and try again.":"","no message":"","Missing OAuth parameter: %(param)s":"","Invalid message from the remote device":"","Error pairing to remote device":"","Connection to remote device closed, please try again":"","Invalid parameter in request body: %(param)s":"","Unsupported image provider":"","Image processing error":"","Invalid Token":"","By proceeding, you agree to the <a id=\"service-tos\" href=\"%(termsUri)s\">Terms of Service</a> and<a id=\"service-pp\" href=\"%(privacyUri)s\">Privacy Notice</a> of %(serviceName)s (%(serviceUri)s).":"","<a href=\"https://support.mozilla.org/kb/im-having-problems-with-my-firefox-account\">Help</a>":"","Get the latest news about Mozilla and Firefox.":"","%(city)s, %(country)s (estimated)":"","%(country)s (estimated)":"","IP address: %(ip)s":"","For added security, please confirm this sign-in to begin syncing with this device:":"","Bad Request":"","500 Error":"","Oh dear, something went wrong there. We've been notified and will get working on a fix.":"","Reset password link expired":"","The link you clicked to reset your password is expired.":"","Receive new link":"","Reset password with recovery key":"","Continue to %(serviceName)s":"to continue to %(serviceName)s","Please enter the one time use recovery key you stored in a safe place to regain access to your Firefox Account.":"","<span class=\"note\">NOTE:</span> If you reset your password and don't have account recovery key saved, some of your data will be erased (including synced server data like history and bookmarks).":"","Enter recovery key":"","Confirm recovery key":"","Don't have a recovery key?":"","Cannot create account":"","You must meet certain age requirements to create a Firefox&nbsp;Account.":"","Learn more":"","%(email)s registered.":"","Choose what to sync":"","Save selections":"","Back":"","Reset password link damaged":"","The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.":"","Create new password":"","<span>REMEMBER:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.":"","You have successfully restored your account using your recovery key. Create a new password to secure your data, and store it in a safe location.":"","New password":"","Re-enter password":"","Remember password? Sign in":"","Primary email already confirmed":"","Sign-in already confirmed":"","Verification link expired":"","Click here to receive a new verification link":"","Verification error":"","Confirm your account":"","Confirm this sign-in":"","Check your email for the verification link sent&nbsp;to %(escapedEmail)s":"","Check your email for the sign-in confirmation link sent to %(escapedEmail)s":"","Not in inbox or spam folder? Resend":"","Reset email sent":"","Click the link emailed to %(email)s within the next hour to create a new password.":"","Connect another device":"","This Firefox is connected":"","Email verified":"","Success":"","Sign in to this Firefox to complete set-up":"","Still adding devices?":"","Sign in to Firefox on another device to complete set-up":"","Still adding devices? Sign in to Firefox on another device to complete set-up":"","Sign in to Firefox for Android to complete set-up":"","Sign in to Firefox for iOS to complete set-up":"","Why is more than one device required?":"","Cookies and local storage are required":"","Please enable cookies and local storage in your browser to access Firefox Accounts. Doing so will enable functionality such as remembering you between sessions.":"","Try again":"","Sign in to continue":"","Password":"","Forgot password?":"","By proceeding, you agree to the <a id=\"fxa-tos\" href=\"/legal/terms\">Terms of Service</a> and <a id=\"fxa-pp\" href=\"/legal/privacy\">Privacy Notice</a>.":"","Enter your email":"","Email":"","Continue":"","Legal":"","Terms of Service":"","Privacy Notice":"","Get the full Sync experience.":"","Download Firefox for iOS!":"","Download Firefox for Android.":"","Download Firefox for mobile devices.":"","Request for permission":"","%(serviceName)s wants the following information from your account:":"","Accept":"","Cancel":"","Your account is ready!":"","Generate a new recovery key":"","Continue to my account":"","Report unauthorized sign-in?":"","You received an email about attempted access to your account. Would you like to report this activity as suspicious?":"","Report activity":"","Why is this happening?":"","<span>NOTE:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.":"","Begin reset":"","Firefox Accounts":"","Sign out":"","Use a different account":"","Create an account":"","Sorry. Weâ€™ve locked your&nbsp;account.":"","The confirmation email we sent to %(email)s was returned and weâ€™ve locked your account to protect your Firefox data.":"","If this is a valid email address, <a %(escapedSupportLinkAttrs)s>let us know</a> and we can help unlock your account.":"","No longer own that email? Create a new account":"","Enter recovery code":"","Please enter a recovery code that was provided to you during setup.":"","Enter 10-digit recovery code":"","Verify":"","Use security code":"","Thank you for your vigilance":"","Our team has been notified. Reports like this help us fend off intruders.":"","Authorize this sign-in":"","Check your email for the code sent to %(email)s.":"","Enter code":"","Enter security code":"","Open your authentication app and enter the security code it provides.":"","Enter 6-digit code":"","Use recovery code":"","Check your email for the authorization code sent to %(email)s.":"","Enter authorization code":"","Create a Firefox Account":"","Repeat password":"","Donâ€™t lose this password. If you need to reset it, you may lose Sync data.":"","<span>Donâ€™t reuse your email password</span>If someone knows your email password, they can approve your Firefox sign-in on a new device and access your data.":"","<span>Remember your password</span>If you need to reset your password, you will lose any Sync data that is not on one of your devices.":"","Get the latest news about Mozilla and Firefox":"","Create account":"","Have an account? Sign in":"","Mistyped email?":"","Send Firefox directly to your smartphone and sign in to complete set-up":"","Mobile phone number":"","Send":"","SMS service only available in certain countries. SMS &amp; data rates may apply. The intended recipient of the email or SMS must have consented. <a %(escapedLearnMoreAttributes)s>Learn more</a>":"","Install Firefox on your smartphone and sign in to complete set-up":"","App link sent to %(escapedPhoneNumber)s. <a %(escapedBackLinkAttrs)s>Mistyped&nbsp;number?</a>":"","App link resent to %(escapedPhoneNumber)s. <a %(escapedBackLinkAttrs)s>Mistyped&nbsp;number?</a>":"","If you are not receiving the text message, you can also download the apps manually.":"","Didn't arrive? Resend":"","Why sync multiple devices?":"","The Sync service isnâ€™t a permanent backup, itâ€™s simply a secure way to transfer saved bookmarks, history and passwords between your own devices.":"","You should install Firefox and sync at least two devices to protect against losing your data if you need to restore it but forget your password.":"","Got it":"","Changeâ€¦":"","Addâ€¦":"","Take picture":"","Upload":"","Camera":"","Clear":"","Done":"","Position and rotate your picture as needed":"","Change":"","Once you're finished, use your new password to sign in on all of your devices.":"","Old password":"","Disconnect from Sync?":"","Your browsing data will remain on %(deviceName)s, but it will no longer sync with your account.":"","Suspicious device":"","Lost or stolen device":"","Old or replaced device":"","Duplicate device":"","Rather not say":"","Disconnect":"","Disconnection Successful":"","Devices & apps":"","Show":"","Current device":"","Disconnectâ€¦":"","Current session":"","Revoke":"","Firefox for iOS":"","None connected":"","Download":"","Firefox for Android":"","Missing or duplicate items?":"","Refresh":"","Communication preferences":"","You will receive communications relating to your account security, changes to our policy, your accountâ€™s functionality and initial emails to help you get the most from your Firefox Account.":"","Additionally, you can subscribe to receive promotional emails with the latest news from Mozilla and Firefox.":"","Subscribe":"","Manage Subscriptions":"","Delete account":"","Deleteâ€¦":"","If you use this account for Mozilla apps and services like AMO, Pocket, and Screenshots you should first log in and remove any saved personal information. Once you delete your account here you may lose access to it everywhere.":"","Choose the name you would like to appear in Firefox and when managing your account.":"","A secondary email is an additional address for receiving security notices and confirming new devices.":"","verified":"","verification required":"","Make primary":"","Remove":"","Refresh Status":"","Add":"","Recovery codes":"","NOTE:":"","By generating new recovery codes, all previous codes will become invalid. Please store new codes in a safe location.":"","Generate new recovery codes":"","These are your one time use recovery codes. Store them in a safe place in the event you lose access to your mobile device. You will not be able to see these codes again.":"","Copy":"","Print":"","Two-step authentication":"","Enableâ€¦":"","Add a layer of security to your account by requiring security codes from one of <a %(escapedTotpSupportAttributes)s>these authentication apps</a>.":"","Current status":"","Enabled":"","Disabled":"","Disable":"","Enable":"","Replace recovery codes":"","Scan the QR code in your authentication app and then enter the security code it provides.":"","Canâ€™t scan code?":"","Manually enter this secret key into your authentication app:":"","Security code":"","Confirm":"","Before you can view or make changes to this section, you will need to verify your email address.":"","Primary email":"","Account recovery":"","Generate a recovery key to regain access to your Firefox bookmarks, passwords, and synced data if you forget your password.":"","Recovery key":"","Not set":"","Generate":"","<span class=\"note\">NOTE: </span>Your Firefox Account password encrypts your Firefox data. Only your password or recovery key can access your data. <a %(escapedLearnMoreLinkAttributes)s>Learn more</a>":"","Step 1 of 2: Re-enter password":"","Enter your password to view your recovery key.":"","Enter Password":"","Are you sure you want to revoke?":"","You will be unable to use your recovery key to access your data in the event you reset your password.":"","Step 2 of 2: Save Recovery key":"","<span class=\"note\">NOTE: </span>If you forget your password, this key is required to regain access to your data. Save your recovery key in a safe location, where you can find it easily later.":"","Done, Recovery key saved":"","How old are you?":"","%(family)s on %(OS)s":"","%(city)s, %(region)s, %(country)s (estimated)":"","%(region)s, %(country)s (estimated)":"","%(country)s":"","Location unknown":"","IP address: %(ipAddress)s":"","Your Firefox Account password":"","Must not be your email address":"","Must not match this <a %(escapedCommonPasswordLinkAttrs)s>list of common passwords</a>":"","Be original and be safe &mdash; don't reuse this password anywhere else.":"","Remember this password &mdash; resetting it erases your data from our servers.":"","Show password":"","Looking for Firefox Sync? <a %(escapedSyncSuggestionAttrs)s>Get started here</a>":"","Use a different email address":"","Approve connections <small>to begin syncing</small>":"","Approve connection":"","Device connected":"","You are now syncing with:":"","Manage devices":"","Approve this connection <small>from this device</small>":"","Pairing not successful":"","The setup process was terminated.":"","Pairing was successful.":"","Pair using an app":"","Did you use the system camera? You must pair from within a Firefox app.":""},fetch:function(){var e=this;return new Promise(function(t,n){e._forceEnglish||Object.keys(e.__translations__).length?t():e._xhr.getJSON("/i18n/client.json").then(function(n){e.__translations__=n,t()},n)})},set:function(e){this.__translations__=e},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.__translations__,i=void 0;t.msgctxt?i=n[t.msgctxt+""+e]||n[e]:i=n[e];return o.isArray(i)&&i.length>=2&&(i=i[1]),(i=r.trim(i))||(i=e),this.interpolate(i,t)},interpolate:s.interpolate,translateInTemplate:function(e,t){var n=this;return function(i){return n.get(e||i,t)}}},i.exports=c}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(73),s=n(117),a=n(254),c=o.prototype;i.exports=o.extend({defaultBehaviors:r.extend({},c.defaultBehaviors,{afterCompleteSignIn:new s(c.defaultBehaviors.afterCompleteSignIn),afterCompleteSignUp:new s(c.defaultBehaviors.afterCompleteSignUp),afterSignIn:new s(c.defaultBehaviors.afterSignIn)}),type:"fx-sync",initialize:function(){var e=this;if(c.initialize.call(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.hasCapability("chooseWhatToSyncWebV1")){var t=new a(null,{window:this.window});this.set("chooseWhatToSyncWebV1Engines",t)}this.hasCapability("fxaStatus")&&this.on("fxa_status",function(t){return e.onFxaStatus(t)})},onFxaStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("chooseWhatToSyncWebV1Engines"),n=e.capabilities&&e.capabilities.engines;t&&n&&this.addAdditionalSyncEngines(n)},addAdditionalSyncEngines:function(e){var t=this.get("chooseWhatToSyncWebV1Engines");t&&e.forEach(function(e){return t.addById(e)})},afterSignInConfirmationPoll:function(e){var t=this;return c.afterSignInConfirmationPoll.call(this,e).then(function(e){return t.hasCapability("browserTransitionsAfterEmailVerification")?e:(t._metrics.setViewNamePrefix("signin"),new s(e))})},afterSignUpConfirmationPoll:function(e){var t=this;return c.afterSignUpConfirmationPoll.call(this,e).then(function(e){return t.hasCapability("browserTransitionsAfterEmailVerification")?e:(t._metrics.setViewNamePrefix("signup"),new s(e))})}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(26),s="verificationInfo",a=r.Model.prototype,c=r.Model.extend({initialize:function(e,t){a.initialize.call(this,e,t),this._email=t.email,this._namespace=t.namespace,this._uid=t.uid,this._window=t.window||window,this._storage=t.storage||new o(this._window.localStorage)},_STORAGE_KEY:s,_getUsersStorageId:function(){return this._uid||this._email},persist:function(){var e=this._getUsersStorageId();if(e){var t=this._storage.get(s)||{};t[e]=t[e]||{},t[e][this._namespace]=this.toJSON(),this._storage.set(s,t)}},load:function(){if(this._getUsersStorageId()){var e=this._storage.get(s)||{},t=e[this._uid]||e[this._email];t&&this.set(t[this._namespace]||{})}},clear:function(){var e=this._getUsersStorageId();if(e){var t=this._storage.get(s)||{};t[e]&&(delete t[e][this._namespace],Object.keys(t[e]).length||delete t[e],this._storage.set(s,t))}}});i.exports=c}(0,0,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(118),s=n(121),a=o.prototype,c=a.defaultBehaviors,u=o.extend({defaultBehaviors:r.extend({},c,{afterForceAuth:new s(c.afterForceAuth),afterResetPasswordConfirmationPoll:new s(c.afterResetPasswordConfirmationPoll),afterSignIn:new s(c.afterSignIn),afterSignInConfirmationPoll:new s(c.afterSignInConfirmationPoll),afterSignUpConfirmationPoll:new s(c.afterSignUpConfirmationPoll)}),defaultCapabilities:r.extend({},a.defaultCapabilities,{chooseWhatToSyncCheckbox:!1,chooseWhatToSyncWebV1:!0,openWebmailButtonVisible:!0}),type:"fx-desktop-v2",fetch:function(){var e=this;return a.fetch.call(this).then(function(){e.environment.isAboutAccounts()||e.setCapability("browserTransitionsAfterEmailVerification",!1)})}});i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(2),s=n(255),a=n(3),c=n(186),u=n(18),l=c.prototype,d=["customizeSync","declinedSyncEngines","email","keyFetchToken","offeredSyncEngines","sessionToken","uid","unwrapBKey","verified"],h=["customizeSync","email","keyFetchToken","sessionToken","uid","unwrapBKey","verified"],f=c.extend({type:"fx-sync-channel",commands:null,defaultCapabilities:r.extend({},l.defaultCapabilities,{sendAfterSignInConfirmationPollNotice:!1,sendAfterSignUpConfirmationPollNotice:!1,sendChangePasswordNotice:!0}),getCommand:function(e){if(!this.commands)throw Error("this.commands must be specified");var t=this.commands[e];if(!t)throw Error("command not found for: "+e);return t},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._logger=new u,this._channel=e.channel,e.commands&&(this.commands=e.commands),l.initialize.call(this,e)},afterLoaded:function(){var e=this;return this.send(this.getCommand("LOADED")).then(function(){return l.afterLoaded.call(e)})},beforeSignIn:function(e){var t=this,n=e.get("email");return this._verifiedCanLinkEmail===n?l.beforeSignIn.call(this,e):this.request(this.getCommand("CAN_LINK_ACCOUNT"),{email:n}).then(function(i){if(i&&!i.ok)throw o.toError("USER_CANCELED_LOGIN");return t._verifiedCanLinkEmail=n,l.beforeSignIn.call(t,e)},function(e){t._logger.error("beforeSignIn failed with",e)})},afterSignIn:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return l.afterSignIn.call(t,e)})},afterForceAuth:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return l.afterForceAuth.apply(t,e)})},beforeSignUpConfirmationPoll:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return l.beforeSignUpConfirmationPoll.call(t,e)})},afterSignInConfirmationPoll:function(e){var t=this;return l.afterSignInConfirmationPoll.call(this,e).then(function(n){if(t.hasCapability("sendAfterSignInConfirmationPollNotice")){var i=t._getLoginData(e);return t.send(t.getCommand("VERIFIED"),i).then(function(){return n})}return n})},afterSignUpConfirmationPoll:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return l.afterSignUpConfirmationPoll.call(t,e)}).then(function(n){if(t.hasCapability("sendAfterSignUpConfirmationPollNotice")){var i=t._getLoginData(e);return t.send(t.getCommand("VERIFIED"),i).then(function(){return n})}return n})},afterChangePassword:function(e){var t=this;return this.hasCapability("sendChangePasswordNotice")?this.send(this.getCommand("CHANGE_PASSWORD"),this._getLoginData(e)).then(function(){return l.afterChangePassword.call(t,e)}):l.afterChangePassword.call(this,e)},afterDeleteAccount:function(e){var t=this;return this.send(this.getCommand("DELETE_ACCOUNT"),{email:e.get("email"),uid:e.get("uid")}).then(function(){return l.afterDeleteAccount.call(t,e)})},getChannel:function(){return this._channel||(this._channel=this.createChannel()),this._channel},createChannel:function(){throw Error("createChannel must be overridden")},_notifyRelierOfLogin:function(e){var t=this._getLoginData(e);return this._hasRequiredLoginFields(t)?t.uid===this._uidOfLoginNotification?Promise.resolve():(this._uidOfLoginNotification=t.uid,this.send(this.getCommand("LOGIN"),t)):Promise.resolve()},_hasRequiredLoginFields:function(e){return!r.difference(h,Object.keys(e)).length},_getLoginData:function(e){var t=e.pick(d);return t.verified=!!t.verified,t.verifiedCanLinkAccount=!!this._verifiedCanLinkEmail,r.omit(t,r.isUndefined)}},{REQUIRED_LOGIN_FIELDS:h});a.mixin(f,s),i.exports=f}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(4);o.extend(r.prototype,s.Events,{initialize:function(){},teardown:function(){},send:function(e,t,n){n&&n()}}),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(118),s=n(42),a=o.prototype,c=o.extend({type:"fx-firstrun-v1",_iframeCommands:{LOADED:"loaded",LOGIN:"login",SIGNUP_MUST_VERIFY:"signup_must_verify",VERIFICATION_COMPLETE:"verification_complete"},defaultCapabilities:r.extend({},a.defaultCapabilities,{browserTransitionsAfterEmailVerification:!1,chooseWhatToSyncCheckbox:!0,chooseWhatToSyncWebV1:!1,openWebmailButtonVisible:!0}),initialize:function(e){return this._iframeChannel=(e=e||{}).iframeChannel,a.initialize.call(this,e)},fetch:function(){var e=this;return a.fetch.call(this).then(function(){"true"===e.getSearchParam("haltAfterSignIn")&&e.setBehavior("afterSignIn",new s)})},afterLoaded:function(){return this._iframeChannel.send(this._iframeCommands.LOADED),a.afterLoaded.apply(this,arguments)},afterSignIn:function(){return this._iframeChannel.send(this._iframeCommands.LOGIN),a.afterSignIn.apply(this,arguments)},afterSignInConfirmationPoll:function(){return this._iframeChannel.send(this._iframeCommands.VERIFICATION_COMPLETE),a.afterSignInConfirmationPoll.apply(this,arguments)},afterResetPasswordConfirmationPoll:function(){return this._iframeChannel.send(this._iframeCommands.VERIFICATION_COMPLETE),a.afterResetPasswordConfirmationPoll.apply(this,arguments)},beforeSignUpConfirmationPoll:function(e){return this._iframeChannel.send(this._iframeCommands.SIGNUP_MUST_VERIFY,{emailOptIn:!!e.get("needsOptedInToMarketingEmail")}),a.beforeSignUpConfirmationPoll.apply(this,arguments)},afterSignUpConfirmationPoll:function(){return this._iframeChannel.send(this._iframeCommands.VERIFICATION_COMPLETE),a.afterSignUpConfirmationPoll.apply(this,arguments)}});i.exports=c}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(2),a=n(4),c=n(18);o.extend(r.prototype,a.Events,{initialize:function(e){this._origin=(e=e||{}).origin,this._window=e.window,this._boundReceiveEvent=this.receiveEvent.bind(this),this._window.addEventListener("message",this._boundReceiveEvent,!1),this._logger=new c(this._window)},isOriginIgnored:function(e){return"chrome://browser"===e},isOriginTrusted:function(e){return"null"===e||this._origin===e},receiveEvent:function(e){if("message"===e.type){var t=e.origin;if(this.isOriginIgnored(t))this._logger.error("postMessage received from %s, ignoring",t);else if(this.isOriginTrusted(t))e.data?this.trigger("message",e.data):this.trigger("error",{error:Error("malformed event")});else{this._logger.error("postMessage received from %s, expected %s",t,this._origin);var n=s.toError("UNEXPECTED_POSTMESSAGE_ORIGIN");n.context=t,this.trigger("error",{error:n})}}},teardown:function(){this._window.removeEventListener("message",this._boundReceiveEvent,!1)}}),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(73),s=n(5).CONTENT_SERVER_CONTEXT,a=n(25),c=n(74),u=function(e){return e},l=o.prototype,d=new a("settings",{success:u("Account verified successfully")}),h=new a("settings",{success:u("Password reset successfully")});i.exports=o.extend({defaultBehaviors:r.extend({},l.defaultBehaviors,{afterCompleteResetPassword:h,afterCompleteSignIn:new c(l.defaultBehaviors.afterCompleteSignIn),afterCompleteSignUp:new c(l.defaultBehaviors.afterCompleteSignUp),afterForceAuth:new a("settings"),afterResetPasswordConfirmationPoll:d,afterSignIn:new a("settings"),afterSignInConfirmationPoll:d,afterSignUpConfirmationPoll:d}),defaultCapabilities:r.extend({},l.defaultCapabilities,{reuseExistingSession:!0}),type:s})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=n(4);t.State=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.broker=n.broker,i.notifier=n.notifier,i.parent=n.parent,i.oAuthClient=n.oAuthClient,i.relier=n.relier,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,o.Model),i(e,[{key:"destroy",value:function(){this.stopListening(),function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"gotoState",value:function(e,t){this.trigger("goto.state",e,t)}},{key:"navigate",value:function(e,t){this.notifier.trigger("navigate",{nextViewData:(0,r.assign)(this.toJSON(),t),routerOptions:{replace:!0,trigger:!0},url:e})}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(4),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.broker=n.broker,i.pairingChannelClient=n.pairingChannelClient,i.notifier=n.notifier,i.relier=n.relier,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r.Model),i(e,[{key:"createState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state&&this.state.destroy(),this.state=new e(t,{broker:this.broker,notifier:this.notifier,pairingChannelClient:this.pairingChannelClient,parent:this,relier:this.relier}),this.listenTo(this.state,"goto.state",this.createState)}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new s.default(e.ua),n=(0,r.assign)((0,r.pick)(e,"city","country","ipAddress","region","ua"),{deviceType:t.genericDeviceType(),family:t.browser.name,OS:t.genericOSName()});this.set({remoteMetaData:n})};var i,r=n(0),o=n(54),s=(i=o)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=n(39),s=(i=o)&&i.__esModule?i:{default:i},a=function(e){return e},c=a("Unexpected error");t.default=(0,r.assign)({},s.default,{NAMESPACE:"channel-server",ERRORS:{UNEXPECTED_ERROR:{errno:999,message:c},INVALID_CONFIGURATION:{errno:1e3,message:"Invalid channel server configuration"},ALREADY_CONNECTED:{errno:1001,message:"Already connected to channel server"},NOT_CONNECTED:{errno:1002,message:"Not connected to channel server"},INVALID_MESSAGE:{errno:1003,message:a("Invalid message from the remote device")},INVALID_OUTBOUND_MESSAGE:{errno:1004,message:"Sending a malformed message"},CHANNEL_ID_MISMATCH:{errno:1005,message:a("Error pairing to remote device")},CONNECTION_CLOSED:{errno:1006,message:a("Connection to remote device closed, please try again")}}})},function(e){"use strict";e.exports={PASSWORD_CHANGE:"password_change",PASSWORD_CHECK:"password_check",PASSWORD_RESET:"password_reset",SIGN_IN:"signin"}},function(e){"use strict";var t;void 0===(t=function(e,t,n){var i="none";n.exports=function(e){var t=e.document.documentElement||{},n=e.screen||{};this.clientHeight=t.clientHeight||i,this.clientWidth=t.clientWidth||i,this.devicePixelRatio=e.devicePixelRatio||i,this.screenHeight=n.height||i,this.screenWidth=n.width||i}}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(9),o=n(82);i.exports=o.extend({defaults:{code:null,email:null,token:null},validation:{code:r.verificationCode().required(),email:r.email().required(),emailToHashWith:r.email().optional(),token:r.token().required(),uid:r.hex().optional()}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0);i.exports={load:function(e){return new Promise(function(t,n){var i=new Image;i.onerror=n,i.onload=r.partial(t,i),i.src=e})}}}(0,0,e))||(e.exports=i)},,,function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(2),o=n(4),s=n(5),a=o.Model.extend({defaults:{height:1,src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKAP/2Q==",type:"image/jpeg",width:1},initialize:function(e){if(e&&(s.PROFILE_IMAGE_MIN_HEIGHT>e.width||s.PROFILE_IMAGE_MIN_WIDTH>e.height))throw r.toError("INVALID_IMAGE_SIZE")}});i.exports=a}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(5);i.exports={href:function(e){if(r.isString(e)&&/^https?:\/\//.test(e)){var t=encodeURI(e);if(o.URL_MAX_LENGTH>=t.length)return t}}}}(0,0,e))||(e.exports=i)},,,function(e){"use strict";var t;void 0===(t=function(e,t,n){n.exports={FIREFOX_MOBILE_INSTALL:1}}(0,0,e))||(e.exports=t)},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(227)),o=i(n(231)),s=new r.default;s.fetch().then(function(e){var t=new o.default({config:e});s.useConfig(e),t.startApp()})},function(e,t,n){"use strict";function i(){}var r=n(8),o=n(0),s=n(5),a=n(39);i.prototype={useConfig:function(e){this._config=e},fetch:function(){var e=this;return this._config?Promise.resolve(this._config):this._readConfigFromHTML().then(this._parseHTMLConfig).then(function(t){return t.lang=r("html").attr("lang"),e._setWebpackPublicPath(t.webpackPublicPath),t})},_readConfigFromHTML:function(){var e=r('meta[name="fxa-content-server/config"]').attr("content");return e?Promise.resolve(e):Promise.reject(i.Errors.toError("MISSING_CONFIG"))},_parseHTMLConfig:function(e){var t=void 0;try{t=JSON.parse(decodeURIComponent(e))}catch(e){return Promise.reject(i.Errors.toError("INVALID_CONFIG"))}return Promise.resolve(t)},_setWebpackPublicPath:function(){n.p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DEFAULT_BUNDLE_PATH}};var c=function(e){return e};i.Errors=o.extend({},a,{ERRORS:{MISSING_CONFIG:{errno:1e3,message:c("Missing configuration")},INVALID_CONFIG:{errno:1001,message:c("Invalid configuration")}},NAMESPACE:"config"}),e.exports=i},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._authenticationBroker=e.broker,this._config=e.config||{},this._history=e.history||d.default.history,this._metrics=e.metrics,this._notifier=e.notifier,this._refreshObserver=e.refreshObserver,this._relier=e.relier,this._router=e.router,this._sentryMetrics=e.sentryMetrics,this._storage=e.storage||L.default,this._translator=e.translator,this._user=e.user,this._window=this.window=e.window||window}var o=i(n(0)),s=i(n(232)),a=i(n(114)),c=i(n(249)),u=i(n(250)),l=i(n(273)),d=i(n(4)),h=i(n(3)),f=i(n(5)),p=i(n(35)),g=i(n(67)),m=i(n(275)),v=i(n(276)),_=i(n(282)),y=i(n(283)),w=i(n(285)),E=i(n(286)),b=i(n(69)),S=i(n(31)),I=i(n(287)),A=i(n(288)),C=i(n(123)),T=i(n(52)),x=i(n(289)),k=i(n(290)),O=i(n(124)),P=i(n(291)),R=i(n(187)),N=i(n(200)),M=i(n(368)),D=i(n(27)),L=i(n(26)),U=i(n(369)),V=i(n(370)),F=i(n(371)),j=i(n(185)),B=i(n(372)),z=i(n(13)),G=i(n(373)),H=i(n(12)),W=i(n(119)),K=/^\/pair\/supp/;r.prototype={startApp:function(){var e=this,t=this._isAutomatedBrowser()?750:0;return T.default.delay(t).then(function(){return e.initializeDeps()}).then(function(){return e.testLocalStorage()}).then(function(){return e.allResourcesReady()}).catch(function(t){return e.fatalError(t)})},initializeInterTabChannel:function(){this._interTabChannel=new w.default},initializeExperimentGroupingRules:function(){this._experimentGroupingRules=new s.default({env:this._config.env})},initializeDeps:function(){var e=this;return Promise.resolve().then(function(){return e.initializeL10n()}).then(function(){return e.initializeInterTabChannel()}).then(function(){return e.initializeExperimentGroupingRules()}).then(function(){return e.initializeErrorMetrics()}).then(function(){return e.initializeOAuthClient()}).then(function(){return e.initializeRelier()}).then(function(){return e.initializeIframeChannel()}).then(function(){return e.initializeFxaClient()}).then(function(){return e.initializeNotificationChannel()}).then(function(){return e.initializeNotifier()}).then(function(){return e.initializeMetrics()}).then(function(){return e.initializeAssertionLibrary()}).then(function(){return e.initializeProfileClient()}).then(function(){return e.initializeMarketingEmailClient()}).then(function(){return e.initializeAuthenticationBroker()}).then(function(){return e.initializeUser()}).then(function(){return e.initializeHeightObserver()}).then(function(){return e.initializeFormPrefill()}).then(function(){return e.initializeRefreshObserver()}).then(function(){return e.initializeRouter()}).then(function(){return e.initializeAppView()})},initializeErrorMetrics:function(){if(this._config&&this._config.env&&this._experimentGroupingRules){var e={env:this._config.env,uniqueUserId:this._getUniqueUserId()};this._experimentGroupingRules.choose("sentryEnabled",e)&&this.enableSentryMetrics()}},enableSentryMetrics:function(){var e=void 0;this._config&&this._config.release&&(e=this._config.release),this._sentryMetrics=new M.default(this._window.location.host,e)},initializeL10n:function(){return this._translator||(this._translator=new j.default),this._translator.fetch()},initializeMetrics:function(){var e=this._experimentGroupingRules.choose("isSampledUser",{env:this._config.env,uniqueUserId:this._getUniqueUserId()}),t=this._relier,n=new N.default(this._window);this._metrics=this._createMetrics({clientHeight:n.clientHeight,clientWidth:n.clientWidth,context:t.get("context"),devicePixelRatio:n.devicePixelRatio,entrypoint:t.get("entrypoint"),isSampledUser:e,lang:this._config.lang,migration:t.get("migration"),notifier:this._notifier,screenHeight:n.screenHeight,screenWidth:n.screenWidth,sentryMetrics:this._sentryMetrics,service:t.get("service"),uniqueUserId:this._getUniqueUserId(),utmCampaign:t.get("utmCampaign"),utmContent:t.get("utmContent"),utmMedium:t.get("utmMedium"),utmSource:t.get("utmSource"),utmTerm:t.get("utmTerm")})},initializeIframeChannel:function(){if(this._isInAnIframe()){var e=this._searchParam("origin"),t=new y.default;t.initialize({origin:e,window:this._window}),this._iframeChannel=t}else this._iframeChannel=new I.default},initializeFormPrefill:function(){this._formPrefill=new m.default},initializeOAuthClient:function(){this._oAuthClient=new A.default({oAuthUrl:this._config.oAuthUrl})},initializeProfileClient:function(){this._profileClient=new x.default({profileUrl:this._config.profileUrl})},initializeMarketingEmailClient:function(){this._marketingEmailClient=new E.default({baseUrl:this._config.marketingEmailServerUrl,preferencesUrl:this._config.marketingEmailPreferencesUrl})},initializeRelier:function(){if(!this._relier){var e=void 0,t=this._getContext();return e=this.isDevicePairingAsAuthority()?new l.default({},{config:this._config,oAuthClient:this._oAuthClient,oAuthClientId:this._config.oAuthClientId,oAuthUrl:this._config.oAuthUrl}):this.isDevicePairingAsSupplicant()?new V.default({},{config:this._config,isSupplicant:!0,oAuthClient:this._oAuthClient,oAuthClientId:this._config.oAuthClientId,oAuthUrl:this._config.oAuthUrl}):this._isOAuth()?new C.default({context:t},{config:this._config,isVerification:this._isVerification(),oAuthClient:this._oAuthClient,sentryMetrics:this._sentryMetrics,session:D.default,window:this._window}):this._isServiceSync()?new F.default({context:t},{isVerification:this._isVerification(),sentryMetrics:this._sentryMetrics,translator:this._translator,window:this._window}):new O.default({context:t},{isVerification:this._isVerification(),sentryMetrics:this._sentryMetrics,window:this._window}),this._relier=e,e.fetch()}},initializeAssertionLibrary:function(){this._assertionLibrary=new c.default({audience:this._config.oAuthUrl,fxaClient:this._fxaClient})},initializeAuthenticationBroker:function(){if(!this._authenticationBroker){var e=void 0;e=this._isFxDesktopV2()?this._isIframeContext()?f.default.FX_FIRSTRUN_V1_CONTEXT:f.default.FX_DESKTOP_V2_CONTEXT:this._isOAuth()?this._chooseOAuthBrokerContext():this._getContext();var t=u.default.get(e);return this._authenticationBroker=new t({assertionLibrary:this._assertionLibrary,config:this._config,fxaClient:this._fxaClient,iframeChannel:this._iframeChannel,isVerificationSameBrowser:this._isVerificationSameBrowser(),metrics:this._metrics,notificationChannel:this._notificationChannel,notifier:this._notifier,oAuthClient:this._oAuthClient,relier:this._relier,session:D.default,window:this._window}),this._authenticationBroker.on("error",this.captureError.bind(this)),this._metrics.setBrokerType(this._authenticationBroker.type),this._authenticationBroker.fetch()}},_chooseOAuthBrokerContext:function(){return this.isDevicePairingAsAuthority()?f.default.DEVICE_PAIRING_AUTHORITY_CONTEXT:this.isDevicePairingAsSupplicant()?f.default.DEVICE_PAIRING_SUPPLICANT_CONTEXT:this.getUserAgent().isChromeAndroid()?f.default.OAUTH_CHROME_ANDROID_CONTEXT:f.default.OAUTH_CONTEXT},initializeHeightObserver:function(){var e=this;if(this._isInAnIframe()){var t=new _.default({target:this._window.document.body,window:this._window});t.on("change",function(t){e._iframeChannel.send("resize",{height:t})}),t.start()}},initializeFxaClient:function(){this._fxaClient||(this._fxaClient=new v.default({authServerUrl:this._config.authServerUrl,interTabChannel:this._interTabChannel}))},initializeUser:function(){var e=this;if(!this._user){var t=this._user=new G.default({assertion:this._assertionLibrary,fxaClient:this._fxaClient,marketingEmailClient:this._marketingEmailClient,metrics:this._metrics,notifier:this._notifier,oAuthClient:this._oAuthClient,oAuthClientId:this._config.oAuthClientId,profileClient:this._profileClient,sentryMetrics:this._sentryMetrics,storage:this._getUserStorageInstance(),uniqueUserId:this._getUniqueUserId()});return t.removeAccountsWithInvalidUid().then(function(){var n=e._authenticationBroker.get("signinCodeAccount");n&&t.setSigninCodeAccount(n);var i=e._authenticationBroker.get("browserSignedInAccount");if(t.shouldSetSignedInAccountFromBrowser(e._relier.get("service")))return t.setSignedInAccountFromBrowserAccountData(i)})}},initializeNotificationChannel:function(){this._notificationChannel||(this._notificationChannel=new W.default(f.default.ACCOUNT_UPDATES_WEBCHANNEL_ID),this._notificationChannel.initialize({window:this._window}))},initializeNotifier:function(){this._notifier||(this._notifier=new S.default({iframeChannel:this._iframeChannel,tabChannel:this._interTabChannel,webChannel:this._notificationChannel}))},initializeRefreshObserver:function(){this._refreshObserver||(this._refreshObserver=new k.default({metrics:this._metrics,notifier:this._notifier,window:this._window}))},_uniqueUserId:null,_getUniqueUserId:function(){return this._uniqueUserId||(this._uniqueUserId=new B.default({sentryMetrics:this._sentryMetrics,window:this._window}).get("uniqueUserId")),this._uniqueUserId},createView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(o.default.extend({broker:this._authenticationBroker,config:this._config,createView:this.createView.bind(this),experimentGroupingRules:this._experimentGroupingRules,formPrefill:this._formPrefill,interTabChannel:this._interTabChannel,isCoppaEnabled:this._config.isCoppaEnabled,lang:this._config.lang,marketingEmailEnabled:this._config.marketingEmailEnabled,metrics:this._metrics,notifier:this._notifier,relier:this._relier,sentryMetrics:this._sentryMetrics,session:D.default,translator:this._translator,user:this._user,window:this._window},this._router.getViewOptions(t)))},initializeRouter:function(){this._router||(this._router=new P.default({broker:this._authenticationBroker,createView:this.createView.bind(this),metrics:this._metrics,notifier:this._notifier,relier:this._relier,user:this._user,window:this._window})),this._window.router=this._router},initializeAppView:function(){this._appView||(this._appView=new a.default({createView:this.createView.bind(this),el:"body",environment:new p.default(this._window),notifier:this._notifier,router:this._router,translator:this._translator,window:this._window}))},testLocalStorage:function(){var e=this;return Promise.resolve().then(function(){e._isAtCookiesDisabled()||e._storage.testLocalStorage(e._window)}).catch(function(t){return e.captureError(t)})},fatalError:function(e){return this._sentryMetrics||this.enableSentryMetrics(),g.default.fatalError(e,this._sentryMetrics,this._metrics,this._window,this._translator)},captureError:function(e){return this._sentryMetrics||this.enableSentryMetrics(),g.default.captureAndFlushError(e,this._sentryMetrics,this._metrics,this._window)},allResourcesReady:function(){n.e(20).then(n.t.bind(null,214,7));var e=this._selectStartPage(),t=!!e;this._history.start({pushState:this._canUseHistoryAPI(),silent:t}),e&&this._router.navigate(e,{},{replace:!0,trigger:!0})},_canUseHistoryAPI:function(){var e=this._window;try{e.history.replaceState({},e.document.title,e.location.href)}catch(e){return!1}return!0},_getUserStorageInstance:function(){var e=this._authenticationBroker.hasCapability("fxaStatus")&&this._relier.isSync();return L.default.factory(e?void 0:"localStorage",this._window)},_isServiceSync:function(){return this._isService(f.default.SYNC_SERVICE)},isDevicePairingAsAuthority:function(){return this._searchParam("redirect_uri")===f.default.DEVICE_PAIRING_AUTHORITY_REDIRECT_URI},isDevicePairingAsSupplicant:function(){return K.test(this._window.location.pathname)},_isServiceOAuth:function(){return this._searchParam("service")&&!this._isServiceSync()},_isService:function(e){var t=this._searchParam("service");return!(!t||!e||t!==e)},_isFxDesktopV2:function(){return this._isServiceSync()&&this._isIframeContext()||this._isContext(f.default.FX_DESKTOP_V2_CONTEXT)},_isContext:function(e){return this._getContext()===e},_getContext:function(){return this._isVerification()?this._getVerificationContext():this._searchParam("context")},_getVerificationContext:function(){var e=this._getSameBrowserVerificationModel("context").get("context");return e||(this._isServiceSync()?f.default.FX_SYNC_CONTEXT:this._isServiceOAuth()?f.default.OAUTH_CONTEXT:f.default.CONTENT_SERVER_CONTEXT)},_getSameBrowserVerificationModel:function(e){var t=z.default.searchParams(this._window.location.search),n=new R.default({},{email:t.email,namespace:e,uid:t.uid});return n.load(),n},_isSignUpVerification:function(){return this._searchParam("code")&&this._searchParam("uid")},_isPasswordResetVerification:function(){return this._searchParam("code")&&this._searchParam("token")},_isReportSignIn:function(){return"/report_signin"===this._window.location.pathname},_isVerification:function(){return this._isSignUpVerification()||this._isPasswordResetVerification()||this._isReportSignIn()},_isVerificationSameBrowser:function(){return this._isVerification()&&!!this._getSameBrowserVerificationModel("context").get("context")},_isInAnIframe:function(){return new p.default(this._window).isFramed()},_isIframeContext:function(){return this._isContext(f.default.IFRAME_CONTEXT)},_isOAuth:function(){return!(!this._searchParam("client_id")&&!this._isOAuthVerificationSameBrowser())||this._isOAuthVerificationDifferentBrowser()||/oauth/.test(this._window.location.pathname)},_isAtCookiesDisabled:function(){return"/cookies_disabled"===this._window.location.pathname},_getSavedClientId:function(){return D.default.oauth&&D.default.oauth.client_id},_isOAuthVerificationSameBrowser:function(){return this._isVerification()&&this._isService(this._getSavedClientId())},_isOAuthVerificationDifferentBrowser:function(){return this._isVerification()&&this._isServiceOAuth()},_searchParam:function(e){return z.default.searchParam(e,this._window.location.search)},_selectStartPage:function(){return this._isAtCookiesDisabled()||this._storage.isLocalStorageEnabled(this._window)||this._isVerificationInMobileSafari()?this.isDevicePairingAsAuthority()?"pair/auth/allow":void 0:"cookies_disabled"},_createMetrics:function(e){return this._isAutomatedBrowser()?new U.default(e):new b.default(e)},_isVerificationInMobileSafari:function(){var e=this._window.location.pathname,t="/complete_signin"===e||"/verify_email"===e,n=this.getUserAgent();return t&&n.isMobileSafari()},_isAutomatedBrowser:function(){return"true"===this._searchParam("automatedBrowser")}},h.default.mixin(r,H.default),e.exports=r},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=[n(233),n(234),n(235),n(236),n(237),n(238),n(239)].map(function(e){return new e}),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._env=t.env,this._experimentGroupingRules=t.experimentGroupingRules||o}return i(e,[{key:"choose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.find(this._experimentGroupingRules,function(t){return t.name===e});if(n){if(!function(e,t){return!t.forceExperiment||function(e,t){return t===e.name||t===e.forceExperimentAllow}(e,t.forceExperiment)}(n,t))return!1;if(function(e,t){return t.forceExperiment&&t.forceExperimentGroup&&t.forceExperiment===e.name}(n,t))return t.forceExperimentGroup;var i=Object.create(t);return i.env=t.env||this._env,i.experimentGroupingRules=this,n.choose(i)}}}]),e}();s.EXPERIMENT_NAMES=o.map(function(e){return e.name}),e.exports=s},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(34),o=["de","en","en-[a-z]{2}","es","es-[a-z]{2}","fr","hu","id","pl","pt-br","ru","zh-tw"],s="^("+o.join("|")+")$",a=RegExp(s);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="communicationPrefsVisible",t.availableLanguages=o,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),i(e,[{key:"choose",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!t.lang&&(e=function(e){return e.toLowerCase().replace(/_/g,"-")}(t.lang),a.test(e))}}]),e}()},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(34),o="emailFirst",s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name=o,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),i(e,[{key:"choose",value:function(e){return!!this._isValidSubject(e)&&(!!e.isEmailFirstSupported&&(!!this._isSampledUser(e)&&this.uniformChoice(["control","treatment"],e.uniqueUserId)))}},{key:"_isValidSubject",value:function(e){return e&&e.uniqueUserId&&e.experimentGroupingRules}},{key:"_isSampledUser",value:function(e){return e.experimentGroupingRules.choose("isSampledUser",e)}}]),e}();e.exports=s},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(34);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="isSampledUser",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),i(e,[{key:"choose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sampleRate(t.env);return!!(t.env&&t.uniqueUserId&&this.bernoulliTrial(n,t.uniqueUserId))}}],[{key:"sampleRate",value:function(e){return"development"===e?1:.1}}]),e}()},function(e,t,n){"use strict";var i=n(34);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.deprecated=!0,t.name="q3FormChanges",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i),e}()},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(34),o=n(66),s=["control","signinCodes"];e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="sendSms",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),i(e,[{key:"choose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.account&&e.uniqueUserId&&e.country&&o[e.country]))return!1;var t=!1,n=(o[e.country]||0).rolloutRate;return this.isTestEmail(e.account.get("email"))?t="signinCodes":1>n?this.bernoulliTrial(n,e.uniqueUserId)&&(t=this.uniformChoice(s,e.uniqueUserId)):t=!0,t}}]),e}()},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(34);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="sentryEnabled",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),i(e,[{key:"choose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sampleRate(t.env);return!!(t.env&&t.uniqueUserId&&this.bernoulliTrial(n,t.uniqueUserId))}}],[{key:"sampleRate",value:function(e){return"development"===e?1:.3}}]),e}()},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(34),o=n(5),s=["treatment-code"],a={"37fdfa37698f251a":{enableTestEmails:!1,groups:s,name:"Lockbox Extension",rolloutRate:0},"3c49430b43dfba77":{enableTestEmails:!1,groups:s,name:"Android Components Reference Browser",rolloutRate:1},"98adfa37698f255b":{enableTestEmails:!0,groups:["treatment-code"],name:"Lockbox Extension iOS",rolloutRate:.25},ecdb5ae7add825d4:{enableTestEmails:!1,groups:s,name:"TestClient",rolloutRate:0}};e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="tokenCode",t.SYNC_ROLLOUT_RATE=0,t.ROLLOUT_CLIENTS=a,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),i(e,[{key:"choose",value:function(e){if(!(e&&e.uniqueUserId&&e.experimentGroupingRules&&e.isTokenCodeSupported&&e.account))return!1;if(e.clientId){var t=this.ROLLOUT_CLIENTS[e.clientId];if(t){var n=t.groups||s;if(t.enableTestEmails&&this.isTestEmail(e.account.get("email")))return this.uniformChoice(n,e.uniqueUserId);if(this.bernoulliTrial(t.rolloutRate,e.uniqueUserId))return this.uniformChoice(n,e.uniqueUserId)}return!1}return!(!e.service||e.service!==o.SYNC_SERVICE||!this.bernoulliTrial(this.SYNC_ROLLOUT_RATE,e.uniqueUserId))&&this.uniformChoice(s,e.uniqueUserId)}}]),e}()},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-500-header">{{#t}}500 Error{{/t}}</h1>\n  </header>\n\n  <section>\n    {{#t}}Oh dear, something went wrong there. We\'ve been notified and will get working on a fix.{{/t}}\n  </section>\n</div>\n\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-400-header">{{#t}}Bad Request{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error visible">{{message}}</div>\n  </section>\n</div>\n\n',e,t=t||{})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(69);o.forEach(o.keys(s.prototype),function(e){r.prototype[e]=function(){}}),r.prototype.flush=function(){return Promise.resolve()},r.prototype.isCollectionEnabled=function(){return!1},i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r=n(116),o=(i=r)&&i.__esModule?i:{default:i},s=n(8),a=n(2),c=n(4),u=n(3),l=n(67),d=n(47),h=n(48),f=n(9),p=n(13),g=c.Model.extend({initialize:function(e){this.sentryMetrics=(e=e||{}).sentryMetrics,this.window=e.window||window,this.metrics=e.metrics;var t=p.searchParams(this.window.location.search);this.populateFromStringifiedResumeToken(this.getSearchParam("resume")),this.has("flowId")?this.has("flowBegin")||this.logError(a.toMissingResumeTokenPropertyError("flowBegin")):this.has("flowBegin")?this.logError(a.toMissingResumeTokenPropertyError("flowId")):t.flow_begin_time&&t.flow_id?(this.set("flowId",t.flow_id),this.set("flowBegin",t.flow_begin_time),this.metrics.markEventLogged("flow.begin")):(this.populateFromDataAttribute("flowId"),this.populateFromDataAttribute("flowBegin")),this.has("deviceId")||this.set("deviceId",o.default.v4().replace(/-/g,""))},defaults:{deviceId:null,flowBegin:null,flowId:null},populateFromDataAttribute:function(e){var t=s(this.window.document.body).data(e);if(t){var n=this.resumeTokenSchema[e].validate(t);n.error?this.logError(a.toInvalidDataAttributeError(e)):this.set(e,n.value)}else this.logError(a.toMissingDataAttributeError(e))},logError:function(e){return l.captureError(e,this.sentryMetrics)},resumeTokenFields:["deviceId","flowId","flowBegin"],resumeTokenSchema:{deviceId:f.hex().len(32),flowBegin:f.number().test(function(e){return e===Math.round(e)}),flowId:f.hex().len(64)}});u.mixin(g,d,h),e.exports=g},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(0)),o=i(n(5)),s=/^(?:[a-fA-F0-9]{2})+$/,a=/^[A-Za-z0-9-_]+$/,c=/^[0-9A-HJ-NP-TV-Z]+$/,u=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/,l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,d=RegExp("^[a-z0-9]{"+o.default.UNBLOCK_CODE_LENGTH+"}$","i"),h=/^[\w.!#$%&'*+\/=?^`{|}~-]{1,64}@[a-z\d](?:[a-z\d-]{0,253}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,253}[a-z\d])?)+$/i,f=/^[0-9]{6}$/,p=/^([a-zA-Z0-9]{8,10})$/;e.exports={isEmailValid:function(e){return"string"==typeof e&&256>=e.length&&h.test(e)},isCodeValid:function(e){return"string"==typeof e&&(e.length===o.default.CODE_LENGTH&&s.test(e))},isOAuthCodeValid:function(e){return"string"==typeof e&&(e.length===o.default.OAUTH_CODE_LENGTH&&s.test(e))},isTokenValid:function(e){return"string"==typeof e&&s.test(e)},isUidValid:function(e){return"string"==typeof e&&(e.length===o.default.UID_LENGTH&&s.test(e))},isPasswordValid:function(e){return"string"==typeof e&&e.length>=o.default.PASSWORD_MIN_LENGTH},isPromptValid:function(e){return r.default.contains([o.default.OAUTH_PROMPT_CONSENT],e)},isUrlValid:function(e){return u.test(e)},isUuidValid:function(e){return l.test(e)},isAccessTypeValid:function(e){return r.default.contains([o.default.ACCESS_TYPE_OFFLINE,o.default.ACCESS_TYPE_ONLINE],e)},isHexValid:function(e){return s.test(e)},isBase32Valid:function(e){return c.test(e)},isUnblockCodeValid:function(e){return d.test(e)},isTotpCodeValid:function(e){return f.test(e)},isRecoveryCodeValid:function(e){return p.test(e)},isBase64Url:function(e){return a.test(e)}}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card loading">\n  <section>\n    <div class="error"></div>\n\n    <div class="spinner"></div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";var i,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();void 0===(i=function(e,t,i){function o(){var e=this;return function(){var e=this;try{if(window.crypto&&window.crypto.getRandomValues)return Promise.resolve(!0)}catch(e){}return this._fxaClient.getRandomBytes().then(function(t){e._jwcrypto.addEntropy(t)})}.call(this).then(function(){return u.denodeify(e._jwcrypto.generateKeypair)({algorithm:"DS",keysize:128})})}function s(e,t,n){var i=this;return o.call(this).then(function(r){return Promise.all([i._fxaClient.certificateSign(r.publicKey.toSimpleObject(),l,t,n),function(e,t,n){return u.denodeify(e.assertion.sign)(e,{},{audience:n,expiresAt:Date.now()+d},t)}(i._jwcrypto,r.secretKey,e)])})}function a(e){this._fxaClient=(e=e||{}).fxaClient,this._audience=e.audience}var c=n(30),u=n(52),l=new c("6h").milliseconds(),d=25*new c("52w").milliseconds();a.prototype={generate:function(e,t,i){var o=this;return n.e(18).then(n.t.bind(null,379,7)).then(function(n){return o._jwcrypto=n,s.call(o,t||o._audience,e,i)}).then(function(e){var t=r(e,2);return o._jwcrypto.cert.bundle([t[0].cert],t[1])})}},i.exports=a}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i=n(5),r=[{context:i.FX_SYNC_CONTEXT,Constructor:n(186)},{context:i.FX_DESKTOP_V2_CONTEXT,Constructor:n(189)},{context:i.FX_DESKTOP_V3_CONTEXT,Constructor:n(258)},{context:i.FX_FENNEC_V1_CONTEXT,Constructor:n(259)},{context:i.FX_FIRSTRUN_V1_CONTEXT,Constructor:n(192)},{context:i.FX_FIRSTRUN_V2_CONTEXT,Constructor:n(260)},{context:i.FX_IOS_V1_CONTEXT,Constructor:n(261)},{context:i.OAUTH_CONTEXT,Constructor:n(122)},{context:i.OAUTH_CHROME_ANDROID_CONTEXT,Constructor:n(266).default},{context:i.CONTENT_SERVER_CONTEXT,Constructor:n(194)},{context:i.DEVICE_PAIRING_AUTHORITY_CONTEXT,Constructor:n(267).default},{context:i.DEVICE_PAIRING_SUPPLICANT_CONTEXT,Constructor:n(269).default}].reduce(function(e,t){return e[t.context]=t.Constructor,e},{});e.exports={get:function(e){return r[e]||n(194)}}},function(e){"use strict";var t;void 0===(t=function(e,t,n){function i(){this._storage={}}i.prototype.getItem=function(e){return e?this._storage[e]:null},i.prototype.setItem=function(e,t){e&&(this._storage[e]=t)},i.prototype.removeItem=function(e){e&&delete this._storage[e]},i.prototype.clear=function(){this._storage={}},n.exports=i}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.experimentGroupingRules&&e.metrics&&e.notifier&&e.user&&e.window){this.window=e.window;var t=this.window.location.search;this.forceExperiment=a.default.searchParam(c,t),this.forceExperimentGroup=a.default.searchParam(u,t),this._activeExperiments={},this.account=e.account,this.experimentGroupingRules=e.experimentGroupingRules,this.metrics=e.metrics,this.notifier=e.notifier,this.translator=e.translator,this.user=e.user,this.initialized=!!(!this.window.navigator.webdriver&&0>this.window.navigator.userAgent.indexOf(l)||this.forceExperiment)}else this.initialized=!1}var o=i(n(0)),s=i(n(253)),a=i(n(13)),c="forceExperiment",u="forceExperimentGroup",l="FxATester",d={},h=o.default.extend({},d,{emailFirst:s.default,sendSms:s.default,tokenCode:s.default,totp:s.default});o.default.extend(r.prototype,{},{_activeExperiments:{},_startupExperiments:d,_allExperiments:h,destroy:function(){for(var e in this._activeExperiments){this._activeExperiments[e].destroy(),this._activeExperiments[e]=null,delete this._activeExperiments[e]}},isInExperiment:function(e,t){return!!this.getExperimentGroup(e,t)},isInExperimentGroup:function(e,t,n){return this.getExperimentGroup(e,n)===t},chooseExperiments:function(){if(this.initialized)for(var e in this._startupExperiments){var t=this.getExperimentGroup(e);t&&this.createExperiment(e,t)}},createExperiment:function(e,t){if(this._activeExperiments[e])return this._activeExperiments[e];var n=this._allExperiments[e];if(o.default.isFunction(n)){var i=new n;if(i.initialize(e,{groupType:t,metrics:this.metrics,notifier:this.notifier}))return this._activeExperiments[e]=i,i}},getExperimentGroup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!this.initialized&&this.experimentGroupingRules.choose(e,o.default.extend({account:this.account,experimentGroupingRules:this.experimentGroupingRules,forceExperiment:this.forceExperiment,forceExperimentGroup:this.forceExperimentGroup,isMetricsEnabledValue:this.metrics.isCollectionEnabled(),uniqueUserId:this.user.get("uniqueUserId")},t))}}),e.exports=r},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(4),a=n(68),c=n(26);o.extend(r.prototype,s.Events,{constructor:r,_name:null,notifications:{},_groupType:null,initialize:function(e,t){return this._initialized=!1,!!(e&&t&&t.groupType&&t.metrics&&t.notifier)&&(this._groupType=t.groupType,this.metrics=t.metrics,this._name=e,this._notifier=t.notifier,this.storage=t.storage||c.factory("localStorage"),this._loggingNamespace="experiment."+this._groupType+"."+this._name+".",this._storageNamespace="experiment."+this._name,this._initialized=!0,this.metrics.logExperiment(e,t.groupType),this.saveState("enrolled"),a.initialize.call(this,{notifier:t.notifier}),!0)},destroy:function(){this.stopListening()},logEvent:function(e){this._initialized&&e&&this.metrics.logEvent(this._loggingNamespace+e)},saveState:function(e){if(!e)return!1;var t={};try{t=JSON.parse(this.storage.get(this._storageNamespace))||{}}catch(e){}t[e]||this.logEvent(e),t[e]=!0,this.storage.set(this._storageNamespace,JSON.stringify(t))},hasState:function(e){if(!e)return null;var t={};try{t=JSON.parse(this.storage.get(this._storageNamespace))||{}}catch(e){}return!0===t[e]}}),r.createSaveStateDelegate=function(e){return function(){this.saveState(e)}},r.extend=s.Model.extend,i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i,r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();void 0===(i=function(e,t,i){var o=n(0),s=n(4),a=n(3),c=n(49),u=n(12),l=function(e){return e},d=[{checked:!0,id:"tabs",text:l("Open tabs")},{checked:!0,id:"bookmarks",text:l("Bookmarks")},{checked:!0,id:"addons",text:l("Add-ons")},{checked:!0,id:"passwords",text:l("Logins")},{checked:!0,id:"history",text:l("History")},{checked:!0,id:"prefs",text:l("Preferences")},{checked:!0,id:"addresses",test:function(){return!1},text:l("Addresses")},{checked:!0,id:"creditcards",test:function(){return!1},text:l("Credit cards")}],h=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Collection),r(e,[{key:"initialize",value:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.window=t.window,(t.engines||this.getSupportedEngineIds()).forEach(function(t){return e.addById(t)})}},{key:"getSupportedEngineIds",value:function(){var e=this,t=this.getUserAgent(),n=d.map(function(e){return e.id});return o.filter(n,function(n){return e.isEngineSupportedByUA(n,t)})}},{key:"isEngineSupportedByUA",value:function(t,n){var i=e.getEngineConfig(t);return!i.test||i.test(n)}},{key:"addById",value:function(t){var n=e.getEngineConfig(t);n&&!this.get(t)&&this.add(n)}}],[{key:"getEngineConfig",value:function(e){return o.find(d,function(t){return t.id===e})}}]),e}();a.mixin(h,c,u),i.exports=h}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){return 3===e.length?o.denodeify(e):e}var o=n(52);i.exports={send:function(e,t){var n=this.getChannel(),i=r(n.send.bind(n));return i(e,t)},request:function(e,t){var n=this.getChannel(),i=r((n.request||n.send).bind(n));return i(e,t)}}}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(4),a=n(18),c=n(50);o.extend(r.prototype,s.Events,{initialize:function(e){this._window=(e=e||{}).window,this._boundReceiveMessage=this.receiveMessage.bind(this),this._window.addEventListener("WebChannelMessageToContent",this._boundReceiveMessage,!0),this._webChannelId=e.webChannelId,this._logger=new a(this._window)},receiveMessage:function(e){var t=e.detail;if(t&&t.id){if(t.id===this._webChannelId){var n=t.message;if(n){var i=this._extractErrorFromMessage(n);i?(this._reportError(i),n.error=i,this.trigger("error",n)):this.trigger("message",n)}}}else this._logger.error("malformed WebChannelMessageToContent event",JSON.stringify(t))},_reportError:function(e){this._logger.error("WebChannel error:",e.message),c.captureMessage("WebChannel error: "+e.message,{extra:{stackTrace:e.stack}})},_extractErrorFromMessage:function(e){return e.error&&o.isString(e.error)?{message:e.error,stack:null}:e.data&&e.data.error?{message:e.data.error.message,stack:e.data.error.stack}:void 0},teardown:function(){this._window.removeEventListener("WebChannelMessageToContent",this._boundReceiveMessage,!0)}}),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}function o(e,t){return new e.CustomEvent("WebChannelMessageToChrome",{detail:function(e,t){var n=new s(e.navigator.userAgent);return!n.isFirefoxDesktop()&&!n.isFirefoxAndroid()||50>n.browser.version?t:JSON.stringify(t)}(e,t)})}var s=n(54);r.prototype={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._window=e.window,this._webChannelId=e.webChannelId},send:function(e,t,n){var i=this;return Promise.resolve().then(function(){i._saveEventName(e);var r=function(e,t,n,i){return{id:e,message:{command:t,data:n,messageId:i}}}(i._webChannelId,e,t,n),s=o(i._window,r);i._window.dispatchEvent(s)})},teardown:function(){},_saveEventName:function(e){var t=void 0;try{t=JSON.parse(this._window.sessionStorage.getItem("webChannelEvents"))||[]}catch(e){t=[]}t.push(e);try{this._window.sessionStorage.setItem("webChannelEvents",JSON.stringify(t))}catch(e){}}},i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(3),s=n(189),a=n(12),c=s.prototype,u=s.extend({defaultCapabilities:r.extend({},c.defaultCapabilities,{allowUidChange:!0,emailFirst:!0,tokenCode:!1}),type:"fx-desktop-v3",fetch:function(){var e=this;return c.fetch.call(this).then(function(){58>e.getUserAgent().parseVersion().major||e.setCapability("browserTransitionsAfterEmailVerification",!1)})}});o.mixin(u,a),i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(118),s=o.extend({defaultCapabilities:r.extend({},o.prototype.defaultCapabilities,{browserTransitionsAfterEmailVerification:!1,chooseWhatToSyncCheckbox:!1,chooseWhatToSyncWebV1:!0,emailVerificationMarketingSnippet:!1}),type:"fx-fennec-v1"});i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(192),s=o.prototype,a=o.extend({type:"fx-firstrun-v2",defaultCapabilities:r.extend({},s.defaultCapabilities,{chooseWhatToSyncCheckbox:!1,chooseWhatToSyncWebV1:!0}),notifications:r.extend({},s.notifications,{"form.engaged":"_sendFormEngaged","show-child-view":"_onShowChildView","show-view":"_onShowView"}),_iframeCommands:r.extend({},s._iframeCommands,{FORM_ENGAGED:"form_engaged",NAVIGATED:"navigated"}),_sendFormEngaged:function(){this._iframeChannel.send(this._iframeCommands.FORM_ENGAGED)},_onShowView:function(e,t){this._sendNavigated(t.currentPage)},_onShowChildView:function(e,t,n){this._sendNavigated(n.currentPage)},_sendNavigated:function(e){this._iframeChannel.send(this._iframeCommands.NAVIGATED,{url:e})}});i.exports=a}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(262),s=n(25),a=n(54),c=o.prototype,u=o.extend({defaultCapabilities:r.extend({},c.defaultCapabilities,{chooseWhatToSyncCheckbox:!1,chooseWhatToSyncWebV1:!0,convertExternalLinksToText:!0}),initialize:function(){c.initialize.call(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});var e=new a(this._getUserAgentString()).parseVersion();this._supportsChooseWhatToSync(e)||this.setCapability("chooseWhatToSyncWebV1",!1),this.setBehavior("afterSignInConfirmationPoll",new s("signin_confirmed")),this.setBehavior("afterSignUpConfirmationPoll",new s("signup_confirmed"))},_getUserAgentString:function(){return this.getSearchParam("forceUA")||this.window.navigator.userAgent},_supportsChooseWhatToSync:function(e){return e.major>=11},_notifyRelierOfLogin:function(e){return c._notifyRelierOfLogin.call(this,e)},afterCompleteSignInWithCode:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return c.afterCompleteSignInWithCode.call(t,e)})}});i.exports=u}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(263),s=n(190),a=n(42),c=n(13),u=s.prototype,l=s.extend({type:"fx-desktop-v1",commands:{CAN_LINK_ACCOUNT:"can_link_account",CHANGE_PASSWORD:"change_password",DELETE_ACCOUNT:"delete_account",LOADED:"loaded",LOGIN:"login"},defaultBehaviors:r.extend({},u.defaultBehaviors,{afterForceAuth:new a,afterResetPasswordConfirmationPoll:new a,afterSignIn:new a,afterSignInConfirmationPoll:new a,afterSignUpConfirmationPoll:new a}),createChannel:function(){var e=new o;return e.initialize({origin:this.window.location.origin||c.getOrigin(this.window.location.href),window:this.window}),e.on("error",this.trigger.bind(this,"error")),e},afterResetPasswordConfirmationPoll:function(e){var t=this;return e.has("customizeSync")||e.set("customizeSync",!1),this._notifyRelierOfLogin(e).then(function(){return u.afterResetPasswordConfirmationPoll.call(t,e)})}});i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(120),a=n(264),c=n(193);o.extend(r.prototype,new s,{initialize:function(e){var t=(e=e||{}).window||window,n=this._sender=new a;n.initialize({window:t});var i=this._receiver=new c;i.initialize({origin:e.origin,window:t}),s.prototype.initialize.call(this,{receiver:i,sender:n,window:t})},createMessageId:function(e){return e},parseMessage:function(e){if(!e||!e.content)throw Error("malformed message");var t=e.content;return{command:t.status,data:t.data,messageId:t.status}}}),i.exports=r}(0,0,e))||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){function i(){}i.prototype={initialize:function(e){this._window=(e=e||{}).window},send:function(e,t,n){var i=this;return Promise.resolve().then(function(){return i.dispatchCommand(e,t,n)})},dispatchCommand:function(e,t){var n=this._window,i=function(e,t,n){return new e.CustomEvent("FirefoxAccountsCommand",{detail:{bubbles:!0,command:t,data:n}})}(n,e,t);n.dispatchEvent(i)},teardown:function(){}},n.exports=i}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return(0,o.default)().then(function(i){return(0,s.default)(e,"input key"),(0,s.default)(t,"uid"),(0,s.default)(n,"key data"),(new i.ScopedKeys).deriveScopedKey({identifier:n.identifier,inputKey:e,keyRotationSecret:n.keyRotationSecret,keyRotationTimestamp:n.keyRotationTimestamp,uid:t})})}var o=i(n(75)),s=i(n(55));e.exports={createEncryptedBundle:function(e,t,n,i){var s=Object.keys(n).map(function(i){return r(e.kB,t,n[i])});return Promise.all(s).then(function(e){var t={};return e.forEach(function(e){t[e.scope]=e}),(0,o.default)().then(function(e){return(new e.DeriverUtils).encryptBundle(i,JSON.stringify(t))})})},_deriveScopedKeys:r}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(122)),s=i(n(25)),a=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,o.default),r(e,[{key:"afterSignInConfirmationPoll",value:function(e){return new s.default("signin_confirmed",{account:e,continueBrokerMethod:"finishOAuthSignInFlow"})}},{key:"afterSignUpConfirmationPoll",value:function(e){return new s.default("signup_confirmed",{account:e,continueBrokerMethod:"finishOAuthSignUpFlow"})}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},a=i(n(268)),c=i(n(73)),u=i(n(197)),l=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,s=Array(o),a=0;o>a;a++)s[a]=arguments[a];return n=i=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.type="authority",i.setRemoteMetaData=u.default,r(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,c.default),o(e,[{key:"initialize",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this,t),this.stateMachine=new a.default({},{broker:this,notifier:t.notifier,relier:this.relier})}},{key:"fetch",value:function(){var t=this;return Promise.resolve().then(function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"fetch",t).call(t)}).then(function(){return t.getSupplicantMetadata()}).then(function(){return t.startHeartbeat()})}},{key:"startHeartbeat",value:function(){var e=this;this._heartbeatInterval=setInterval(function(){return e.heartbeat()},arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}},{key:"stopHeartbeat",value:function(){clearInterval(this._heartbeatInterval)}},{key:"heartbeat",value:function(){var e=this;this.request(this._notificationChannel.COMMANDS.PAIR_HEARTBEAT).then(function(t){t.err?e.stateMachine.heartbeatError(t.err):t.suppAuthorized&&e.notifier.trigger("pair:supp:authorize")})}},{key:"getSupplicantMetadata",value:function(){var e=this,t=this.get("remoteMetaData");return t?Promise.resolve(t):this.request(this._notificationChannel.COMMANDS.PAIR_REQUEST_SUPPLICANT_METADATA).then(function(t){return e.setRemoteMetaData(t),e.get("remoteMetaData")})}},{key:"afterPairAuthAllow",value:function(){var e=this;return this.request(this._notificationChannel.COMMANDS.PAIR_AUTHORIZE).then(function(){e.notifier.trigger("pair:auth:authorize")})}},{key:"afterPairAuthDecline",value:function(){return this.request(this._notificationChannel.COMMANDS.PAIR_DECLINE)}},{key:"afterPairAuthComplete",value:function(){return this.request(this._notificationChannel.COMMANDS.PAIR_COMPLETE)}},{key:"request",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.resolve().then(function(){return n.channel_id=t.relier.get("channelId"),t._notificationChannel.request(e,n)})}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorityStateMachine=t.PairAuthFailure=t.PairAuthComplete=t.WaitForAuthorityAuthorize=t.WaitForSupplicantAuthorize=t.WaitForAuthorizations=void 0;var s,a=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(195),u=n(196),l=(s=u)&&s.__esModule?s:{default:s},d=function(){function e(){var t;i(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return a.name="WaitForAuthorizations",a.navigate("pair/auth/allow"),a.listenTo(a.notifier,"pair:supp:authorize",function(){a.gotoState(f)}),a.listenTo(a.notifier,"pair:auth:authorize",function(e){a.gotoState(h,e)}),a}return o(e,c.State),e}(),h=function(){function e(){var t;i(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return a.name="WaitForSupplicantAuthorize",a.navigate("/pair/auth/wait_for_supp"),a.listenTo(a.notifier,"pair:supp:authorize",function(){a.gotoState(p,{})}),a}return o(e,c.State),e}(),f=function(){function e(){var t;i(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return a.name="WaitForAuthApprove",a.listenTo(a.notifier,"pair:auth:authorize",function(){a.gotoState(p)}),a}return o(e,c.State),e}(),p=function(){function e(){var t;i(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return a.navigate("pair/auth/complete"),a}return o(e,c.State),e}(),g=function(){function e(){var t;i(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return a.navigate("pair/failure"),a}return o(e,c.State),e}(),m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.createState(d),o}return o(e,l.default),a(e,[{key:"heartbeatError",value:function(e){this.createState(g,{error:e})}}]),e}();t.default=m,t.WaitForAuthorizations=d,t.WaitForSupplicantAuthorize=h,t.WaitForAuthorityAuthorize=f,t.PairAuthComplete=p,t.PairAuthFailure=g,t.AuthorityStateMachine=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(122)),a=i(n(270)),c=i(n(197)),u=i(n(272)),l=i(n(13)),d=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,s=Array(o),a=0;o>a;a++)s[a]=arguments[a];return n=i=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.type="supplicant",i.setRemoteMetaData=c.default,r(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),o(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this,t);var n=t.notifier,i=t.relier,r=t.config.pairingChannelServerUri,o=i.toJSON(),s=o.channelId,c=o.channelKey;if(!(s&&c&&r))throw Error("Failed to initialize supplicant");this.pairingChannelClient=new a.default({channelId:s,channelKey:c,channelServerUri:r},{importPairingChannel:t.importPairingChannel,notifier:n}),this.suppStateMachine=new u.default({},{broker:this,notifier:n,pairingChannelClient:this.pairingChannelClient,relier:i}),this.pairingChannelClient.open()}},{key:"afterSupplicantApprove",value:function(){var e=this;return Promise.resolve().then(function(){e.notifier.trigger("pair:supp:authorize")})}},{key:"sendCodeToRelier",value:function(){var e=this;return Promise.resolve().then(function(){var t=e.relier,n={redirect:l.default.updateSearchString(t.get("redirectUri"),t.pick("code","state"))};e.sendOAuthResultToRelier(n)})}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(198)),s=n(4),a=n(0),c=n(271),u=i(n(50)),l=i(n(9)),d={data:l.default.any(),message:l.default.string().required()},h={city:l.default.string(),country:l.default.string(),region:l.default.string(),remote:l.default.string(),ua:l.default.string()},f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.sentryMetrics=n.sentryMetrics||u.default,i._importPairingChannel=n.importPairingChannel,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Model),r(e,[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get("channelServerUri"),t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.get("channelId"),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.get("channelKey");return this._importPairingChannel().then(function(r){if(t.channel)throw o.default.toError("ALREADY_CONNECTED");if(!e||!n||!i)throw o.default.toError("INVALID_CONFIGURATION");var s=(0,c.base64urlToUint8Array)(i);return r.PairingChannel.connect(e,n,s).then(function(e){t.channel=e,t.trigger("connected"),t.channel.addEventListener("message",t._messageHandler.bind(t)),t.channel.addEventListener("error",t._errorHandler.bind(t)),t.channel.addEventListener("close",t._closeHandler.bind(t))}).catch(function(e){t.sentryMetrics.captureException(e),t.trigger("error",e)})})}},{key:"close",value:function(){var e=this;return Promise.resolve().then(function(){if(!e.channel)throw o.default.toError("NOT_CONNECTED");return e.channel.close().then(function(){e.channel=null},function(t){e.channel=null,e.sentryMetrics.captureException(t)})})}},{key:"send",value:function(e){return this.channel?e?this.channel.send({data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},message:e}):Promise.reject(o.default.toError("INVALID_OUTBOUND_MESSAGE")):Promise.reject(o.default.toError("NOT_CONNECTED"))}},{key:"_messageHandler",value:function(e){try{var t=e.detail,n=t.data,i=t.sender,r=l.default.validate(n,d),s=l.default.validate(i,h);if(r.error||s.error)throw o.default.toError("INVALID_MESSAGE");var c=n.data,u=void 0===c?{}:c,f=n.message;u.remoteMetaData=(0,a.pick)(i,"city","country","region","ua"),u.remoteMetaData.ipAddress=i.remote,this.trigger("remote:"+f,u)}catch(e){this.sentryMetrics.captureException(e),this.trigger("error",e)}}},{key:"_errorHandler",value:function(e){this.sentryMetrics.captureException(e.detail),this.trigger("error",o.default.toError("UNEXPECTED_ERROR"))}},{key:"_closeHandler",value:function(){this.trigger("close")}}]),e}();t.default=f},function(e){"use strict";e.exports={base64urlToUint8Array:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=(e=e.replace(/-/g,"+")).replace(/_/g,"/");for(var t=atob(e),n=t.length,i=new Uint8Array(n),r=0;n>r;r++)i[r]=t.charCodeAt(r);return i}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=this;return Promise.resolve().then(function(){n.relier.validateApprovalData(t),n.relier.set({code:t.code}),n.gotoState(e)}).catch(function(e){return n.trigger("error",e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.SupplicantStateMachine=t.SendResultToRelier=t.WaitForAuthorityAuthorize=t.WaitForSupplicantAuthorize=t.WaitForAuthorizations=t.SendOAuthRequestWaitForAccountMetadata=t.WaitForConnectionToChannelServer=t.SupplicantState=void 0;var c=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=i(n(198)),l=n(195),d=i(n(196)),h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.pairingChannelClient=n.pairingChannelClient,i.listenTo(i.pairingChannelClient,"close",function(){return i.socketClosed()}),i.listenTo(i.pairingChannelClient,"error",function(e){return i.socketError(e)}),i}return s(e,l.State),c(e,[{key:"socketClosed",value:function(){this.navigate("pair/failure",{error:u.default.toError("CONNECTION_CLOSED")})}},{key:"socketError",value:function(e){this.navigate("pair/failure",{error:e})}}]),e}(),f=function(){function e(){var t;r(this,e);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var a=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return a.name="WaitForConnectionToChannelServer",a.listenTo(a.pairingChannelClient,"connected",function(){a.gotoState(p)}),a}return s(e,h),c(e,[{key:"socketClosed",value:function(){}}]),e}(),p=function(){function e(){var t;r(this,e);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var a=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return a.name="WaitForAccountMetadata",a.pairingChannelClient.send("pair:supp:request",a.relier.getOAuthParams()).then(function(){a.listenTo(a.pairingChannelClient,"remote:pair:auth:metadata",function(e){a.broker.setRemoteMetaData(e.remoteMetaData),a.gotoState(g,e)})}),a}return s(e,h),e}(),g=function(){function e(){var t;r(this,e);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var c=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return c.name="WaitForApprovals",c.onAuthorityAuthorize=a.bind(c,m),c.navigate("pair/supp/allow",{deviceName:c.get("deviceName")}),c.listenTo(c.pairingChannelClient,"remote:pair:auth:authorize",c.onAuthorityAuthorize),c.listenTo(c.notifier,"pair:supp:authorize",function(){c.pairingChannelClient.send("pair:supp:authorize").then(function(){c.gotoState(v)})}),c}return s(e,h),e}(),m=function(){function e(){var t;r(this,e);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var a=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return a.name="WaitForSupplicantAuthorize",a.listenTo(a.notifier,"pair:supp:authorize",function(){a.pairingChannelClient.send("pair:supp:authorize").then(function(){return a.gotoState(_)})}),a}return s(e,h),e}(),v=function(){function e(){var t;r(this,e);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var c=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return c.name="WaitForAuthorityAuthorize",c.onAuthorityAuthorize=a.bind(c,_),c.navigate("pair/supp/wait_for_auth"),c.listenTo(c.pairingChannelClient,"remote:pair:auth:authorize",c.onAuthorityAuthorize),c}return s(e,h),e}(),_=function(){function e(){var t;r(this,e);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var a=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return a.name="SendResultToRelier",a.broker.sendCodeToRelier().then(function(){a.gotoState(l.State)}).catch(function(e){return a.trigger("error",e)}),a}return s(e,h),c(e,[{key:"socketClosed",value:function(){}}]),e}(),y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.createState(f),i}return s(e,d.default),e}();t.default=y,t.SupplicantState=h,t.WaitForConnectionToChannelServer=f,t.SendOAuthRequestWaitForAccountMetadata=p,t.WaitForAuthorizations=g,t.WaitForSupplicantAuthorize=m,t.WaitForAuthorityAuthorize=v,t.SendResultToRelier=_,t.SupplicantStateMachine=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(24)),s=i(n(123)),a={channel_id:i(n(9)).default.channelId().required().renameTo("channelId")},c=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),r(e,[{key:"fetch",value:function(){var t=this;return Promise.resolve().then(function(){return t.importSearchParamsUsingSchema(a,o.default),function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"fetch",t).call(t)})}}]),e}();t.default=c},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4).Model.extend({defaults:{context:null},fetch:function(){return Promise.resolve(!0)},isOAuth:function(){return!1},isSync:function(){return!1},isCustomizeSyncChecked:function(){return!1},wantsKeys:function(){return!1},wantsTwoStepAuthentication:function(){return!1},pickResumeTokenInfo:function(){return{}},isTrusted:function(){return!0},accountNeedsPermissions:function(){return!1}});i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4).Model.extend({defaults:{age:null,email:null,password:null}});i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){return f.trim(e)}function o(e,t){return e.wantsKeys()||h.contains(E,t)}function s(e){var t=Object.create(e);for(var n in e)"function"==typeof e[n]&&(t[n]=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];var r=this[e].apply(this,n);return r.then?r.then(null,function(e){throw p.toError(e)}):r}.bind(e,n));return t}function a(e){return function(){for(var t=this,n=arguments.length,i=Array(n),r=0;n>r;r++)i[r]=arguments[r];return this._getClient().then(function(n){return e.apply(t,[n].concat(i))})}}function c(e){return function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return this._getClient().then(function(t){if(!h.isFunction(t[e]))throw Error("Invalid method on fxa-js-client: "+e);return t[e].apply(t,n)})}}function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.sessionTokenContext;!r&&t.isSync()&&(r=g.SESSION_TOKEN_USED_FOR_SYNC);var s={email:e,sessionToken:n.sessionToken,sessionTokenContext:r,uid:n.uid,verificationMethod:n.verificationMethod,verificationReason:n.verificationReason,verified:n.verified||!1};return o(t,r)&&(s.unwrapBKey=n.unwrapBKey,s.keyFetchToken=n.keyFetchToken),t.isSync()&&(s.customizeSync=i.customizeSync||!1),s}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.client?this._client=s(e.client):e.authServerUrl&&(this._authServerUrl=e.authServerUrl)}function d(e,t){t.metricsContext&&(e.metricsContext=t.metricsContext)}var h=n(0),f=n(8),p=n(2),g=n(5),m=n(277),v=n(27),_=n(199),y=n(36),w=n(51),E=[g.IFRAME_CONTEXT,g.FX_DESKTOP_V1_CONTEXT,g.FX_DESKTOP_V2_CONTEXT,g.FX_DESKTOP_V3_CONTEXT,g.FX_FENNEC_V1_CONTEXT,g.FX_FIRSTRUN_V2_CONTEXT];l.prototype={_getClient:function(){var e=this;return this._client?Promise.resolve(this._client):n.e(20).then(n.t.bind(null,214,7)).then(function(t){var n=new t.default(e._authServerUrl);return e._client=s(n),e._client})},getRandomBytes:c("getRandomBytes"),checkPassword:a(function(e,t,n,i){return i?e.sessionReauth(i,t,n,{reason:_.PASSWORD_CHECK}):e.signIn(t,n,{reason:_.PASSWORD_CHECK}).then(function(t){if(t&&t.sessionToken)return e.sessionDestroy(t.sessionToken)})}),checkAccountExists:a(function(e,t){return e.accountStatus(t).then(function(e){return e.exists})}),checkAccountExistsByEmail:a(function(e,t){return e.accountStatusByEmail(t).then(function(e){return e.exists})}),signIn:a(function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r(t),c={keys:o(i),reason:s.reason||_.SIGN_IN};return i.has("service")&&(c.service=i.get("service")),i.has("redirectTo")&&(c.redirectTo=i.get("redirectTo")),s.unblockCode&&(c.unblockCode=s.unblockCode),s.resume&&(c.resume=s.resume),s.skipCaseError&&(c.skipCaseError=s.skipCaseError),s.originalLoginEmail&&(c.originalLoginEmail=s.originalLoginEmail),s.verificationMethod&&(c.verificationMethod=s.verificationMethod),d(c,s),e.signIn(a,n,c).then(function(e){return e.verified||e.hasOwnProperty("verificationReason")||(e.verificationReason=y.SIGN_UP,e.verificationMethod=c.verificationMethod?c.verificationMethod:w.EMAIL),u(a,i,e,s)})}),sessionReauth:a(function(e,t,n,i,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=r(n),l={keys:o(s),reason:a.reason||_.SIGN_IN};return s.has("service")&&(l.service=s.get("service")),s.has("redirectTo")&&(l.redirectTo=s.get("redirectTo")),a.unblockCode&&(l.unblockCode=a.unblockCode),a.resume&&(l.resume=a.resume),a.skipCaseError&&(l.skipCaseError=a.skipCaseError),a.originalLoginEmail&&(l.originalLoginEmail=a.originalLoginEmail),a.verificationMethod&&(l.verificationMethod=a.verificationMethod),d(l,a),e.sessionReauth(t,c,i,l).then(function(e){return e.sessionToken=t,u(c,s,e,a)})}),signUp:a(function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r(t),c={keys:o(i)};return i.has("service")&&(c.service=i.get("service")),i.has("redirectTo")&&(c.redirectTo=i.get("redirectTo")),s.preVerified&&(c.preVerified=!0),s.resume&&(c.resume=s.resume),d(c,s),e.signUp(a,n,c).then(function(e){return u(a,i,e,s)})}),signUpResend:a(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r={redirectTo:t.get("redirectTo"),service:t.get("service")};return i.resume&&(r.resume=i.resume),e.recoveryEmailResendCode(n,r)}),sessionVerifyResend:a(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={type:"upgradeSession"};return n.redirectTo&&(i.redirectTo=n.redirectTo),e.recoveryEmailResendCode(t,i)}),sessionDestroy:c("sessionDestroy"),verifyCode:c("verifyCode"),passwordReset:a(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r(t),s={redirectTo:n.get("redirectTo"),service:n.get("service")};return i.resume&&(s.resume=i.resume),d(s,i),e.passwordForgotSendCode(o,s).then(function(e){return v.clear(),e})}),passwordResetResend:a(function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=r(t),a={redirectTo:i.get("redirectTo"),service:i.get("service")};return o.resume&&(a.resume=o.resume),e.passwordForgotResendCode(s,n,a)}),completePasswordReset:a(function(e,t,n,i,s,a){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=r(t),d={keys:o(a),sessionToken:!0};return e.passwordForgotVerifyCode(s,i,{}).then(function(t){var i=l;return c.emailToHashWith&&(i=r(c.emailToHashWith)),e.accountReset(i,n,t.accountResetToken,d)}).then(function(e){return u(l,a,e)})}),isPasswordResetComplete:a(function(e,t){return e.passwordForgotStatus(t).then(function(){return!1},function(e){if(p.is(e,"INVALID_TOKEN"))return!0;throw e})}),changePassword:a(function(e,t,n,i,s,a,c){var l=r(t);return e.passwordChange(l,n,i,{keys:o(c,a),sessionToken:s}).then(function(){return u(l,c,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sessionTokenContext:a})})}),deleteAccount:a(function(e,t,n,i){var o=r(t);return e.accountDestroy(o,n,{},i)}),certificateSign:a(function(e,t,n,i,r){return e.certificateSign(i,t,n,{service:r||g.CONTENT_SERVER_SERVICE})}),sessionStatus:c("sessionStatus"),isSignedIn:function(e){return e?this.sessionStatus(e).then(function(){return!0},function(e){if(p.is(e,"INVALID_TOKEN"))return!1;throw e}):Promise.resolve(!1)},recoveryEmailStatus:a(function(e,t){return e.recoveryEmailStatus(t).then(function(e){return e.verified?h.pick(e,"email","verified"):{email:e.email,verificationReason:e.emailVerified?y.SIGN_IN:y.SIGN_UP,verified:!1}})}),sessionVerificationStatus:c("recoveryEmailStatus"),accountKeys:c("accountKeys"),deviceList:c("deviceList"),sessions:c("sessions"),deviceDestroy:c("deviceDestroy"),sendUnblockEmail:a(function(e,t){var n={};return d(n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),e.sendUnblockCode(t,n)}),rejectUnblockCode:c("rejectUnblockCode"),sendSms:a(function(e,t,n,i){return e.sendSms(t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).catch(function(e){if(function(e){return p.is(e,"INVALID_PARAMETER")&&e.validation&&e.validation.keys&&"phoneNumber"===e.validation.keys[0]}(e))throw p.toError("INVALID_PHONE_NUMBER");throw e})}),smsStatus:c("smsStatus"),consumeSigninCode:c("consumeSigninCode"),recoveryEmails:c("recoveryEmails"),recoveryEmailCreate:c("recoveryEmailCreate"),recoveryEmailDestroy:c("recoveryEmailDestroy"),resendEmailCode:c("recoveryEmailResendCode"),deleteEmail:c("deleteEmail"),recoveryEmailSetPrimaryEmail:c("recoveryEmailSetPrimaryEmail"),verifyTokenCode:c("verifyTokenCode"),createTotpToken:c("createTotpToken"),deleteTotpToken:c("deleteTotpToken"),checkTotpTokenExists:c("checkTotpTokenExists"),verifyTotpCode:c("verifyTotpCode"),consumeRecoveryCode:c("consumeRecoveryCode"),replaceRecoveryCodes:c("replaceRecoveryCodes"),createRecoveryBundle:a(function(e,t,n,i,r){var o=void 0,s=void 0,a=void 0;return e.sessionReauth(i,t,n,{keys:!0,reason:y.RECOVERY_KEY}).then(function(t){return e.accountKeys(t.keyFetchToken,t.unwrapBKey)}).then(function(e){return s=e,m.generateRecoveryKey(g.RECOVERY_KEY_LENGTH).then(function(e){return m.getRecoveryJwk(r,o=e)})}).then(function(e){return m.bundleRecoveryData(a=e,s)}).then(function(t){return e.createRecoveryKey(i,a.kid,t)}).then(function(){return{recoveryKey:o}})}),deleteRecoveryKey:c("deleteRecoveryKey"),recoveryKeyExists:c("recoveryKeyExists"),passwordForgotVerifyCode:a(function(e,t,n){return e.passwordForgotVerifyCode(t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}),getRecoveryBundle:a(function(e,t,n,i){return m.getRecoveryJwk(n,i).then(function(n){return e.getRecoveryKey(t,n.kid).then(function(e){return m.unbundleRecoveryData(n,e.recoveryData)}).then(function(e){return{keys:e,recoveryKeyId:n.kid}})})}),resetPasswordWithRecoveryKey:a(function(e,t,n,i,r,o,s){return e.resetPasswordWithRecoveryKey(t,n,i,r,{kB:o},{keys:!0,sessionToken:!0}).then(function(e){return u(n,s,e)})})},i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";!function(t){function i(e){return e&&e.__esModule?e:{default:e}}function r(){return u}var o=i(n(278)),s=i(n(279)),a=i(n(281)),c=i(n(55)),u="A";e.exports={generateRecoveryKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Promise.resolve().then(function(){if(27>e)throw Error("Recovery key length must be at least 27");return s.default.generate(e-1).then(function(e){return r()+e})})},getCurrentRecoveryKeyVersion:function(){return r()},getRecoveryJwk:function(e,n){return Promise.resolve().then(function(){return(0,c.default)(e,"uid"),(0,c.default)(n,"recoveryKey"),s.default.decode(n).then(function(n){var i=t.from(e,"hex"),r=t.from("fxa recovery encrypt key","utf8"),s=t.from("fxa recovery fingerprint","utf8");return Promise.all([(0,a.default)(n,i,r,32),(0,a.default)(n,i,s,16)]).then(function(e){return o.default.createJwkFromKey(e[0],e[1].toString("hex"))})})})},bundleRecoveryData:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Promise.resolve().then(function(){return(0,c.default)(e,"recoveryJwk"),o.default.encrypt(JSON.stringify(t),e,n)})},unbundleRecoveryData:function(e,t){return Promise.resolve().then(function(){return(0,c.default)(e,"recoveryJwk"),(0,c.default)(t,"recoveryBundle"),o.default.decrypt(t,e).then(function(e){return JSON.parse(e)}).catch(function(e){if("OperationError"===e.name)throw Error("Failed to unbundle recovery data");throw e})})}}}(n(182).Buffer)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(75)),o=i(n(55));t.default={createJwkFromKey:function(e,t){return(0,r.default)().then(function(n){var i=n.jose;(0,o.default)(e,"key");var r={alg:"A256GCM",k:e,kty:"oct"};return void 0!==t&&(r.kid=t),i.JWK.asKey(r)})},encrypt:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,r.default)().then(function(i){var r=i.jose;(0,o.default)(e,"plaintext"),(0,o.default)(t,"keysJwk");var s={header:{alg:"dir",enc:"A256GCM"},key:t},a={contentAlg:"A256GCM",format:"compact"};return n.unsafeExplicitIV&&(a.iv=r.util.base64url.encode(n.unsafeExplicitIV,"hex")),r.JWE.createEncrypt(a,s).update(e).final()})},decrypt:function(e,t){return(0,r.default)().then(function(n){var i=n.jose;return(0,o.default)(e,"ciphertext"),(0,o.default)(t,"keysJwk"),i.JWE.createDecrypt(t,{algorithms:["dir","A256GCM"]}).decrypt(e).then(function(e){return""+e.plaintext})})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(280)),o=i(n(75));e.exports={generate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return(0,o.default)().then(function(t){for(var n=t.jose.util.randomBytes(e),i=[],r=0;e>r;r++)i.push("0123456789ABCDEFGHJKMNPQRSTVWXYZ"[31&n[r]]);return i.join("")})},decode:function(e){return Promise.resolve((0,r.default)(e,"Crockford"))}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(75)),o=i(n(55));t.default=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;return(0,r.default)().then(function(r){var s=r.jose;return(0,o.default)(e,"ikmBuffer"),s.JWA.derive("HKDF-SHA-256",e,{info:n,length:i,salt:t})})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){this._targetEl=(e=e||{}).target,this._window=e.window,"delayMS"in e&&(this._delayMS=e.delayMS)}var o=n(0),s=n(4);o.extend(r.prototype,s.Events,{_delayMS:50,start:function(){if(this._observer)throw Error("Already started");var e=this._window.MutationObserver;if(e){var t=o.debounce(this._onMutation.bind(this),this._delayMS);this._observer=new e(t),this._observer.observe(this._targetEl,{attributeFilter:["class","style"],attributes:!0,characterData:!0,childList:!0,subtree:!0}),this._onMutation()}},_lastHeight:-1/0,_onMutation:function(){var e=this._targetEl.clientHeight;"number"==typeof e&&e!==this._lastHeight&&(this.trigger("change",e),this._lastHeight=e)},stop:function(){var e=this._observer;e&&(e.disconnect(),delete this._observer)}}),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(120),a=n(193),c=n(284);o.extend(r.prototype,new s,{initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.origin=e.origin;var t=e.window||window,n=this._sender=new c;n.initialize({origin:e.origin,window:t.parent});var i=this._receiver=new a;i.initialize({origin:e.origin,window:t}),s.prototype.initialize.call(this,{receiver:i,sender:n,window:t})},receiveEvent:function(e){return this._receiver.receiveEvent(e)},parseMessage:function(e){try{return r.parse(e)}catch(e){return{}}}}),r.stringify=function(e,t){return JSON.stringify({command:e,data:t||{}})},r.parse=function(e){var t=JSON.parse(e);return t.messageId||(t.messageId=t.command),t},i.exports=r}(0,0,e))||(e.exports=i)},function(e){"use strict";var t;void 0===(t=function(e,t,n){function i(){}i.prototype={initialize:function(e){this._origin=(e=e||{}).origin,this._window=e.window},send:function(e,t,n){var i=this;return Promise.resolve().then(function(){var r=function(e,t,n){return JSON.stringify({command:e,data:t||{},messageId:n})}(e,t,n);i._window.postMessage(r,i._origin)})},teardown:function(){}},n.exports=i}(0,0,e))||(e.exports=t)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window||window;"BroadcastChannel"in e&&(this._broadcastChannel=new e.BroadcastChannel(a),this._broadcastChannel.onmessage=this.onMessage.bind(this))}var o=n(0),s=n(4),a="firefox_accounts";o.extend(r.prototype={onMessage:function(e){var t=JSON.parse(e.data);this.trigger(t.name,t.data)},send:function(e,t){this._broadcastChannel&&this._broadcastChannel.postMessage(this.stringify(e,t))},stringify:function(e){return JSON.stringify({data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},name:e})}},s.Events),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0).assign,o=n(5).DEFAULT_XHR_TIMEOUT_MS,s=n(76),a=n(13),c=n(46),u=["client_id","service","utm_campaign","utm_content","utm_medium","utm_source","utm_term"],l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._preferencesUrl=t.preferencesUrl,this._window=t.window||window,this._xhr=t.xhr||c,this._xhrTimeout=t.timeout||o}return i(e,[{key:"_request",value:function(e){return this._xhr.oauthAjax(r({},e,{timeout:this._xhrTimeout,url:this._baseUrl+e.url})).catch(function(e){throw s.normalizeXHRError(e)})}},{key:"fetch",value:function(e,t){var n=this;return this._request({accessToken:e,type:"get",url:"/lookup-user?email="+encodeURIComponent(t)}).then(function(e){return e.token&&(e.preferencesUrl=n._preferencesUrl+e.token),e})}},{key:"optIn",value:function(e,t){var n=a.cleanSearchString(this._window.location.href,u);return this._request({accessToken:e,contentType:"application/x-www-form-urlencoded",data:{newsletters:t,source_url:n},headers:{"X-Requested-With":"XMLHttpRequest"},type:"post",url:"/subscribe/"})}}]),e}();e.exports=l},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(){}var o=n(0),s=n(191);o.extend(r.prototype,new s),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){throw s.normalizeXHRError(e)}function o(e){this._oAuthUrl=(e=e||{}).oAuthUrl,this._xhr=e.xhr||a}var s=n(24),a=n(46);o.prototype={_request:function(e,t,n){return this._xhr[e](this._oAuthUrl+t,n||null).catch(r)},getCode:function(e){return this._request("post","/v1/authorization",e)},getClientInfo:function(e){return this._request("get","/v1/client/"+e)},getClientKeyData:function(e){return this._request("post","/v1/key-data",e)},fetchOAuthApps:function(e){return this._xhr.oauthAjax({accessToken:e,type:"get",url:this._oAuthUrl+"/v1/client-tokens"}).catch(r)},destroyOAuthApp:function(e,t){return this._xhr.oauthAjax({accessToken:e,type:"delete",url:this._oAuthUrl+"/v1/client-tokens/"+t}).catch(r)},getToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.ttl=e.ttl||"300",e.response_type="token",this.getCode(e)},destroyToken:function(e){return this._request("post","/v1/destroy",{token:e})}},i.exports=o}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){this.profileUrl=(e=e||{}).profileUrl}var o=n(77),s=n(46);r.prototype._request=function(e,t,n,i,r){return s.oauthAjax({accessToken:n,data:i,headers:r,type:t,url:this.profileUrl+e}).then(function(e){if(e.error)throw o.toError(e);return e},function(e){throw o.normalizeXHRError(e)})},r.prototype.getProfile=function(e){return this._request("/v1/profile","get",e)},r.prototype.getAvatar=function(e){return this._request("/v1/avatar","get",e)},r.prototype.deleteAvatar=function(e,t){return this._request("/v1/avatar/"+t,"delete",e)},r.prototype.uploadAvatar=function(e,t){return this._request("/v1/avatar/upload","post",e,t,{"Content-type":t.type})},r.prototype.getDisplayName=function(e){return this._request("/v1/display_name","get",e)},r.prototype.postDisplayName=function(e,t){return this._request("/v1/display_name","post",e,{displayName:t})},r.Errors=o,i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(26);i.exports=r.Model.extend({initialize:function(e){this._metrics=(e=e||{}).metrics,this._notifier=e.notifier,this._window=e.window||window,this._storage=o.factory("sessionStorage",this._window),this._notifier.on("show-view",this._onShowView.bind(this)),this._notifier.on("show-child-view",this._onShowChildView.bind(this))},_onShowView:function(e,t){this.logIfRefresh(t.viewName)},_onShowChildView:function(e,t,n){this.logIfRefresh(n.viewName)},logIfRefresh:function(e){var t=this._storage.get("last_page_loaded");(function(e,t){return e&&e.view===t})(t,e)&&this._metrics.logViewEvent(e,"refresh"),t={timestamp:Date.now(),view:e},this._storage.set("last_page_loaded",t)}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"string"==typeof e?n(367)("./"+e).then(function(e){return e.default?e.default:e}):Promise.resolve(e)}function o(e,t){return function(){var n=this;return r(e).then(function(e){return n.showView(e,t)})}}function s(e,t,n){return function(){var i=this;return Promise.all([r(e),r(t)]).then(function(e){var t=c(e,2);return i.showChildView(t[0],t[1],n)})}}function a(e){return new _.default.Model(e||{})}var c=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=i(n(0)),l=i(n(125)),d=i(n(83)),h=i(n(84)),f=i(n(86)),p=i(n(87)),g=i(n(89)),m=i(n(92)),v=i(n(93)),_=i(n(4)),y=i(n(140)),w=i(n(94)),E=i(n(143)),b=i(n(144)),S=i(n(96)),I=i(n(97)),A=i(n(98)),C=i(n(145)),T=i(n(146)),x=i(n(147)),k=i(n(149)),O=i(n(150)),P=i(n(151)),R=i(n(102)),N=i(n(103)),M=i(n(104)),D=i(n(152)),L=i(n(64)),U=i(n(153)),V=i(n(154)),F=i(n(155)),j=i(n(108)),B=i(n(156)),z=i(n(157)),G=i(n(158)),H=i(n(159)),W=i(n(162)),K=i(n(163)),q=i(n(165)),Y=i(n(166)),$=i(n(167)),X=i(n(168)),Q=i(n(169)),J=i(n(105)),Z=i(n(170)),ee=i(n(171)),te=i(n(173)),ne=i(n(174)),ie=i(n(26)),re=i(n(109)),oe=i(n(36)),se=i(n(175)),ae=_.default.Router.extend({routes:{"(/)":o(L.default),"account_recovery_confirm_key(/)":o(l.default),"account_recovery_reset_password(/)":o(C.default),"authorization(/)":o(B.default),"cannot_create_account(/)":o(y.default),"choose_what_to_sync(/)":o(E.default),"clear(/)":o(b.default),"complete_reset_password(/)":o(C.default),"complete_signin(/)":o(T.default,{type:oe.default.SIGN_IN}),"confirm(/)":o(k.default,{type:oe.default.SIGN_UP}),"confirm_reset_password(/)":o(x.default),"confirm_signin(/)":o(k.default,{type:oe.default.SIGN_IN}),"connect_another_device(/)":o(O.default),"connect_another_device/why(/)":s(se.default,O.default),"cookies_disabled(/)":o(P.default),"force_auth(/)":o(D.default),"legal(/)":o("legal"),"legal/privacy(/)":o("pp"),"legal/terms(/)":o("tos"),"oauth(/)":o(U.default),"oauth/force_auth(/)":o(D.default),"oauth/signin(/)":"onSignIn","oauth/signup(/)":"onSignUp","pair(/)":o("pair/index"),"pair/auth/allow(/)":o("pair/auth_allow"),"pair/auth/complete(/)":o("pair/auth_complete"),"pair/auth/wait_for_supp(/)":o("pair/auth_wait_for_supp"),"pair/failure(/)":o("pair/failure"),"pair/success(/)":o("pair/success"),"pair/supp(/)":o("pair/supp",{force:!0}),"pair/supp/allow(/)":o("pair/supp_allow"),"pair/supp/wait_for_auth(/)":o("pair/supp_wait_for_auth"),"primary_email_verified(/)":o(F.default,{type:oe.default.PRIMARY_EMAIL_VERIFIED}),"report_signin(/)":o(z.default),"reset_password(/)":o(G.default),"reset_password_confirmed(/)":o(F.default,{type:oe.default.PASSWORD_RESET}),"reset_password_verified(/)":o(F.default,{type:oe.default.PASSWORD_RESET}),"reset_password_with_recovery_key_verified(/)":o(F.default,{type:oe.default.PASSWORD_RESET_WITH_RECOVERY_KEY}),"secondary_email_verified(/)":o(F.default,{type:oe.default.SECONDARY_EMAIL_VERIFIED}),"settings(/)":o(H.default),"settings/account_recovery(/)":s(d.default,H.default),"settings/account_recovery/confirm_password(/)":s(h.default,H.default),"settings/account_recovery/confirm_revoke(/)":s(f.default,H.default),"settings/account_recovery/recovery_key(/)":s(p.default,H.default),"settings/avatar/camera(/)":s(g.default,H.default),"settings/avatar/change(/)":s(m.default,H.default),"settings/avatar/crop(/)":s(v.default,H.default),"settings/change_password(/)":s(w.default,H.default),"settings/clients(/)":s(I.default,H.default),"settings/clients/disconnect(/)":s(S.default,H.default),"settings/communication_preferences(/)":s(A.default,H.default),"settings/delete_account(/)":s(R.default,H.default),"settings/display_name(/)":s(N.default,H.default),"settings/emails(/)":s(M.default,H.default),"settings/two_step_authentication(/)":s(re.default,H.default),"settings/two_step_authentication/recovery_codes(/)":s(j.default,H.default),"signin(/)":"onSignIn","signin_bounced(/)":o(W.default),"signin_confirmed(/)":o(F.default,{type:oe.default.SIGN_IN}),"signin_permissions(/)":o(V.default,{type:oe.default.SIGN_IN}),"signin_recovery_code(/)":o(q.default),"signin_reported(/)":o(Y.default),"signin_token_code(/)":o($.default),"signin_totp_code(/)":o(X.default),"signin_unblock(/)":o(Q.default),"signin_verified(/)":o(F.default,{type:oe.default.SIGN_IN}),"signup(/)":"onSignUp","signup_confirmed(/)":o(F.default,{type:oe.default.SIGN_UP}),"signup_permissions(/)":o(V.default,{type:oe.default.SIGN_UP}),"signup_verified(/)":o(F.default,{type:oe.default.SIGN_UP}),"sms(/)":o(te.default),"sms/sent(/)":o(ne.default),"sms/why(/)":s(se.default,te.default),"verify_email(/)":o(T.default,{type:oe.default.SIGN_UP}),"verify_primary_email(/)":o(T.default,{type:oe.default.PRIMARY_EMAIL_VERIFIED}),"verify_secondary_email(/)":o(T.default,{type:oe.default.SECONDARY_EMAIL_VERIFIED})},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.broker=t.broker,this.metrics=t.metrics,this.notifier=t.notifier,this.relier=t.relier,this.user=t.user,this.window=t.window||window,this._viewModelStack=[],this.notifier.once("view-shown",this._afterFirstViewHasRendered.bind(this)),this.notifier.on("navigate",this.onNavigate.bind(this)),this.notifier.on("navigate-back",this.onNavigateBack.bind(this)),this.notifier.on("email-first-flow",function(){return e._onEmailFirstFlow()}),this.storage=ie.default.factory("sessionStorage",this.window)},onSignUp:function(){return this.showView(this._isEmailFirstFlow?Z.default:ee.default)},onSignIn:function(){return this.showView(this._isEmailFirstFlow?K.default:J.default)},onNavigate:function(e){if(e.server)return this.navigateAway(e.url);this.navigate(e.url,e.nextViewData,e.routerOptions)},onNavigateBack:function(e){this.navigateBack(e.nextViewData)},navigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=this.broker.transformLink(e),n.replace&&this._viewModelStack.length?this._viewModelStack[this._viewModelStack.length-1]=a(t):this._viewModelStack.push(a(t)),n.hasOwnProperty("trigger")||(n.trigger=!0);var i=!!n.clearQueryParams,r=/\?/.test(e);return i||r?i&&r&&(e=e.split("?")[0]):e+=this.window.location.search,this.window.location.hash&&(e+=this.window.location.hash),_.default.Router.prototype.navigate.call(this,e,n)},navigateAway:function(e){var t=this;return e=this.broker.transformLink(e),this.metrics.flush().then(function(){t.window.location.href=e})},navigateBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.canGoBack()){this._viewModelStack.pop();var t=this.getCurrentViewModel();t&&t.set(e),this.window.history.back()}},getCurrentViewModel:function(){if(this._viewModelStack.length)return this._viewModelStack[this._viewModelStack.length-1]},getViewOptions:function(e){return u.default.extend({canGoBack:this.canGoBack(),currentPage:this.getCurrentPage(),model:this.getCurrentViewModel(),viewName:this.getCurrentViewName()},e)},canGoBack:function(){return!!this.storage.get("canGoBack")},getCurrentPage:function(){return(_.default.history.fragment||"").replace(/^\//,"").replace(/\/$/,"").replace(/\?.*/,"")},getCurrentViewName:function(){return this.fragmentToViewName(this.getCurrentPage())},_afterFirstViewHasRendered:function(){this.storage.set("canGoBack",!0)},_onEmailFirstFlow:function(){this._isEmailFirstFlow=!0,this.storage.set("canGoBack",!0)},fragmentToViewName:function(e){return(e=e||"").replace(/^\//,"").replace(/\/$/,"").replace(/\//g,".").replace(/\?.*/,"").replace(/_/g,"-")},showView:function(e,t){this.notifier.trigger("show-view",e,this.getViewOptions(t))},showChildView:function(e,t,n){this.notifier.trigger("show-child-view",e,t,this.getViewOptions(n))},createViewHandler:o,createChildViewHandler:s});e.exports=ae},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(5),s=r.Model.extend({defaults:{tries:0},initialize:function(e){this.maxTries=(e=e||{}).maxTries||o.EMAIL_RESEND_MAX_TRIES},incrementRequestCount:function(){var e=this.get("tries")+1;this.set("tries",e),this.maxTries>e||this.trigger("maxTriesReached")},shouldResend:function(){return e=this.get("tries"),this.maxTries>=e;var e},reset:function(){this.set("tries",0)}});i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card account-recovery-confirm-key">\n    {{#isLinkExpired}}\n        <header>\n            <h1 id="fxa-reset-link-expired-header">{{#t}}Reset password link expired{{/t}}</h1>\n        </header>\n\n        <section>\n            <div class="error"></div>\n            <div class="success"></div>\n\n            <p>\n                {{#t}}The link you clicked to reset your password is expired.{{/t}}\n            </p>\n\n            <div class="links">\n                <a id="resend" class="resend-email" href="#">{{#t}}Receive new link{{/t}}</a>\n            </div>\n        </section>\n    {{/isLinkExpired}}\n\n    {{^isLinkExpired}}\n        <header>\n            <h1 id="fxa-recovery-key-confirm">\n                {{#serviceName}}\n                    \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n                    {{#t}}Reset password with recovery key{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n                {{/serviceName}}\n                {{^serviceName}}\n                    {{#t}}Reset password with recovery key{{/t}}\n                {{/serviceName}}\n            </h1>\n        </header>\n\n        <section id="account-recovery-confirm-password">\n            <div class="error"></div>\n\n            <form novalidate>\n                <p class="description">\n                    {{#t}}Please enter the one time use recovery key you stored in a safe place to regain access to your Firefox Account.{{/t}}\n                </p>\n                <p class="description">\n                    {{#unsafeTranslate}}<span class="note">NOTE:</span> If you reset your password and don\'t have account recovery key saved, some of your data will be erased (including synced server data like history and bookmarks).{{/unsafeTranslate}}\n                </p>\n                <div class="input-row">\n                    <input id="recovery-key" type="text" class="text recovery-key" placeholder="{{#t}}Enter recovery key{{/t}}" value="{{ recoveryKey }}" autofocus  autocomplete="off"/>\n                </div>\n\n                <div class="button-row">\n                    <button id="submit-btn" type="submit" class="primary-button">{{#t}}Confirm recovery key{{/t}}</button>\n                    <button class="button-link lost-recovery-key">{{#t}}Don\'t have a recovery key?{{/t}}</button>\n                </div>\n            </form>\n        </section>\n    {{/isLinkExpired}}\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="account-recovery-section" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}} account-recovery-panel">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{#t}}Account recovery{{/t}}</h2>\n        </header>\n\n        {{^hasRecoveryKey}}\n            <button class="settings-button primary-button settings-unit-toggle" data-href="settings/account_recovery">\n                {{#t}}Enableâ€¦{{/t}}\n            </button>\n        {{/hasRecoveryKey}}\n\n        {{#hasRecoveryKey}}\n            <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/account_recovery">\n                {{#t}}Changeâ€¦{{/t}}\n            </button>\n        {{/hasRecoveryKey}}\n    </div>\n\n\n    <div class="settings-unit-details">\n        <p>{{#t}}Generate a recovery key to regain access to your Firefox bookmarks, passwords, and synced data if you forget your password.{{/t}}</p>\n\n        <div class="list">\n            <ul id="status">\n                <li class="type">\n                    <div class="recovery-key-icon">\n                        <div class="name">{{#t}}Recovery key{{/t}}</div>\n                        <div class="details">\n                            {{#hasRecoveryKey}}\n                                <div class="enabled">{{#t}}Enabled{{/t}}</div>\n                            {{/hasRecoveryKey}}\n                            {{^hasRecoveryKey}}\n                                <div class="disabled">{{#t}}Not set{{/t}}</div>\n                            {{/hasRecoveryKey}}\n                        </div>\n                    </div>\n\n                    <div class="panel-settings-button-group">\n                        {{#hasRecoveryKey}}\n                            <button class="settings-button warning-button confirm-revoke">{{#t}}Revoke{{/t}}</button>\n                        {{/hasRecoveryKey}}\n                        {{^hasRecoveryKey}}\n                            <button class="settings-button primary-button confirm-password">{{#t}}Generate{{/t}}</button>\n                        {{/hasRecoveryKey}}\n                    </div>\n                </li>\n            </ul>\n\n            <p>{{#unsafeTranslate}}<span class="note">NOTE: </span>Your Firefox Account password encrypts your Firefox data. Only your password or recovery key can access your data. <a %(escapedLearnMoreLinkAttributes)s>Learn more</a>{{/unsafeTranslate}}</p>\n\n            <div class="button-row">\n                <button class="settings-button primary-button refresh-status">{{#t}}Refresh Status{{/t}}</button>\n                <button class="settings-button cancel secondary-button enabled">{{#t}}Done{{/t}}</button>\n            </div>\n        </div>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="upgrade-session" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{ title }}</h2>\n        </header>\n        <button class="settings-button settings-unit-toggle secondary-button" data-href="{{ gatedHref }}">\n            <span class="unlock-button">{{#t}}Show{{/t}}</span>\n        </button>\n    </div>\n\n    <div class="settings-unit-details">\n        <div class="error"></div>\n\n        <form novalidate>\n            <p>\n                <span class="note">\n                    {{#t}}NOTE:{{/t}}\n                </span>\n                {{#t}}Before you can view or make changes to this section, you will need to verify your email address.{{/t}}\n            </p>\n            <ul class="email-list button-row">\n                <li class="email-address">\n                    <div class="address">{{ email }}</div>\n                    <div class="details">\n                        <div>{{#t}}Primary email{{/t}}</div>\n                    </div>\n                </li>\n                {{#emailSent }}\n                    <a class="resend" data-id="{{ email }}">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n                {{/emailSent }}\n            </ul>\n            {{#emailSent }}\n                <div class="button-row email-sent-options">\n                    <button type="submit" class="settings-button primary-button refresh-verification-state"\n                            data-id="{{ email }}"\n                            title="{{ lastCheckedTime }}">{{#t}}Refresh Status{{/t}}</button>\n                    <button class="settings-button secondary-button cancel">{{#t}}Done{{/t}}</button>\n                </div>\n            {{/emailSent }}\n\n            {{^emailSent }}\n                <div class="button-row">\n                    <button type="submit" class="settings-button primary-button send-verification-email"\n                            data-id="{{ email }}">{{#t}}Verify{{/t}}</button>\n                    <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n                </div>\n            {{/emailSent}}\n        </form>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<input id="{{ id }}" type="checkbox" class="show-password" aria-controls="{{ targetId }}" tabindex="-1" data-novalue data-synchronize-show="{{ synchronizeShow }}"/>\n<label for="{{ id }}" class="show-password-label" title="{{#t}}Show password{{/t}}">{{#t}}Show password{{/t}}</label>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="account-recovery-confirm-password">\n    <section class="modal-panel">\n        <div class="error"></div>\n\n        <h2>{{#t}}Step 1 of 2: Re-enter password{{/t}}</h2>\n\n        <form novalidate>\n            <p class="description">\n                {{#t}}Enter your password to view your recovery key.{{/t}}\n            </p>\n\n            <div class="email">{{email}}</div>\n            <input type="email" class="email hidden" value="{{email}}" disabled />\n            <div class="input-row password-row">\n                <input type="password" class="password tooltip-below" id="password" placeholder="{{#t}}Enter Password{{/t}}" required pattern=".{8,}" autofocus/>\n            </div>\n\n            <div class="button-row">\n                <button class="primary-button generate-key-link">{{#t}}Continue{{/t}}</button>\n                <button class="button-link cancel-link">{{#t}}Cancel{{/t}}</button>\n            </div>\n        </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="account-recovery-confirm-revoke">\n    <section class="modal-panel">\n        <div class="error"></div>\n\n        <form novalidate>\n            <h3>{{#t}}Are you sure you want to revoke?{{/t}}</h3>\n            <p class="revoke-description">{{#t}}You will be unable to use your recovery key to access your data in the event you reset your password.{{/t}}</p>\n\n            <div class="button-row">\n                <button action="submit" class="settings-button warning-button revoke">{{#t}}Revoke{{/t}}</button>\n                <button class="settings-button secondary-button cancel-button">{{#t}}Cancel{{/t}}</button>\n            </div>\n        </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render("<html>\n<head><title></title>\n</head>\n<body>\n    <p>{{recoveryKey}}</p>\n</body>\n</html>\n",e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="account-recovery-key">\n    <section class="modal-panel">\n        <p class="modal-success"></p>\n        <div class="error"></div>\n\n        <h2>{{#t}}Step 2 of 2: Save Recovery key{{/t}}</h2>\n\n        <p class="description">{{#unsafeTranslate}}<span class="note">NOTE: </span>If you forget your password, this key is required to regain access to your data. Save your recovery key in a safe location, where you can find it easily later.{{/unsafeTranslate}}</p>\n\n        <div class="recovery-key-container">\n            <div class="recovery-key">{{recoveryKey}}</div>\n        </div>\n\n        {{^isIos}}\n            <div class="button-row save-options">\n                <a href="#" class="save-option download-option">\n                    <div class="graphic graphic-download-option"></div>\n                    <p class="name">{{#t}}Download{{/t}}</p>\n                </a>\n                <a href="#" class="save-option copy-option">\n                    <div class="graphic graphic-copy-option"></div>\n                    <p class="name">{{#t}}Copy{{/t}}</p>\n                </a>\n                <a href="#" class="save-option print-option">\n                    <div class="graphic graphic-print-option"></div>\n                    <p class="name">{{#t}}Print{{/t}}</p>\n                </a>\n            </div>\n        {{/isIos}}\n\n        {{#isIos}}\n            <div class="button-row">\n                <a href="#" class="save-option copy-option">\n                    <div class="graphic graphic-copy-option"></div>\n                    <p class="name">{{#t}}Copy{{/t}}</p>\n                </a>\n            </div>\n        {{/isIos}}\n\n        <div class="button-row">\n            <button class="primary-button done-link">{{#t}}Done, Recovery key saved{{/t}}</button>\n        </div>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="avatar-camera">\n  <section class="modal-panel">\n    <div class="avatar-wrapper">\n      <div class="progress-container">\n      </div>\n      <div id="avatar-camera-wrapper">\n        <video id="video" class="hidden"></video>\n      </div>\n    </div>\n\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <canvas id="canvas"></canvas>\n\n    <form novalidate>\n      <div class="button-row">\n        <button type="submit" id="submit-btn" class="settings-button primary-button">{{#t}}Take picture{{/t}}</button>\n        <button class="settings-button secondary-button" id="back">{{#t}}Cancel{{/t}}</button>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="avatar-change">\n  <section class="modal-panel">\n    <div class="main-avatar">\n      <div id="loading-avatar-spinner">\n        <img alt="" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI3M3B4IiBoZWlnaHQ9IjczcHgiIHZpZXdCb3g9IjAgMCA3MyA3MyIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDxkZWZzPiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSI5My4wOTI4MDk2JSIgeTE9IjUyLjc3MzQzNzUlIiB4Mj0iNjguNTEzMzM5OCUiIHkyPSIxMTkuMzI2MDA3JSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwQTg0RkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwQTg0RkYiIG9mZnNldD0iNjkuMzY5ODE4MiUiPjwvc3RvcD4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMEE4NEZGIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMjQ4NEM2IiBzdG9wLW9wYWNpdHk9IjAuMDA0Nzc3NjY5NTEiIG9mZnNldD0iMTAwJSI+PC9zdG9wPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyNDg0QzYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+ICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzI0ODRDNiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4gICAgICAgIDwvbGluZWFyR3JhZGllbnQ+ICAgICAgICA8cmVjdCBpZD0icGF0aC0yIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDgiIGhlaWdodD0iNjAiPjwvcmVjdD4gICAgPC9kZWZzPiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJTaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUuMDAwMDAwLCAtMS4wMDAwMDApIj4gICAgICAgICAgICA8cGF0aCBkPSJNNDEuOCw3My44IEMyMS45LDczLjggNS44LDU3LjcgNS44LDM3LjggQzUuOCwxOC4xIDIxLjYsMi4yIDQxLjEsMS44IEM0MS4zLDEuOCA0MS40LDEuOCA0MS40LDEuOCBDNDEuNSwxLjggNDEuNywxLjggNDEuOCwxLjggQzQ0LjYsMi4yIDQ2LjgsNC41IDQ2LjgsNy4zIEM0Ni44LDEwLjEgNDQuNiwxMi41IDQxLjgsMTIuNyBDMjgsMTIuOCAxNi44LDI0IDE2LjgsMzcuOCBDMTYuOCw1MS42IDI4LDYyLjggNDEuOCw2Mi44IEM1NS42LDYyLjggNjYuOCw1MS42IDY2LjgsMzcuOCBMNzcuOCwzNy44IEM3Ny44LDU3LjcgNjEuNyw3My44IDQxLjgsNzMuOCBaIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTEpIj48L3BhdGg+ICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMyIgZmlsbD0id2hpdGUiPiAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPiAgICAgICAgICAgIDwvbWFzaz4gICAgICAgICAgICA8ZyBpZD0iTWFzayI+PC9nPiAgICAgICAgICAgIDxwYXRoIGQ9Ik00MS44LDczLjggQzIxLjksNzMuOCA1LjgsNTcuNyA1LjgsMzcuOCBDNS44LDE4LjEgMjEuNiwyLjIgNDEuMSwxLjggQzQxLjMsMS44IDQxLjQsMS44IDQxLjQsMS44IEM0MS41LDEuOCA0MS43LDEuOCA0MS44LDEuOCBDNDQuNiwyLjIgNDYuOCw0LjUgNDYuOCw3LjMgQzQ2LjgsMTAuMSA0NC42LDEyLjUgNDEuOCwxMi43IEMyOCwxMi44IDE2LjgsMjQgMTYuOCwzNy44IEMxNi44LDUxLjYgMjgsNjIuOCA0MS44LDYyLjggQzU1LjYsNjIuOCA2Ni44LDUxLjYgNjYuOCwzNy44IEw3Ny44LDM3LjggQzc3LjgsNTcuNyA2MS43LDczLjggNDEuOCw3My44IFoiIGZpbGw9IiMwQTg0RkYiIG1hc2s9InVybCgjbWFzay0zKSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+">\n      </div>\n      <p id="image-holder" class="avatar-wrapper">\n      </p>\n    </div>\n\n    <div class="error"></div>\n\n    <nav id="avatar-options">\n      <input type="file" id="imageLoader" name="imageLoader" accept="image/png, image/jpeg"/>\n      <a href="#" id="file">{{#t}}Upload{{/t}}</a>\n      <a href="/settings/avatar/camera" id="camera">{{#t}}Camera{{/t}}</a>\n      {{^avatarDefault}}\n      <a href="#" class="remove">{{#t}}Clear{{/t}}</a>\n      {{/avatarDefault}}\n    </nav>\n\n    <div class="button-row">\n      <button id="done" class="settings-button secondary-button cancel">{{#t}}Done{{/t}}</button>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){if(this.displayLength=e.displayLength||s,this.exportLength=e.exportLength||a,this.top=0,this.left=0,this.yCenter=0,this.xCenter=0,this.verticalGutter=o.result(e,"verticalGutter",c),this.horizontalGutter=o.result(e,"horizontalGutter",c),this.onRotate=e.onRotate||o.noop,this.onTranslate=e.onTranslate||o.noop,this.onZoomIn=e.onZoomIn||o.noop,this.onZoomOut=e.onZoomOut||o.noop,this.onZoomRangeChange=e.onZoomRangeChange||o.noop,!e.container)throw Error("A container element is required");if(this._setupElements(e.container),e.src){var t=e,n=2*this.exportLength;if(t.width>n||t.height>n)t=this.resize(t,n/Math.max(t.width,t.height));this.setImageSrc(t.src,t.width,t.height)}}var o=n(0),s=240,a=480,c=40;r.prototype._setupElements=function(e){var t=this;this.container=e,this.img=e.find("img"),this.wrapper=e.find(".wrapper"),this.canvas=e.find("canvas")[0],this.draggable=e.find(".drag-overlay"),this.draggable.draggable({drag:function(e,n){var i=t.getBoundedPosition(t.top+n.position.top,t.left+n.position.left);t.img.css(i)},stop:function(e,n){var i=t.img.position();t.updatePosition(i),n.helper.css({left:0,top:0}),t.onTranslate()}});var n=this.slider=e.find("[type=range]");n.on("input",function(){t.zoom(parseInt(n.val(),10))}),n.on("change",function(){t.onZoomRangeChange()}),this.scale=parseInt(n.val()||0,10),this.rotator=e.find(".rotate"),this.rotator.on("click",function(){var e=t.rotate(90);t.setImageSrc(e,t._originalHeight,t._originalWidth),t.onRotate()}),e.find(".zoom-out").on("click",function(){t.zoom(t.scale-10),n.val(t.scale),t.onZoomOut()}),e.find(".zoom-in").on("click",function(){t.zoom(t.scale+10),n.val(t.scale),t.onZoomIn()}),this._wrapperHeight=this.wrapper.height(),this._wrapperWidth=this.wrapper.width()},r.prototype.updatePosition=function(e){this.yCenter=e.top+this._height/2,this.xCenter=e.left+this._width/2,this.top=e.top,this.left=e.left},r.prototype.setImageSrc=function(e,t,n){var i=this.img;if(this.src=e,i.css({height:"",left:0,top:0,width:""}),this.slider.val(this.scale),i.attr("src",this.src),this.yCenter=this._wrapperHeight/2,this.xCenter=this._wrapperWidth/2,"number"!=typeof t||"number"!=typeof n||0>=t||0>=n)throw Error("Height and width must be > 0.");this._originalWidth=t,this._originalHeight=n,this.isLandscape=this._originalWidth>this._originalHeight,this.zoom(this.scale)},r.prototype.updateSize=function(e){this.isLandscape?(this._height=e,this._width=e*this._originalWidth/this._originalHeight):(this._width=e,this._height=e*this._originalHeight/this._originalWidth),this.img.height(this._height),this.img.width(this._width)},r.prototype.getBoundedPosition=function(e,t){var n=this._width,i=this._height,r=this._wrapperHeight,o=this._wrapperWidth;return t>this.horizontalGutter&&(t=this.horizontalGutter),o-this.horizontalGutter>t+n&&(t=o-this.horizontalGutter-n),e>this.verticalGutter&&(e=this.verticalGutter),r-this.verticalGutter>e+i&&(e=r-this.verticalGutter-i),{left:t,top:e}},r.prototype.resize=function(e,t){var n=this.canvas,i=n.getContext("2d");n.width=e.width*t,n.height=e.height*t,this.img.attr("src",e.src),i.drawImage(this.img[0],0,0,n.width,n.height);var r=n.toDataURL();return{height:n.height,src:r,width:n.width}},r.prototype.zoom=function(e){0>e&&(e=0),e>100&&(e=100);var t=this.displayLength*(1+e/100);this.scale=e,this.updateSize(t);var n=this.getBoundedPosition(this.yCenter-this._height/2,this.xCenter-this._width/2);this.updatePosition(n),this.img.css(n)},r.prototype.rotate=function(e){var t=this.canvas,n=t.getContext("2d");return t.width=this._originalHeight,t.height=this._originalWidth,n.translate(t.width/2,t.height/2),n.rotate(e*Math.PI/180),n.drawImage(this.img[0],-this._originalWidth/2,-this._originalHeight/2),t.toDataURL("image/png")},r.prototype.cropPosition=function(){var e=this.isLandscape?this._originalHeight/this.displayLength:this._originalWidth/this.displayLength,t=1+this.scale/100,n=this.displayLength/t*e;return{left:(-this.left+this.horizontalGutter)/t*e,length:n=Math.min(n,this.isLandscape?this._originalHeight:this._originalWidth),top:(-this.top+this.verticalGutter)/t*e}},r.prototype._export=function(){var e=this.canvas.getContext("2d"),t=this.cropPosition(),n=this.exportLength;this.canvas.width=n,this.canvas.height=n,e.drawImage(this.img[0],t.left,t.top,t.length,t.length,0,0,n,n)},r.prototype.toDataURL=function(e,t){return this._export(),this.canvas.toDataURL(e,t)},r.prototype.toBlob=function(e,t,n){return this._export(),this.canvas.toBlob(e,t,n)},i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="avatar-crop">\n  <section class="modal-panel">\n    <div class="error"></div>\n\n    <div class="cropper">\n      <div class="wrapper">\n        <div class="mask"></div>\n        <div class="drag-overlay"></div>\n        <img src="" class="avatar" alt="Avatar" />\n      </div>\n\n      <p class="notice">{{#t}}Position and rotate your picture as needed{{/t}}</p>\n\n      <div class="controls">\n        <button class="zoom-out icon-zoom-out"></button>\n        <input class="slider" type="range" min="0" max="100" step="1" value="0" />\n        <button class="zoom-in icon-zoom-in"></button>\n        <button class="rotate icon-cw"></button>\n      </div>\n\n      <canvas id="imageCanvas"></canvas>\n    </div>\n\n    <form novalidate>\n      <div class="button-row">\n        <button type="submit" id="submit-btn" class="settings-button primary-button">{{#t}}Change{{/t}}</button>\n        <button class="settings-button secondary-button" id="back">{{#t}}Cancel{{/t}}</button>\n      </div>\n    </form>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-cannot-create-account-header">{{#t}}Cannot create account{{/t}}</h1>\n  </header>\n\n  <section class="cannot-create-account-content">\n    <p>\n      {{#unsafeTranslate}}You must meet certain age requirements to create a Firefox&nbsp;Account.{{/unsafeTranslate}}\n    </p>\n    <p class="links">\n      <a class="ftc" href="http://www.ftc.gov/news-events/media-resources/protecting-consumer-privacy/kids-privacy-coppa" {{#isSync}} target="_blank"{{/isSync}}>{{#t}}Learn more{{/t}}</a>\n    </p>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=n(2),c=(i=a)&&i.__esModule?i:{default:i},u=n(4),l=n(5),d=["addons","firefox","fxaccount","firefox account","firefoxaccount","fxsync","firefox sync","firefoxsync","lockbox","fxlockbox","mozilla","sumo","sync"].sort(function(e,t){return t.length-e.length}),h=/^(?:firefox|mozilla)\.(?:com|org)$/,f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(0,s.assign)({email:"",hasUserTakenAction:!1,isVisible:!1,password:null},t),r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return r.on("change:password",function(){return r.set("hasUserTakenAction",!0)}),r.on("change:password",function(){return r.isValid()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,u.Model),o(e,[{key:"_getCommonPasswordList",value:function(){return n.e(21).then(n.t.bind(null,382,7))}},{key:"fetch",value:function(){var e=this;return this._getCommonPasswordList().then(function(t){e.commonPasswordList=t})}},{key:"isSameAsEmail",value:function(e){var t=this.get("email").toLowerCase();return this.doesPasswordContainFullEmail(e,t)||this.isPasswordSubstringOfEmail(e,t)||this.isPasswordMostlyLocalPartOfEmail(e,t)}},{key:"doesPasswordContainFullEmail",value:function(e,t){return-1!==e.indexOf(t)}},{key:"isPasswordSubstringOfEmail",value:function(e,t){return-1!==t.indexOf(e)}},{key:"isPasswordMostlyLocalPartOfEmail",value:function(e,t){var n=t.split("@"),i=r(n,1);return this.isPasswordMostlyWord(e,i[0])}},{key:"isPasswordMostlyWord",value:function(e,t){return 2*t.length>=e.length&&-1!==e.indexOf(t)}},{key:"isPasswordMostlyCommonServiceName",value:function(e){var t=(0,s.find)(d,function(t){return-1!==e.indexOf(t)});if(t)return this.isPasswordMostlyWord(e,t)}},{key:"isCommon",value:function(e,t){return e.test(t)||this.isPasswordMostlyCommonServiceName(t)||h.test(t)}},{key:"validate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.hasUserTakenAction||e.password){var t=(e.password||"").toLowerCase();return t?l.PASSWORD_MIN_LENGTH>t.length?c.default.toError("PASSWORD_TOO_SHORT"):this.isSameAsEmail(t)?c.default.toError("PASSWORD_SAME_AS_EMAIL"):this.isCommon(this.commonPasswordList,t)?c.default.toError("PASSWORD_TOO_COMMON"):void 0:c.default.toError("PASSWORD_REQUIRED")}}}]),e}();t.default=f},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<aside id="password-strength-balloon" class="input-help input-help-balloon password-strength-balloon">\n  <h3 class="big-only">{{#t}}Your Firefox Account password{{/t}}</h3>\n  <ul>\n    <li id="password-too-short"\n      {{^hasUserTakenAction}}class="min-length unmet"{{/hasUserTakenAction}}\n      {{#isTooShort}}class="min-length fail"{{/isTooShort}}\n      {{^isTooShort}}class="min-length met"{{/isTooShort}}\n    >{{#t}}Must be at least 8 characters{{/t}}</li>\n    <li id="password-same-as-email"\n      {{^hasUserTakenAction}}class="not-email unmet"{{/hasUserTakenAction}}\n      {{#isTooShort}}class="not-email unmet"{{/isTooShort}}\n      {{#isSameAsEmail}}class="not-email fail"{{/isSameAsEmail}}\n      {{^isSameAsEmail}}class="not-email met"{{/isSameAsEmail}}\n    >{{#t}}Must not be your email address{{/t}}</li>\n    <li id="password-too-common"\n      {{^hasUserTakenAction}}class="not-common unmet"{{/hasUserTakenAction}}\n      {{#isTooShort}}class="not-common unmet"{{/isTooShort}}\n      {{#isSameAsEmail}}class="not-common unmet"{{/isSameAsEmail}}\n      {{#isCommon}}class="not-common fail"{{/isCommon}}\n      {{^isCommon}}class="not-common met"{{/isCommon}}\n      >{{#unsafeTranslate}}Must not match this <a %(escapedCommonPasswordLinkAttrs)s>list of common passwords</a>{{/unsafeTranslate}}</li>\n    <li class="lock big-only">{{#unsafeTranslate}}Be original and be safe &mdash; don\'t reuse this password anywhere else.{{/unsafeTranslate}}</li>\n    <li class="lock big-only">{{#unsafeTranslate}}Remember this password &mdash; resetting it erases your data from our servers.{{/unsafeTranslate}}</li>\n  </ul>\n</aside>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="change-password" class="settings-unit">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Password{{/t}}</h2>\n    </header>\n    <button class="settings-button secondary-button settings-unit-toggle"\n      data-href="settings/change_password">{{#t}}Changeâ€¦{{/t}}</button>\n  </div>\n\n  <div class="settings-unit-details">\n    <div class="error"></div>\n\n    <form novalidate>\n      <p>\n        {{#t}}Once you\'re finished, use your new password to sign in on all of your devices.{{/t}}\n      </p>\n      \x3c!-- hidden email field is to allow Fx password manager\n           to correctly save the updated password. Without it,\n           the password manager saves the old_password\n           as the username. --\x3e\n      <input type="email" value="{{email}}" class="hidden" />\n      <div class="input-row password-row">\n        <input type="password" class="password" id="old_password" placeholder="{{#t}}Old password{{/t}}" required pattern=".{8,}" autofocus />\n\n        <div class="input-help input-help-forgot-pw links"><a href="/reset_password" class="reset-password">{{#t}}Forgot password?{{/t}}</a></div>\n      </div>\n\n      <div class="input-row password-row">\n        <input type="password" class="password check-password tooltip-below" id="new_password" placeholder="{{#t}}New password{{/t}}" required pattern=".{8,}"  data-synchronize-show="true"/>\n        <div class="helper-balloon"></div>\n      </div>\n\n      <div class="input-row password-row">\n        <input type="password" class="password check-password tooltip-below" id="new_vpassword" placeholder="{{#t}}Re-enter password{{/t}}" required pattern=".{8,}"  data-synchronize-show="true"/>\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="settings-button primary-button">{{#t}}Change{{/t}}</button>\n        <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n      </div>\n    </form>\n  </div>\n</div>\n\n',e,t=t||{})}},function(e,t,n){"use strict";var i,r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();void 0===(i=function(e,t,i){var o=n(2),s=n(4),a=n(5).VERIFICATION_POLL_IN_MS;i.exports=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t));if(!n.account)throw Error("options.account required");return i._account=n.account,i._pollIntervalInMS=n.pollIntervalInMS||a,i._window=n.window,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Model),r(e,[{key:"destroy",value:function(){this.stop(),function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"start",value:function(){this._isWaiting||(this._isWaiting=!0,this._poll())}},{key:"stop",value:function(){this._pollTimeout&&(this._window.clearTimeout(this._pollTimeout),this._pollTimeout=null),this._isWaiting=!1}},{key:"_poll",value:function(){var e=this;this._isWaiting&&this._account.sessionStatus().then(function(t){return e._onStatusComplete(t)},function(t){return e._onStatusError(t)})}},{key:"_onStatusComplete",value:function(e){var t=this;this._isWaiting&&(e.verified?(this.trigger("verified"),this._pollTimeout=null,this.stop()):this._pollTimeout=this._window.setTimeout(function(){return t._poll()},this._pollIntervalInMS))}},{key:"_onStatusError",value:function(e){var t=this;o.is(e,"INVALID_TOKEN")&&this._account.has("uid")?this._account.checkUidExists().then(function(n){n||(e=o.toError("SIGNUP_EMAIL_BOUNCE")),t.trigger("error",e),t.stop()}):(this.trigger("error",e),this.stop())}}]),e}()}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <div class="success visible success-email-created">{{#t}}%(email)s registered.{{/t}}</div>\n  <div class="graphic graphic-choose-what-to-sync"></div>\n\n  <header>\n    <h1 id="fxa-choose-what-to-sync-header">\n      {{#t}}Choose what to sync{{/t}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <form id="choose-what-to-sync" novalidate>\n      <div class="two-col-items">\n        {{#engines}}\n          <div class="input-row choose-what-to-sync-row">\n            <input name="sync-content" id="sync-engine-{{id}}" type="checkbox" class="customize-sync" {{#checked}}checked="checked"{{/checked}} value="{{id}}" tabindex="{{tabindex}}" /><label class="fxa-checkbox__label" for="sync-engine-{{id}}">{{text}}</label>\n          </div>\n        {{/engines}}\n      </div>\n      <div class="button-row">\n        <button id="submit-btn" type="submit" tabindex="1" autofocus>{{#t}}Save selections{{/t}}</button>\n      </div>\n      <div class="links">\n        <a href="#" id="back">{{#t}}Back{{/t}}</a>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    \x3c!-- this is only shown for selenium tests \n         and does not need to be localized --\x3e\n    <h1 id="fxa-clear-storage-header">Browser storage is cleared</h1>\n  </header>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="client-disconnect">\n  <section class="modal-panel">\n    {{^hasDisconnected}}\n      <h2>{{#t}}Disconnect from Sync?{{/t}}</h2>\n      <div class="error"></div>\n\n      <p class="intro">\n      {{#t}}Your browsing data will remain on %(deviceName)s, but it will no longer sync with your account.{{/t}}\n      </p>\n\n      <form novalidate>\n          <p class="disconnect-reasons fxa-radio">\n            <label>\n              <input type="radio" name="disconnect-reasons" value="suspicious"/>\n              {{#t}}Suspicious device{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="lost"/>\n              {{#t}}Lost or stolen device{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="old"/>\n              {{#t}}Old or replaced device{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="duplicate"/>\n              {{#t}}Duplicate device{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="no" checked="checked"/>\n              {{#t}}Rather not say{{/t}}\n            </label>\n          </p>\n\n        <div class="button-row">\n          <button type="submit" id="submit-btn" class="settings-button warning-button">{{#t}}Disconnect{{/t}}</button>\n          <button class="settings-button secondary-button cancel-disconnect">{{#t}}Cancel{{/t}}</button>\n        </div>\n      </form>\n\n    {{/hasDisconnected}}\n    {{#hasDisconnected}}\n      <h2>{{#t}}Disconnection Successful{{/t}}</h2>\n      <p class=\'reason-help\'>\n      {{reasonHelp}}\n      </p>\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Got it{{/t}}</button>\n      </div>\n    {{/hasDisconnected}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r;void 0===(r=function(e,t,r){var o=n(4),s=n(5),a=n(314),c=n(315),u=n(316),l=o.Collection.extend({model:function(e,t){return e.clientType===s.CLIENT_TYPE_DEVICE?new a(e,t):e.clientType===s.CLIENT_TYPE_OAUTH_APP?new c(e,t):e.clientType===s.CLIENT_TYPE_WEB_SESSION?new u(e,t):void 0},fetchClients:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=n.getSignedInAccount(),r=[];return t.devices&&r.push(n.fetchAccountDevices(i)),t.oAuthApps&&r.push(n.fetchAccountOAuthApps(i)),t.sessions&&r.push(n.fetchAccountSessions(i)),Promise.all(r).then(function(t){e.reset(),t&&t.forEach(function(t){e.add(t,{merge:!0})})})},comparator:function(e,t){var n;if(e.get("isCurrentDevice"))return-1;if(t.get("isCurrentDevice"))return 1;var r=(i(n={},s.CLIENT_TYPE_DEVICE,0),i(n,s.CLIENT_TYPE_OAUTH_APP,1),i(n,s.CLIENT_TYPE_WEB_SESSION,2),n),o=e.get("clientType"),a=t.get("clientType");if(o!==a)return r[o]-r[a];var c=e.get("lastAccessTime"),u=t.get("lastAccessTime");if(c!==u)return u-c;if(c&&!u)return-1;if(!c&&u)return 1;var l=(e.get("name")||"").trim().toLowerCase(),d=(t.get("name")||"").trim().toLowerCase();return d>l?-1:l>d?1:0}});r.exports=l}(0,0,e))||(e.exports=r)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(5),s=r.Model.extend({defaults:{approximateLastAccessTime:null,approximateLastAccessTimeFormatted:null,clientType:o.CLIENT_TYPE_DEVICE,genericOS:null,id:null,isCurrentDevice:null,isDevice:!0,lastAccessTime:null,lastAccessTimeFormatted:null,name:"Firefox",type:null},destroy:function(){this.trigger("destroy",this)}});i.exports=s}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(5);i.exports=r.Model.extend({defaults:{approximateLastAccessTime:null,approximateLastAccessTimeFormatted:null,clientType:o.CLIENT_TYPE_OAUTH_APP,id:null,lastAccessTime:null,lastAccessTimeFormatted:null,name:null,scope:null},destroy:function(){this.trigger("destroy",this)}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(5);i.exports=r.Model.extend({defaults:{approximateLastAccessTime:null,approximateLastAccessTimeFormatted:null,clientType:o.CLIENT_TYPE_WEB_SESSION,genericOS:null,id:null,lastAccessTime:null,lastAccessTimeFormatted:null,name:null,userAgent:null},destroy:function(){this.trigger("destroy",this)}})}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="clients" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Devices & apps{{/t}}</h2>\n    </header>\n    <button class="settings-button secondary-button settings-unit-loading" disabled>\n      <div class="spinner spinner-settings-fetch"></div>\n    </button>\n    <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/clients">\n      {{#t}}Show{{/t}}\n    </button>\n  </div>\n\n  <div class="settings-unit-details">\n    <div class="error"></div>\n\n    <form novalidate class="client-list-form">\n      <ul class="client-list button-row">\n        {{#clients}}\n\n            {{#isDevice}}\n              <li class="client {{type}} client-device {{#isCurrentDevice}}client-current{{/isCurrentDevice}}"\n                {{#genericOS}}data-os="{{genericOS}}"{{/genericOS}}\n                data-name="{{name}}"\n                title="{{title}}"\n                id="{{id}}">\n                <div class="client-name">{{name}}</div>\n                {{#isCurrentDevice}}\n                    <div class="device-current">{{#t}}Current device{{/t}}</div>\n                {{/isCurrentDevice}}\n                {{^isCurrentDevice}}\n                    <div class="last-connected">{{lastAccessTimeFormatted}}</div>\n                {{/isCurrentDevice}}\n                <button class="settings-button warning-button client-disconnect" data-id="{{id}}" data-type="{{clientType}}">{{#t}}Disconnectâ€¦{{/t}}</button>\n              </li>\n            {{/isDevice}}\n\n            {{#isWebSession}}\n                <li class="client {{type}} client-webSession"\n                    {{#genericOS}}data-os="{{genericOS}}"{{/genericOS}}\n                    data-name="{{name}}"\n                    id="{{id}}">\n                    <div class="client-name" title="{{title}}">{{title}}</div>\n                  {{#isCurrentDevice}}\n                    <div class="device-current">{{#t}}Current session{{/t}}</div>\n                  {{/isCurrentDevice}}\n                  {{^isCurrentDevice}}\n                    <div class="last-connected">{{lastAccessTimeFormatted}}</div>\n                  {{/isCurrentDevice}}\n                    <button class="settings-button warning-button client-disconnect" data-id="{{id}}" data-type="{{clientType}}">{{#t}}Disconnect{{/t}}</button>\n                </li>\n            {{/isWebSession}}\n\n            {{#isOAuthApp}}\n                <li class="client {{type}} client-oAuthApp" data-name="{{name}}" id="{{id}}">\n                  <div class="client-name" title="{{title}}">{{name}}</div>\n                    <div class="last-connected">{{userAgent}} {{lastAccessTimeFormatted}}</div>\n                  <button class="settings-button warning-button client-disconnect" data-id="{{id}}" data-type="{{clientType}}">{{#t}}Revoke{{/t}}</button>\n                </li>\n            {{/isOAuthApp}}\n\n        {{/clients}}\n        {{#showMobileApps}}\n          <li class="client mobile" data-os="iOS">\n            <div class="client-name">{{#t}}Firefox for iOS{{/t}}</div>\n            <div class="last-connected">{{#t}}None connected{{/t}}</div>\n            <a target="_blank" href="{{ linkIOS }}" class="button settings-button secondary-button" data-get-app="ios">{{#t}}Download{{/t}}</a>\n          </li>\n          <li class="client mobile" data-os="Android">\n            <div class="client-name">{{#t}}Firefox for Android{{/t}}</div>\n            <div class="last-connected">{{#t}}None connected{{/t}}</div>\n            <a target="_blank" href="{{ linkAndroid }}" class="button settings-button secondary-button" data-get-app="android">{{#t}}Download{{/t}}</a>\n          </li>\n        {{/showMobileApps}}\n        <a href="{{devicesSupportUrl}}" target="_blank" class="device-support">{{#t}}Missing or duplicate items?{{/t}}</a>\n      </ul>\n\n      <div class="button-row">\n        <button type="submit" class="settings-button primary-button clients-refresh">{{#t}}Refresh{{/t}}</button>\n        <button class="settings-button secondary-button cancel clients-done">{{#t}}Done{{/t}}</button>\n      </div>\n    </form>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="communication-preferences" class="settings-unit{{#isPanelOpen}} open{{/isPanelOpen}} {{#isBasketReady}}basket-ready{{/isBasketReady}}">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Communication preferences{{/t}}</h2>\n    </header>\n    <button class="settings-button secondary-button settings-unit-toggle"\n      data-href="settings/communication_preferences">{{#t}}Changeâ€¦{{/t}}</button>\n  </div>\n\n  <div class="settings-unit-details">\n  {{#error}}\n    <div class="error visible">\n      {{error}}\n    </div>\n    <form novalidate>\n      <div class="button-row">\n        <button class="settings-button secondary-button cancel unpaired">{{#t}}Cancel{{/t}}</button>\n      </div>\n    </form>\n  {{/error}}\n  {{^error}}\n    <div class="error"></div>\n\n    <form novalidate>\n      <p>\n        {{#t}}You will receive communications relating to your account security, changes to our policy, your accountâ€™s functionality and initial emails to help you get the most from your Firefox Account.{{/t}}<br/><br/>\n\n        {{#t}}Additionally, you can subscribe to receive promotional emails with the latest news from Mozilla and Firefox.{{/t}}\n      </p>\n\n      <div class="button-row">\n        {{^isOptedIn}}\n          <button type="submit" id="marketing-email-optin" class="marketing-email-optin settings-button primary-button" autofocus>\n            {{#t}}Subscribe{{/t}}\n          </button>\n          <button class="settings-button secondary-button cancel" id="marketing-email-cancel">{{#t}}Cancel{{/t}}</button>\n        {{/isOptedIn}}\n        {{#isOptedIn}}\n          <button id="marketing-email-manage" class="marketing-email-optin settings-button primary-button" autofocus>\n            {{#t}}Manage Subscriptions{{/t}}\n          </button>\n          <button class="settings-button secondary-button cancel" id="marketing-email-done">{{#t}}Done{{/t}}</button>\n        {{/isOptedIn}}\n\n      </div>\n    </form>\n  {{/error}}\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card account-recovery-create-password">\n  {{#isLinkExpired}}\n  <header>\n    <h1 id="fxa-reset-link-expired-header">{{#t}}Reset password link expired{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p>\n      {{#t}}The link you clicked to reset your password is expired.{{/t}}\n    </p>\n\n    <div class="links">\n      <a id="resend" class="resend-email" href="#">{{#t}}Receive new link{{/t}}</a>\n    </div>\n  </section>\n  {{/isLinkExpired}}\n\n  {{#isLinkDamaged}}\n  <header>\n    <h1 id="fxa-reset-link-damaged-header">{{#t}}Reset password link damaged{{/t}}</h1>\n  </header>\n\n  <section>\n    <p>\n      {{#t}}The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.{{/t}}\n    </p>\n  </section>\n  {{/isLinkDamaged}}\n\n  {{#isLinkValid}}\n  <header>\n    <h1 id="fxa-complete-reset-password-header">{{#t}}Create new password{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <form novalidate>\n        {{#showSyncWarning}}\n            <p class="reset-warning">\n                {{#unsafeTranslate}}<span>REMEMBER:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.{{/unsafeTranslate}}\n            </p>\n        {{/showSyncWarning}}\n\n        {{#showAccountRecoveryInfo}}\n            <p class="description">\n                {{#t}}You have successfully restored your account using your recovery key. Create a new password to secure your data, and store it in a safe location.{{/t}}\n            </p>\n        {{/showAccountRecoveryInfo}}\n\n      \x3c!-- hidden email field is to allow Fx password manager\n           to correctly save the updated password. Without it,\n           the password manager tries to save the old password\n           as the username. --\x3e\n      <input type="email" value="{{email}}" class="hidden" />\n\n      <div class="input-row password-row">\n        <input type="password" class="password check-password tooltip-below" id="password" placeholder="{{#t}}New password{{/t}}" pattern=".{8,}" required autofocus data-synchronize-show="true"/>\n        <div class="helper-balloon"></div>\n      </div>\n\n\n      <div class="input-row password-row">\n        <input type="password" class="password tooltip-below" id="vpassword" placeholder="{{#t}}Re-enter password{{/t}}" required pattern=".{8,}" data-synchronize-show="true"/>\n      </div>\n\n      <div class="button-row ">\n          <button type="submit" class="{{^showAccountRecoveryInfo}}warning-button{{/showAccountRecoveryInfo}} {{#showAccountRecoveryInfo}}primary-button{{/showAccountRecoveryInfo}}">{{#t}}Reset password{{/t}}</button>\n          <button class="button-link remember-password">{{#t}}Remember password? Sign in{{/t}}</button>\n      </div>\n    </form>\n  </section>\n  {{/isLinkValid}}\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(9)),o=i(n(82));e.exports=o.default.extend({defaults:{accountResetToken:null,kB:null,recoveryKeyId:null},validation:{accountResetToken:r.default.hex().required(),kB:r.default.hex().required(),recoveryKeyId:r.default.hex().required()}})},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  {{#isLinkUsed}}\n  <header>\n      <h1 id="fxa-verification-link-reused-header">\n          {{#isPrimaryEmailVerification}}{{#t}}Primary email already confirmed{{/t}}{{/isPrimaryEmailVerification}}\n          {{^isPrimaryEmailVerification}}{{#t}}Sign-in already confirmed{{/t}}{{/isPrimaryEmailVerification}}\n      </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p>\n      {{#t}}That confirmation link was already used, and can only be used once.{{/t}}\n    </p>\n\n  </section>\n  {{/isLinkUsed}}\n\n  {{#isLinkExpired}}\n  <header>\n    <h1 id="fxa-verification-link-expired-header">{{#t}}Verification link expired{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p>\n      {{#t}}The link you clicked to verify your email is expired.{{/t}}\n    </p>\n\n    {{#canResend}}\n    <div class="links">\n      <a id="resend" class="resend-email" href="#">{{#t}}Click here to receive a new verification link{{/t}}</a>\n    </div>\n    {{/canResend}}\n  </section>\n  {{/isLinkExpired}}\n\n  {{#isLinkDamaged}}\n  <header>\n    <h1 id="fxa-verification-link-damaged-header">{{#t}}Verification link damaged{{/t}}</h1>\n  </header>\n\n  <section>\n    <p>\n      {{#t}}The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.{{/t}}\n    </p>\n  </section>\n  {{/isLinkDamaged}}\n\n  {{#error}}\n  <header>\n    <h1 id="fxa-verification-error-header">{{#t}}Verification error{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n  </section>\n  {{/error}}\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(9),o=n(82);i.exports=o.extend({defaults:{code:null,reminder:null,type:null,uid:null},validation:{code:r.verificationCode().required(),uid:r.uid().required()}})}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i=n(4).Model.extend({defaults:{newsletters:[],preferencesUrl:null,token:null},initialize:function(e){this._marketingEmailClient=(e=e||{}).marketingEmailClient,this._account=e.account},_withMarketingEmailClient:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];var o=this._marketingEmailClient,s=function(){t._accessToken&&t._accessToken.destroy(),t._accessToken=null};return Promise.resolve().then(function(){return t._account.createOAuthToken("basket profile:email")}).then(function(n){return t._accessToken=n,o[e].apply(o,[n.get("token")].concat(i))}).then(function(e){return s(),e},function(e){throw s(),e})},fetch:function(){var e=this;return this._withMarketingEmailClient("fetch",this._account.get("email")).then(function(t){if(t)for(var n in t.newsletters=t.newsletters||[],t)e.set(n,t[n])})},optIn:function(e){var t=this;return this.isOptedIn(e)?Promise.resolve():this._withMarketingEmailClient("optIn",e).then(function(){var n=t.get("newsletters");n.push(e),t.set("newsletters",n)})},isOptedIn:function(e){return-1!==this.get("newsletters").indexOf(e)}});e.exports=i},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4).Model.extend({defaults:{token:void 0},initialize:function(e){this._oAuthClient=(e=e||{}).oAuthClient,this.set("token",e.token)},destroy:function(){return this._oAuthClient.destroyToken(this.get("token"))}});i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-confirm-reset-password-header">{{#t}}Reset email sent{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail"></div>\n\n    <p class="verification-email-message">{{#t}}Click the link emailed to %(email)s within the next hour to create a new password.{{/t}}</p>\n\n    {{#isOpenWebmailButtonVisible}}\n      <div class="button-row">\n        <a href="{{{ escapedWebmailLink }}}" data-webmail-type="{{webmailType}}" class="button" target="_blank" id="open-webmail" type="button">{{webmailButtonText}}</a>\n      </div>\n    {{/isOpenWebmailButtonVisible}}\n\n    <div class="links centered">\n      <a id="resend" class="resend-email" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n\n      {{#isSignInEnabled}}\n        {{#forceAuth}}\n          <a href="/force_auth?email={{ encodedEmail }}" class="sign-in">{{#t}}Remember password? Sign in{{/t}}</a>\n        {{/forceAuth}}\n\n        {{^forceAuth}}\n          <a href="/signin" class="sign-in">{{#t}}Remember password? Sign in{{/t}}</a>\n        {{/forceAuth}}\n      {{/isSignInEnabled}}\n    </div>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    {{#isSignUp}}\n    <h1 id="fxa-confirm-header">{{#t}}Confirm your account{{/t}}</h1>\n    {{/isSignUp}}\n    {{#isSignIn}}\n    <h1 id="fxa-confirm-signin-header">{{#t}}Confirm this sign-in{{/t}}</h1>\n    {{/isSignIn}}\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail"></div>\n\n    {{#isSignUp}}\n    <p class="verification-email-message">{{#unsafeTranslate}}Check your email for the verification link sent&nbsp;to %(escapedEmail)s{{/unsafeTranslate}}</p>\n    {{/isSignUp}}\n    {{#isSignIn}}\n    <p class="verification-email-message">{{#unsafeTranslate}}Check your email for the sign-in confirmation link sent to %(escapedEmail)s{{/unsafeTranslate}}</p>\n    {{/isSignIn}}\n\n    {{#isOpenWebmailButtonVisible}}\n      <div class="button-row">\n        <a href="{{{ escapedWebmailLink }}}" data-webmail-type="{{webmailType}}" class="button primary-button" target="_blank" id="open-webmail" type="button">{{webmailButtonText}}</a>\n      </div>\n    {{/isOpenWebmailButtonVisible}}\n\n    <div class="links">\n      {{^canGoBack}}\n        <a id="resend" class="delayed-fadein" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n      {{/canGoBack}}\n      {{#canGoBack}}\n        <a id="resend" class="left delayed-fadein" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n        <a id="back" class="right delayed-fadein" href="#">{{#t}}Back{{/t}}</a>\n      {{/canGoBack}}\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('{{#showSignUpMarketing}}\n  {{#isSpring2015}}\n    <aside class="marketing-ios">\n      {{#isIos}}\n        <p>\n          {{#t}}Get the full Sync experience.{{/t}}\n          <br>\n          {{#t}}Download Firefox for iOS!{{/t}}\n        </p>\n        <a target="_blank" class="marketing-link marketing-link-ios" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="53" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n      {{/isIos}}\n\n      {{#isAndroid}}\n        <p>\n          {{#t}}Get the full Sync experience.{{/t}}\n          <br>\n          {{#t}}Download Firefox for Android.{{/t}}\n        </p>\n        <a target="_blank" class="marketing-link marketing-link-android" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45" src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}"></a>\n      {{/isAndroid}}\n\n      {{#isOther}}\n        <div class="os-general">\n          <p>\n            {{#t}}Get the full Sync experience.{{/t}}\n            <br>\n            <span class="download-firefox-mobile">{{#t}}Download Firefox for mobile devices.{{/t}}</span>\n          </p>\n\n          <ul>\n            <li>\n              <a target="_blank" class="marketing-link marketing-link-ios" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="45" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n            </li>\n            <li>\n              <a target="_blank" class="marketing-link marketing-link-android" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45"  src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}" /></a>\n            </li>\n          </ul>\n        </div>\n      {{/isOther}}\n    </aside>\n  {{/isSpring2015}}\n  {{#isAutumn2016}}\n    {{#isIos}}\n      <a target="_blank" class="marketing-link marketing-link-ios" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="53" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n    {{/isIos}}\n\n    {{#isAndroid}}\n      <a target="_blank" class="marketing-link marketing-link-android" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45" src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}" /></a>\n    {{/isAndroid}}\n\n    {{#isOther}}\n      <div class="links clearfix">\n        <a target="_blank" class="marketing-link marketing-link-ios left" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="45" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n        <a target="_blank" class="marketing-link marketing-link-android right" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45"  src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}" /></a>\n      </div>\n    {{/isOther}}\n  {{/isAutumn2016}}\n{{/showSignUpMarketing}}\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header class="hidden" id="fxa-connect-another-device-header"><h1>{{#t}}Connect another device{{/t}}</h1></header>\n  {{#showSuccessMessage}}\n    {{#isSignedIn}}\n      <div class="success success-authenticated visible">{{#t}}This Firefox is connected{{/t}}</div>\n    {{/isSignedIn}}\n    {{^isSignedIn}}\n      {{#isSignUp}}\n        <div class="success success-not-authenticated visible">{{#t}}Email verified{{/t}}</div>\n      {{/isSignUp}}\n      {{#isSignIn}}\n        <div class="success success-not-authenticated visible">{{#t}}Sign-in confirmed{{/t}}</div>\n      {{/isSignIn}}\n    {{/isSignedIn}}\n  {{/showSuccessMessage}}\n  <section>\n    <div class="graphic {{graphicId}}">{{#t}}Success{{/t}}</div>\n\n    {{#canSignIn}}\n      <p>\n        {{#t}}Sign in to this Firefox to complete set-up{{/t}}\n      </p>\n\n      <form novalidate>\n        <div class="button-row">\n          <a data-flow-event="link.signin" id="signin" class="button primary-button" href="{{{ escapedSignInUrl }}}">{{#unsafeTranslate}}Sign in &rarr;{{/unsafeTranslate}}</a>\n        </div>\n      </form>\n    {{/canSignIn}}\n    {{^canSignIn}}\n      {{#isFirefoxAndroid}}\n        \x3c!-- User verified in Fx for Android - they are using an old Fennec\n        or are already signed in. Ignore old browsers, assume already signed in.\n        Encourage installation on another device. --\x3e\n        <p id="connect-other-firefox-from-android">\n          {{#isSignIn}}\n            {{#t}}Still adding devices?{{/t}}\n          {{/isSignIn}}\n          {{#t}}Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isFirefoxAndroid}}\n      {{#isFirefoxDesktop}}\n        <p id="install-mobile-firefox-desktop">\n          {{#isSignIn}}\n            {{#t}}Still adding devices?{{/t}}\n          {{/isSignIn}}\n          {{#t}}Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isFirefoxDesktop}}\n      {{#isFirefoxIos}}\n        \x3c!-- user verifies in Fx for iOS, assume they are not signed in --\x3e\n        <p id="signin-fxios">\n          {{#t}}Still adding devices? Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isFirefoxIos}}\n      {{#isOtherAndroid}}\n        \x3c!-- Another android browser, encourage Fx for Android installation --\x3e\n        <p id="install-mobile-firefox-android">\n          {{#t}}Sign in to Firefox for Android to complete set-up{{/t}}\n        </p>\n      {{/isOtherAndroid}}\n      {{#isOtherIos}}\n        \x3c!-- Safari or Chrome for iOS, encourage installation of Fx --\x3e\n        <p id="install-mobile-firefox-ios">\n          {{#t}}Sign in to Firefox for iOS to complete set-up{{/t}}\n        </p>\n      {{/isOtherIos}}\n      {{#isOther}}\n        \x3c!-- probably some desktop browser --\x3e\n        <p id="install-mobile-firefox-other">\n          {{#isSignIn}}\n            {{#t}}Still adding devices?{{/t}}\n          {{/isSignIn}}\n          {{#t}}Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isOther}}\n\n        <div class="marketing-area"></div>\n    {{/canSignIn}}\n    <div class="links">\n      <a data-flow-event="link.why" href="/connect_another_device/why">{{#t}}Why is more than one device required?{{/t}}</a>\n    </div>\n    <aside class="child-view"></aside>\n  </section>\n\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-cookies-disabled-header">{{#t}}Cookies and local storage are required{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <p>\n      {{#t}}Please enable cookies and local storage in your browser to access Firefox Accounts. Doing so will enable functionality such as remembering you between sessions.{{/t}}\n    </p>\n\n    <p class="links">\n      <a href="https://support.mozilla.org/kb/cookies-information-websites-store-on-your-computer" target="_blank">{{#t}}Learn more{{/t}}</a>\n    </p>\n\n\n    <div class="button-row">\n      <button id="submit-btn" type="submit">{{#t}}Try again{{/t}}</button>\n    </div>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="delete-account" class="settings-unit">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Delete account{{/t}}</h2>\n    </header>\n    <button class="settings-button secondary-button settings-unit-toggle"\n      data-href="settings/delete_account">{{#t}}Deleteâ€¦{{/t}}</button>\n  </div>\n\n  <div class="settings-unit-details">\n    <div class="error"></div>\n\n    <form novalidate>\n      <p>{{#t}}If you use this account for Mozilla apps and services like AMO, Pocket, and Screenshots you should first log in and remove any saved personal information. Once you delete your account here you may lose access to it everywhere.{{/t}}</p>\n\n      <div class="input-row password-row">\n        \x3c!-- add the autocomplete=off attribute - the user is deleting the account, they most likely don\'t want the password saved. --\x3e\n        <input type="password" class="password tooltip-above" id="password" placeholder="{{#t}}Password{{/t}}" pattern=".{8,}" required autofocus autocomplete="off" />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="settings-button warning-button">{{#t}}Delete account{{/t}}</button>\n        <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n      </div>\n\n    </form>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="display-name" class="settings-unit">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Display name{{/t}}</h2>\n    </header>\n    {{#displayName}}\n      <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/display_name">\n      <span class="change-button">{{#t}}Changeâ€¦{{/t}}</span>\n      </button>\n    {{/displayName}}\n    {{^displayName}}\n      <button class="settings-button primary-button settings-unit-toggle" data-href="settings/display_name">\n      <span class="add-button">{{#t}}Addâ€¦{{/t}}</span>\n      </button>\n    {{/displayName}}\n  </div>\n\n  <div class="settings-unit-details">\n    <div class="error"></div>\n\n    <form novalidate>\n      <p>\n        {{#t}}Choose the name you would like to appear in Firefox and when managing your account.{{/t}}\n      </p>\n      <div class="input-row">\n        <input type="text" class="text display-name" placeholder="{{#t}}Display name{{/t}}" value="{{ displayName }}" autofocus  autocomplete="off"/>\n      </div>\n      <div class="button-row">\n        <button type="submit" class="settings-button primary-button">{{#t}}Change{{/t}}</button>\n        <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n      </div>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4).Model.extend({defaults:{email:null,isPrimary:!1,verified:!1}});i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="emails" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{#t}}Secondary email{{/t}}</h2>\n        </header>\n        <button class="settings-button settings-unit-toggle {{buttonClass}}" data-href="/settings/emails">\n            {{#hasSecondaryEmail}}{{#t}}Changeâ€¦{{/t}}{{/hasSecondaryEmail}}\n            {{^hasSecondaryEmail}}{{#t}}Addâ€¦{{/t}}{{/hasSecondaryEmail}}\n        </button>\n    </div>\n\n    <div class="settings-unit-details">\n        <form novalidate>\n            <p>\n                {{#t}}A secondary email is an additional address for receiving security notices and confirming new devices.{{/t}}\n            </p>\n            {{#hasSecondaryEmail}}\n                <ul class="email-list button-row">\n                    {{#emails}}\n                        {{^isPrimary}}\n                            <li class="email-address">\n                                <div class="address {{#verified}}verified{{/verified}}">{{email}}</div>\n                                <div class="details {{#verified}}verified{{/verified}}{{^verified}}not-verified{{/verified}}">\n                                    {{#verified}}\n                                        <div>{{#t}}verified{{/t}}</div>\n                                    {{/verified}}\n                                    {{^verified}}\n                                        <div>{{#t}}verification required{{/t}}</div>\n                                    {{/verified}}\n                                </div>\n                                <div class="settings-button-group">\n                                    {{#verified}}\n                                        <button class="settings-button secondary-button set-primary" data-id="{{email}}">\n                                            {{#t}}Make primary{{/t}}\n                                        </button>\n                                    {{/verified}}\n                                    <button class="settings-button warning-button email-disconnect" data-id="{{email}}">\n                                        {{#t}}Remove{{/t}}\n                                    </button>\n                                </div>\n                            </li>\n                            <li class="email-options">\n                                <div class="settings-button-group">\n                                    {{#verified}}\n                                        <button class="settings-button secondary-button set-primary" data-id="{{email}}">\n                                            {{#t}}Make primary{{/t}}\n                                        </button>\n                                    {{/verified}}\n                                    <button class="settings-button warning-button email-disconnect" data-id="{{email}}">\n                                        {{#t}}Remove{{/t}}\n                                    </button>\n                                </div>\n                            </li>\n\n                            {{^verified}}\n                                <a class="resend" data-id="{{email}}">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n                            {{/verified}}\n\n                        {{/isPrimary}}\n                    {{/emails}}\n                </ul>\n            {{/hasSecondaryEmail}}\n\n            {{^hasSecondaryEmail}}\n                <div class="input-row">\n                    <input type="email" class="new-email tooltip-below" placeholder="{{#t}}Secondary email{{/t}}"\n                           value="{{newEmail}}" autofocus autocomplete="off"/>\n                </div>\n            {{/hasSecondaryEmail}}\n\n            <div class="button-row">\n                {{#hasSecondaryEmail}}\n                    <button type="submit" class="settings-button email-refresh primary-button enabled" title="{{ lastCheckedTime }}">{{#t}}Refresh Status{{/t}}</button>\n\n                    <button\n                        class="settings-button {{#hasSecondaryVerifiedEmail}}cancel secondary-button enabled{{/hasSecondaryVerifiedEmail}}\n                            {{^hasSecondaryVerifiedEmail}} disabled {{/hasSecondaryVerifiedEmail}}">\n                        {{#t}}Done{{/t}}\n                    </button>\n                {{/hasSecondaryEmail}}\n\n                {{^hasSecondaryEmail}}\n                    <button type="submit" class="settings-button email-add primary-button">{{#t}}Add{{/t}}</button>\n                    <button class="settings-button cancel secondary-button enabled">{{#t}}Cancel{{/t}}</button>\n                {{/hasSecondaryEmail}}\n            </div>\n        </form>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{{ headerSignInText }}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{{ headerSignInText }}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    {{#error}}\n      <div class="error visible">{{ error }}</div>\n    {{/error}}\n\n    {{^error}}\n      <div class="error"></div>\n      <div class="success"></div>\n\n      {{#suggestedAccount}}\n          <div class="avatar-wrapper avatar-view"></div>\n          <p class="prefillEmail">{{ email }}</p>\n\n        {{#chooserAskForPassword}}\n          <form novalidate>\n            <input type="email" class="email hidden" value="{{ email }}" />\n\n            <div class="input-row password-row">\n              <input type="password" class="password tooltip-below" id="password" placeholder="{{#t}}Password{{/t}}" required pattern=".{8,}" autofocus />\n            </div>\n\n            <div class="button-row">\n              <button id="submit-btn" type="submit">{{{buttonSignInText}}}</button>\n            </div>\n           </form>\n\n           <div class="links">\n             <a href="/signin" class="left use-different" data-flow-event="use-different-account">{{#t}}Use a different account{{/t}}</a>\n             <a href="/reset_password" class="right reset-password" data-flow-event="forgot-password">{{#t}}Forgot password?{{/t}}</a><br/>\n           </div>\n        {{/chooserAskForPassword}}\n\n        {{^chooserAskForPassword}}\n          <form novalidate>\n            <div class="button-row">\n              <button id="submit-btn" type="submit" class="use-logged-in" autofocus>{{{buttonSignInText}}}</button>\n            </div>\n          </form>\n\n          <div class="links">\n            <a href="/signin" class="use-different" data-flow-event="use-different-account">{{#t}}Use a different account{{/t}}</a><br/>\n          </div>\n        {{/chooserAskForPassword}}\n      {{/suggestedAccount}}\n\n      {{^suggestedAccount}}\n        <form novalidate>\n        <div class="input-row">\n          <input name="email" type="email" class="email{{#email}} prefilled{{/email}}" placeholder="{{#t}}Email{{/t}}" value="{{ email }}" spellcheck="false" {{^email}}autofocus{{/email}}>\n        </div>\n\n        <div class="input-row password-row">\n          <input type="password" class="password tooltip-below" id="password" placeholder="{{#t}}Password{{/t}}" pattern=".{8,}" required {{#email}}autofocus{{/email}} />\n        </div>\n\n        <div class="button-row">\n          <button id="submit-btn" type="submit">{{{buttonSignInText}}}</button>\n        </div>\n      </form>\n\n      <div class="links">\n          <a href="/signup" class="left sign-up" data-flow-event="create-account">{{#t}}Create an account{{/t}}</a>\n          <a href="/reset_password" class="right reset-password" data-flow-event="forgot-password">{{#t}}Forgot password?{{/t}}</a>\n      </div>\n\n      <div class="tos-pp faint">\n        {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n      </div>\n      {{/suggestedAccount}}\n\n    {{/error}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-force-auth-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Sign in{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Sign in to continue{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    {{#fatalError}}\n      <div class="error visible"></div>\n    {{/fatalError}}\n    {{^fatalError}}\n\n    <div class="error"></div>\n    <div class="avatar-wrapper avatar-view"></div>\n    <p class="prefillEmail">{{ email }}</p>\n    <form novalidate>\n      <input type="email" class="email hidden" value="{{ email }}" disabled />\n      <div class="input-row password-row">\n        <input type="password" class="password tooltip-below" id="password" placeholder="{{#t}}Password{{/t}}" required pattern=".{8,}" required {{#email}}autofocus{{/email}} />\n      </div>\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{{buttonSignInText}}}</button>\n      </div>\n    </form>\n\n    <div class="links">\n      <a href="/reset_password" class="reset-password" data-flow-event="forgot-password">{{#t}}Forgot password?{{/t}}</a>\n    </div>\n\n    <div class="tos-pp faint">\n      {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n    </div>\n    {{/fatalError}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="coppa" class="input-row input-row-age">\n  <input type="number" pattern="\\d*" id="age" placeholder="{{#t}}How old are you?{{/t}}" min="0" max="999" value="{{ age }}" {{#required}}required{{/required}} />\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-enter-email-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Enter your email{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Enter your email{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <form novalidate>\n      <div class="input-row">\n        <input name="email" type="email" class="email tooltip-below" autofocus placeholder="{{#t}}Email{{/t}}"/>\n      </div>\n\n      <div class="tos-pp faint">\n        {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n      </div>\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Continue{{/t}}</button>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<fieldset class="checkbox-row {{^visible}}hidden{{/visible}}" {{#required}}disabled{{/required}}>\n  <input class="permission" id="{{ name }}" name="{{ name }}" type="checkbox" checked="checked" value="{{ name }}" {{#required}}disabled{{/required}}/><label for="{{ name }}">\n    {{#valueVisible}}\n      <span class="fxa-checkbox__value">{{ value }}</span>\n      <div class="fxa-checkbox__label">{{ label }}</div>\n    {{/valueVisible}}\n\n    {{^valueVisible}}\n      {{ label }}\n    {{/valueVisible}}\n  </label>\n</fieldset>\n\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-permissions-header">{{#t}}Request for permission{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p id="permission-request">{{#t}}%(serviceName)s wants the following information from your account:{{/t}}</p>\n\n    <form id="permissions" novalidate>\n      {{{ unsafePermissionsHTML }}}\n\n      <div class="button-row">\n        <button id="accept" type="submit">{{#t}}Accept{{/t}}</button>\n      </div>\n    </form>\n\n    <p class="links">\n      <a href="#" id="back">{{#t}}Cancel{{/t}}</a>\n    </p>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="{{headerId}}">{{{escapedHeaderTitle}}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <div class="graphic graphic-checkbox">{{#t}}Success{{/t}}</div>\n\n    {{#isSync}}\n      <p class="account-ready-service">{{{escapedReadyToSyncText}}}</p>\n    {{/isSync}}\n\n    {{^isSync}}\n      {{#serviceName}}\n        <p class="account-ready-service">{{#t}}You are now ready to use %(serviceName)s{{/t}}</p>\n          {{#showContinueButton}}\n              <div class="button-row">\n                  <button class="primary-button btn-continue">{{#t}}Continue{{/t}}</button>\n              </div>\n          {{/showContinueButton}}\n      {{/serviceName}}\n      {{^serviceName}}\n          {{#emailVerified}}\n              <p class="account-ready-service">{{{escapedEmailReadyText}}}</p>\n          {{/emailVerified}}\n\n          {{^emailVerified}}\n              <p class="account-ready-generic">{{#t}}Your account is ready!{{/t}}</p>\n          {{/emailVerified}}\n      {{/serviceName}}\n    {{/isSync}}\n\n      {{#isPasswordReset}}\n          <div class="button-row">\n              <button class="primary-button btn-create-recovery-key">{{#t}}Generate a new recovery key{{/t}}</button>\n              <button class="button-link btn-goto-account">{{#t}}Continue to my account{{/t}}</button>\n          </div>\n      {{/isPasswordReset}}\n\n      <div class="marketing-area"></div>\n  </section>\n</div>\n\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="recovery-codes">\n    <section class="modal-panel">\n        {{#modalSuccessMsg}}\n            <p class="success modal-success">{{modalSuccessMsg}}</p>\n        {{/modalSuccessMsg}}\n        <div class="error"></div>\n\n        <h2>{{#t}}Recovery codes{{/t}}</h2>\n\n    <form novalidate>\n        {{^showRecoveryCodes}}\n            <p class="description">\n                <span class="note">{{#t}}NOTE:{{/t}}</span>\n                {{#t}}By generating new recovery codes, all previous codes will become invalid. Please store new codes in a safe location.{{/t}}\n            </p>\n\n            <div class="recovery-code-generate">\n                <a class="replace-codes-link">{{#t}}Generate new recovery codes{{/t}}</a>\n            </div>\n        {{/showRecoveryCodes}}\n\n        {{#showRecoveryCodes}}\n            <p class="description">\n                <span class="note">{{#t}}NOTE:{{/t}}</span>\n                {{#t}}These are your one time use recovery codes. Store them in a safe place in the event you lose access to your mobile device. You will not be able to see these codes again.{{/t}}\n            </p>\n\n            <div id="recovery-code-container">\n                {{#recoveryCodes}}\n                    <div class="recovery-code">{{code}}</div>\n                {{/recoveryCodes}}\n            </div>\n            <div class="link-options">\n                <a class="replace-codes-link">{{#t}}Generate new recovery codes{{/t}}</a>\n            </div>\n\n            {{^isIos}}\n                <div class="button-row save-options">\n                    <a href="#" class="save-option download-option">\n                        <div class="graphic graphic-download-option"></div>\n                        <p class="name">{{#t}}Download{{/t}}</p>\n                    </a>\n                    <a href="#" class="save-option copy-option">\n                        <div class="graphic graphic-copy-option"></div>\n                        <p class="name">{{#t}}Copy{{/t}}</p>\n                    </a>\n                    <a href="#" class="save-option print-option">\n                        <div class="graphic graphic-print-option"></div>\n                        <p class="name">{{#t}}Print{{/t}}</p>\n                    </a>\n                </div>\n            {{/isIos}}\n\n            {{#isIos}}\n                <div class="button-row">\n                    <a href="#" class="save-option copy-option">\n                        <div class="graphic graphic-copy-option"></div>\n                        <p class="name">{{#t}}Copy{{/t}}</p>\n                    </a>\n                </div>\n            {{/isIos}}\n        {{/showRecoveryCodes}}\n\n        <div class="button-row">\n            <button class="settings-button secondary-button two-step-authentication-done">{{#t}}Done{{/t}}</button>\n        </div>\n    </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render("<html>\n<head><title>Recovery Codes</title>\n</head>\n<body>\n{{#recoveryCodes}}\n    <p>{{code}}</p>\n{{/recoveryCodes}}\n</body>\n</html>\n",e,t=t||{})}},function(e,t,n){"use strict";var i=n(4).Model.extend({defaults:{code:null}});e.exports=i},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  {{#isLinkDamaged}}\n    <header>\n      <h1 id="fxa-report-sign-in-link-damaged-header">{{#t}}Link damaged{{/t}}</h1>\n    </header>\n\n    <section>\n      <p>\n        {{#t}}The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.{{/t}}\n      </p>\n    </section>\n  {{/isLinkDamaged}}\n\n  {{#isLinkValid}}\n    <header>\n      <h1 id="fxa-report-sign-in-header">{{#t}}Report unauthorized sign-in?{{/t}}</h1>\n    </header>\n\n    <section>\n      <div class="success"></div>\n      <div class="error"></div>\n\n      <p>\n        {{#t}}You received an email about attempted access to your account. Would you like to report this activity as suspicious?{{/t}}\n      </p>\n\n      <form novalidate>\n        <div class="button-row">\n          <button id="submit-btn" type="submit">{{#t}}Report activity{{/t}}</button>\n        </div>\n      </form>\n    </section>\n\n    {{#hasSupportLink}}\n      <div class="links">\n        <a href="{{{ escapedSupportLink }}}" id="support-link" target="_blank">{{#t}}Why is this happening?{{/t}}</a>\n      </div>\n    {{/hasSupportLink}}\n  {{/isLinkValid}}\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(9),o=n(82);i.exports=o.extend({defaults:{uid:null,unblockCode:null},validation:{uid:r.uid().required(),unblockCode:r.unblockCode().required()}})}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-reset-password-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Reset password{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Reset password{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <form novalidate>\n      <p class="reset-warning">\n        {{#unsafeTranslate}}<span>NOTE:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.{{/unsafeTranslate}}\n      </p>\n      <div class="input-row">\n        {{#forceEmail}}\n          <p class="prefillEmail">{{ forceEmail }}</p>\n          <input type="email" class="email hidden" value="{{ forceEmail }}" disabled />\n        {{/forceEmail}}\n        {{^forceEmail}}\n          <input name="email" type="email" class="email" placeholder="{{#t}}Email{{/t}}" spellcheck="false" autofocus required autocomplete="off" />\n        {{/forceEmail}}\n      </div>\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit" class="warning-button">{{#t}}Begin reset{{/t}}</button>\n      </div>\n    </form>\n\n    {{#canGoBack}}\n    <div class="links">\n      <a href="#" class="remember-password">{{#t}}Remember password? Sign in{{/t}}</a>\n    </div>\n    {{/canGoBack}}\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="change-avatar" class="settings-unit">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Account picture{{/t}}</h2>\n    </header>\n    {{^avatarDefault}}\n      <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/avatar/change">\n      <span class="change-button">{{#t}}Changeâ€¦{{/t}}</span>\n      </button>\n    {{/avatarDefault}}\n    {{#avatarDefault}}\n      <button class="settings-button primary-button settings-unit-toggle" data-href="settings/avatar/change">\n      <span class="add-button">{{#t}}Addâ€¦{{/t}}</span>\n      </button>\n    {{/avatarDefault}}\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('{{#displayName}}\n  <h1 class="card-header">{{displayName}}</h1>\n  <h2 class="card-subheader">{{email}}</h2>\n{{/displayName}}\n{{^displayName}}\n  <h1 class="card-header">{{email}}</h1>\n  <h2 class="card-subheader"></h2>\n{{/displayName}}\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div class="child-views"></div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="fxa-settings-header-wrapper">\n  <header id="fxa-settings-header">\n    <h1 id="fxa-manage-account">{{#t}}Firefox Accounts{{/t}}</h1>\n    {{#showSignOut}}\n      <button id="signout" class="settings-button secondary-button">{{#t}}Sign out{{/t}}</button>\n    {{/showSignOut}}\n  </header>\n\n  <div class="settings-success-wrapper">\n    <div class="success settings-success"></div>\n  </div>\n</div>\n\n<div class="avatar-wrapper avatar-settings-view"></div>\n<div id="fxa-settings-content" class="card">\n  <header id="fxa-settings-profile-header">\n    {{{ unsafeHeaderHTML }}}\n  </header>\n  <div id="sub-panels"></div>\n</div>\n\n<footer id="legal-footer"><a class="terms" href="/legal/terms">{{#t}}Terms of Service{{/t}}</a><a class="privacy" href="/legal/privacy">{{#t}}Privacy Notice{{/t}}</a></footer>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="totp-section" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}} totp-panel">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{#t}}Two-step authentication{{/t}}</h2>\n        </header>\n\n        {{^hasToken}}\n            <button class="settings-button primary-button settings-unit-toggle totp-create" data-href="settings/two_step_authentication">\n                {{#t}}Enableâ€¦{{/t}}\n            </button>\n        {{/hasToken}}\n\n        {{#hasToken}}\n            <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/two_step_authentication">\n                {{#t}}Changeâ€¦{{/t}}\n            </button>\n        {{/hasToken}}\n    </div>\n\n\n    <div class="settings-unit-details">\n        <p>\n            {{#unsafeTranslate}}Add a layer of security to your account by requiring security codes from one of <a %(escapedTotpSupportAttributes)s>these authentication apps</a>.{{/unsafeTranslate}}\n        </p>\n\n        <div class="totp-list">\n            <ul id="totp-status">\n                <li class="totp-type">\n                    <div class="name">{{#t}}Current status{{/t}}</div>\n                    <div class="details">\n                        {{#hasToken}}\n                            <div class="enabled">{{#t}}Enabled{{/t}}</div>\n                        {{/hasToken}}\n                        {{^hasToken}}\n                            <div class="disabled">{{#t}}Disabled{{/t}}</div>\n                        {{/hasToken}}\n                    </div>\n                    <div class="panel-settings-button-group">\n                        {{#hasToken}}\n                            <button class="settings-button warning-button totp-delete">{{#t}}Disable{{/t}}</button>\n                        {{/hasToken}}\n                        {{^hasToken}}\n                            <button class="settings-button secondary-button totp-create">{{#t}}Enable{{/t}}</button>\n                        {{/hasToken}}\n                    </div>\n                </li>\n                <li>\n                    {{#hasToken}}\n                        <a class="replace-codes-link">{{#t}}Replace recovery codes{{/t}}</a>\n                    {{/hasToken}}\n                </li>\n            </ul>\n            <div class="button-row">\n                <button class="settings-button primary-button totp-refresh" title="{{ lastCheckedTime }}">{{#t}}Refresh Status{{/t}}</button>\n                <button class="settings-button cancel secondary-button enabled totp-cancel">{{#t}}Cancel{{/t}}</button>\n            </div>\n        </div>\n\n        <form novalidate>\n            <div id="totp" class="totp-details hidden">\n                <div class="qr-image-container">\n                    <img class="qr-image" alt="{{ qrImageAltText }}"/>\n                </div>\n\n                <p class="setup-description">\n                    {{#t}}Scan the QR code in your authentication app and then enter the security code it provides.{{/t}}\n                    <a href="#" class="show-code-link">{{#t}}Canâ€™t scan code?{{/t}}</a>\n                </p>\n\n                <div class="manual-code hidden">\n                    <p class="setup-description">{{#t}}Manually enter this secret key into your authentication app:{{/t}}</p>\n                    <div class="code"></div>\n                </div>\n\n                <div class="input-row">\n                    <input type="number" pattern="\\d*" class="tooltip-below totp-code" placeholder="{{#t}}Security code{{/t}}" value="{{ code }}" required autofocus autocomplete="off"/>\n                </div>\n\n                <div class="button-row">\n                    <button type="submit" class="settings-button primary-button totp-confirm-code">{{#t}}Confirm{{/t}}</button>\n                    <button class="settings-button cancel secondary-button enabled totp-cancel">{{#t}}Cancel{{/t}}</button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-bounced-header">{{#unsafeTranslate}}Sorry. Weâ€™ve locked your&nbsp;account.{{/unsafeTranslate}}</h1>\n  </header>\n\n  <section>\n    <div class="graphic graphic-mail-bounced"></div>\n\n    <p>{{#t}}The confirmation email we sent to %(email)s was returned and weâ€™ve locked your account to protect your Firefox data.{{/t}}</p>\n\n    <p class="faint">{{#unsafeTranslate}}If this is a valid email address, <a %(escapedSupportLinkAttrs)s>let us know</a> and we can help unlock your account.{{/unsafeTranslate}}</p>\n\n    <div class="links">\n      <a id="create-account" class="{{#canGoBack}}left {{/canGoBack}}delayed-fadein" href="#" data-flow-event="link.create-account">{{#t}}No longer own that email? Create a new account{{/t}}</a>\n      {{#canGoBack}}\n        <a id="back" class="right delayed-fadein" href="#" data-flow-event="link.back">{{#t}}Back{{/t}}</a>\n      {{/canGoBack}}\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-password-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Sign in{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Sign in{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    {{{ userCardHTML }}}\n\n\n    <form novalidate>\n      <input type="email" class="email hidden" value="{{ email }}" disabled />\n\n      {{#isPasswordNeeded}}\n      <div class="input-row password-row">\n        <input id="password" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Password{{/t}}" value="{{ password }}" pattern=".{8,}" required autofocus />\n      </div>\n      {{/isPasswordNeeded}}\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Sign in{{/t}}</button>\n      </div>\n\n      <div class="links">\n        <a href="/reset_password" class="center reset-password" data-flow-event="forgot-password">{{#t}}Forgot password?{{/t}}</a>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div class="user-card">\n  <div class="avatar-wrapper card-view"></div>\n  <div class="user-info">\n    <div>\n      <div class="prefillEmail">{{ email }}</div>\n      <a href="/" class="use-different" data-flow-event="use-different-account">{{#t}}Use a different email address{{/t}}</a>\n    </div>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-recovery-code-header">{{#t}}Enter recovery code{{/t}}\n        {{#serviceName}}\n            <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n        {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-recovery-codes"></div>\n\n    <p class="verification-recovery-code-message">\n    {{#t}}Please enter a recovery code that was provided to you during setup.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row token-code-row">\n        <input type="text" class="tooltip-below recovery-code" placeholder="{{#t}}Enter 10-digit recovery code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Verify{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links centered">\n      <a id="use-backup-link" href="/signin_totp_code">{{#t}}Use security code{{/t}}</a>\n      <a class="different-account-link" href="/signin">{{#t}}Use a different account{{/t}}</a>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n    <header>\n      <h1 id="fxa-sign-in-reported-header">{{#t}}Thank you for your vigilance{{/t}}</h1>\n    </header>\n\n    <section>\n      <p>\n        {{#t}}Our team has been notified. Reports like this help us fend off intruders.{{/t}}\n      </p>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-code-header">{{#t}}Authorize this sign-in{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail">{{#t}}Authorize this sign-in{{/t}}</div>\n\n    <p class="verification-email-message">\n    {{#t}}Check your email for the code sent to %(email)s.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row token-code-row">\n        <input type="number" pattern="\\d*" class="tooltip-below token-code" placeholder="{{#t}}Enter code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Continue{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links">\n        <a href="{{{ escapedSupportLink }}}" id="support-link" class="delayed-fadein right" target="_blank">{{#t}}Why is this happening?{{/t}}</a>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-totp-code-header">{{#t}}Enter security code{{/t}}\n        {{#serviceName}}\n            <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n        {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-two-factor-auth"></div>\n\n    <p class="verification-totp-message">\n    {{#t}}Open your authentication app and enter the security code it provides.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row token-code-row">\n        <input type="number" pattern="\\d*" class="tooltip-below totp-code" placeholder="{{#t}}Enter 6-digit code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Verify{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links centered">\n      <a id="use-recovery-code-link" href="/signin_recovery_code">{{#t}}Use recovery code{{/t}}</a>\n      <a class="different-account-link" href="/signin">{{#t}}Use a different account{{/t}}</a>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-unblock-header">{{#t}}Authorize this sign-in{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail">{{#t}}Authorize this sign-in{{/t}}</div>\n\n    <p class="verification-email-message">\n    {{#t}}Check your email for the authorization code sent to %(email)s.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row unblock-code-row">\n        <input type="text" class="tooltip-below unblock-code" id="unblock_code" placeholder="{{#t}}Enter authorization code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Continue{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links">\n      {{#hasSupportLink}}\n        <a id="resend" class="delayed-fadein left" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n        <a href="{{{ escapedSupportLink }}}" id="support-link" class="delayed-fadein right" target="_blank">{{#t}}Why is this happening?{{/t}}</a>\n      {{/hasSupportLink}}\n      {{^hasSupportLink}}\n        <a id="resend" class="delayed-fadein" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n      {{/hasSupportLink}}\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signup-password-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Create a Firefox Account{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Create a Firefox Account{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <form novalidate>\n      <p class="prefillEmail">{{ email }}</p>\n      <input type="email" class="email hidden" value="{{ email }}" disabled />\n\n      <div class="input-row password-row">\n        <input id="password" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Password{{/t}}" value="{{ password }}" pattern=".{8,}" required autofocus data-form-prefill="password" data-synchronize-show="true" />\n        <div class="helper-balloon"></div>\n      </div>\n\n      <div class="input-row password-row">\n        <input id="vpassword" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Repeat password{{/t}}" pattern=".{8,}" required data-synchronize-show="true" />\n      </div>\n\n      {{{ coppaHTML }}}\n\n      <div class="tos-pp faint">\n        {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n      </div>\n\n      {{#isEmailOptInVisible}}\n      <div class="input-row marketing-email-optin-row">\n        <input id="marketing-email-optin" type="checkbox" class="marketing-email-optin"><label for="marketing-email-optin">{{#t}}Get the latest news about Mozilla and Firefox{{/t}}</label>\n      </div>\n      {{/isEmailOptInVisible}}\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Create account{{/t}}</button>\n      </div>\n\n      <div class="links">\n        <a href="/" class="use-different">{{#t}}Mistyped email?{{/t}}</a>\n      </div>\n\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(8),s=n(40);n(208);var a=n(80),c=[],u=["gmail","qq","yandex","o2","rambler","googlemail","t-online","mail","web","sbcglobal","msn","hotmail","me","aol","seznam","comcast","orange","gmx","ymail","outlook","live","yahoo"],l=[],d="Did you mean <span %(escapedEmailSuggestionAttrs)s>%(escapedDomain)s</span>?";i.exports=function(e,t){var n=o(e);n.length&&t&&(n.data("previousValue")!==n.val()&&n.val().length>5&&(t.logEvent("mailcheck.triggered"),n.mailcheck({domains:c,secondLevelDomains:u,topLevelDomains:l,suggested:function(n,i){if(!(!i||!i.domain||-1===i.domain.indexOf("."))){t.logEvent("mailcheck.suggested");var o=t.unsafeTranslate(d,{escapedDomain:r.escape(i.domain),escapedEmailSuggestionAttrs:'id="email-suggestion" tabindex="1"'}),c=new a({dismissible:!0,extraClassNames:"tooltip-suggest tooltip-error",invalidEl:e,type:"mailcheck",unsafeMessage:o});c.render(),n.data("mailcheckValue",i.full),c.$el.on("click keypress","span",function(e){"click"!==e.type&&e.which!==s.ENTER||(n.val(i.full),t.logEvent("mailcheck.clicked"),c._destroy(),c=null)})}}})),n.data("previousValue",n.val()))}}(0,0,e))||(e.exports=i)},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('{{#showSyncSuggestion}}\n  <div class="info" id="suggest-sync">\n      {{#unsafeTranslate}}Looking for Firefox Sync? <a %(escapedSyncSuggestionAttrs)s>Get started here</a>{{/unsafeTranslate}}\n      <span class="dismiss" tabindex="-1">&#10005;</span>\n  </div>\n{{/showSyncSuggestion}}\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signup-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Create a Firefox Account{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Create a Firefox Account{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    {{#error}}\n      <div class="error visible">{{ error }}</div>\n    {{/error}}\n\n    {{^error}}\n    {{{ syncSuggestionHTML }}}\n\n    <div class="error"></div>\n    <div class="success"></div>\n\n\n    <form novalidate>\n      <div class="input-row">\n        {{#forceEmail}}\n          <p class="prefillEmail">{{ forceEmail }}</p>\n          <input type="email" class="email hidden tooltip-below" value="{{ forceEmail }}" disabled />\n        {{/forceEmail}}\n        {{^forceEmail}}\n          <input name="email" type="email" class="email tooltip-below" placeholder="{{#t}}Email{{/t}}" value="{{ email }}" spellcheck="false" required />\n        {{/forceEmail}}\n      </div>\n\n      <div class="input-row password-row">\n        <input id="password" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Password{{/t}}" pattern=".{8,}" required data-synchronize-show="true" />\n      </div>\n\n      <div class="input-row password-row">\n        <input id="vpassword" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Repeat password{{/t}}" pattern=".{8,}" required data-synchronize-show="true" />\n        <div class="input-help input-help-focused input-help-signup input-help-small-only">{{#t}}Donâ€™t lose this password. If you need to reset it, you may lose Sync data.{{/t}}</div>\n        <div class="input-help input-help-focused input-help-signup input-help-big-only input-help-balloon follow-focus">\n          {{#unsafeTranslate}}<span>Donâ€™t reuse your email password</span>If someone knows your email password, they can approve your Firefox sign-in on a new device and access your data.{{/unsafeTranslate}}\n          <br/><br/>\n          {{#unsafeTranslate}}<span>Remember your password</span>If you need to reset your password, you will lose any Sync data that is not on one of your devices.{{/unsafeTranslate}}\n        </div>\n      </div>\n\n      {{{ coppaHTML }}}\n\n      <div class="tos-pp faint">\n        {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n      </div>\n\n      {{#isEmailOptInVisible}}\n      <div class="input-row marketing-email-optin-row">\n        <input id="marketing-email-optin" type="checkbox" class="marketing-email-optin" /><label for="marketing-email-optin">{{#t}}Get the latest news about Mozilla and Firefox{{/t}}</label>\n      </div>\n      {{/isEmailOptInVisible}}\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Create account{{/t}}</button>\n      </div>\n\n      {{#isSync}}\n      {{#chooseWhatToSyncCheckbox}}\n        <div class="input-row customize-sync-row">\n          <input id="customize-sync" type="checkbox" class="customize-sync customize-sync-bottom" {{#isCustomizeSyncChecked}}checked="checked"{{/isCustomizeSyncChecked}} /><label for="customize-sync">{{#t}}Choose what to sync{{/t}}</label>\n        </div>\n      {{/chooseWhatToSyncCheckbox}}\n      {{/isSync}}\n    </form>\n\n    <div class="links">\n      {{#isSignInEnabled}}\n        <a href="/signin" id="have-account" data-flow-event="have-account" class="sign-in">{{#t}}Have an account? Sign in{{/t}}</a>\n      {{/isSignInEnabled}}\n    </div>\n\n    {{/error}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n    <header class="hidden" id="fxa-send-sms-header"><h1>{{#t}}Send Firefox directly to your smartphone and sign in to complete set-up{{/t}}</h1></header>\n\t{{#showSuccessMessage}}\n      <div class="success visible">{{#t}}This Firefox is connected{{/t}}</div>\n\t{{/showSuccessMessage}}\n    <div class="error"></div>\n\n    <section class="send-sms">\n      <div class="graphic {{graphicId}}">{{#t}}Success{{/t}}</div>\n\n      <p>\n        {{#isSignIn}}\n          {{#t}}Still adding devices?{{/t}}\n        {{/isSignIn}}\n        {{#t}}Send Firefox directly to your smartphone and sign in to complete set-up{{/t}}\n      </p>\n\n      <form novalidate>\n        <div class="input-row sms-row">\n          <input name="phoneNumber" class="phone-number" type="tel" data-country="{{country}}" value="{{phoneNumber}}" placeholder="{{#t}}Mobile phone number{{/t}}" required autofocus="autofocus" />\n          <button type="submit" class="sms-send primary-button">{{#t}}Send{{/t}}</button>\n        </div>\n      </form>\n    </section>\n    <div class="marketing-area"></div>\n    <div class="sms-disclaimer faint">\n      {{#unsafeTranslate}}SMS service only available in certain countries. SMS &amp; data rates may apply. The intended recipient of the email or SMS must have consented. <a %(escapedLearnMoreAttributes)s>Learn more</a>{{/unsafeTranslate}}\n    </div>\n    <div class="links">\n      <a href="/sms/why" data-flow-event="link.why">{{#t}}Why is more than one device required?{{/t}}</a>\n    </div>\n    <aside class="child-view"></aside>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header class="hidden" id="fxa-sms-sent-header"><h1>{{#t}}Install Firefox on your smartphone and sign in to complete set-up{{/t}}</h1></header>\n  <section>\n    {{^isResend}}\n        <div id="send-success" class="success visible">\n          {{#unsafeTranslate}}App link sent to %(escapedPhoneNumber)s. <a %(escapedBackLinkAttrs)s>Mistyped&nbsp;number?</a>{{/unsafeTranslate}}\n        </div>\n      {{/isResend}}\n      {{#isResend}}\n        <div id="resend-success" class="success visible shake">\n          {{#unsafeTranslate}}App link resent to %(escapedPhoneNumber)s. <a %(escapedBackLinkAttrs)s>Mistyped&nbsp;number?</a>{{/unsafeTranslate}}\n        </div>\n      {{/isResend}}\n    <div class="error"></div>\n\n    <div class="graphic {{graphicId}}">{{#t}}Success{{/t}}</div>\n\n    <p id="sms-sent-to">\n      {{#t}}Install Firefox on your smartphone and sign in to complete set-up{{/t}}\n    </p>\n\n    <div class="faint">\n      {{#t}}If you are not receiving the text message, you can also download the apps manually.{{/t}}\n    </div>\n\n    <div class="marketing-area"></div>\n    <div class="links">\n      <a id="resend" class="delayed-fadein" href="#">{{#t}}Didn\'t arrive? Resend{{/t}}</a>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(1);e.exports=function(e,t){return i.render('<aside class="modal-panel connect-another-device">\n  <header>\n    <h1 id="fxa-why-connect-another-device-header">{{#t}}Why sync multiple devices?{{/t}}</h1>\n  </header>\n\n  <p>\n    {{#t}}The Sync service isnâ€™t a permanent backup, itâ€™s simply a secure way to transfer saved bookmarks, history and passwords between your own devices.{{/t}}\n  </p>\n  <p>\n    {{#t}}You should install Firefox and sync at least two devices to protect against losing your data if you need to restore it but forget your password.{{/t}}\n  </p>\n  <div class="button-row">\n    <button id="back" type="submit">{{#t}}Got it{{/t}}</button>\n  </div>\n</aside>\n',e,t=t||{})}},function(e,t,n){function i(e){var t=r[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n.t(t[0],7)}):Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}var r={"./":[64],"./account_recovery_confirm_key":[125],"./account_recovery_confirm_key.js":[125],"./app":[114],"./app.js":[114],"./authorization":[156],"./authorization.js":[156],"./base":[6],"./base.js":[6],"./behaviors/connect-another-device":[117],"./behaviors/connect-another-device.js":[117],"./behaviors/halt":[42],"./behaviors/halt-if-browser-transitions":[121],"./behaviors/halt-if-browser-transitions.js":[121],"./behaviors/halt.js":[42],"./behaviors/navigate":[25],"./behaviors/navigate.js":[25],"./behaviors/null":[53],"./behaviors/null.js":[53],"./behaviors/settings":[74],"./behaviors/settings.js":[74],"./cannot_create_account":[140],"./cannot_create_account.js":[140],"./choose_what_to_sync":[143],"./choose_what_to_sync.js":[143],"./clear_storage":[144],"./clear_storage.js":[144],"./complete_reset_password":[145],"./complete_reset_password.js":[145],"./complete_sign_up":[146],"./complete_sign_up.js":[146],"./confirm":[149],"./confirm.js":[149],"./confirm_reset_password":[147],"./confirm_reset_password.js":[147],"./connect_another_device":[150],"./connect_another_device.js":[150],"./cookies_disabled":[151],"./cookies_disabled.js":[151],"./decorators/allow_only_one_submit":[78],"./decorators/allow_only_one_submit.js":[78],"./decorators/notify_delayed_request":[126],"./decorators/notify_delayed_request.js":[126],"./decorators/progress_indicator":[37],"./decorators/progress_indicator.js":[37],"./elements/checkbox-input":[128],"./elements/checkbox-input.js":[128],"./elements/coppa-age-input":[129],"./elements/coppa-age-input.js":[129],"./elements/default":[130],"./elements/default.js":[130],"./elements/email-input":[131],"./elements/email-input.js":[131],"./elements/jquery-plugin":[127],"./elements/jquery-plugin.js":[127],"./elements/password-input":[132],"./elements/password-input.js":[132],"./elements/recovery-code-input":[133],"./elements/recovery-code-input.js":[133],"./elements/recovery-key-input":[134],"./elements/recovery-key-input.js":[134],"./elements/tel-input":[135],"./elements/tel-input.js":[135],"./elements/text-input":[28],"./elements/text-input.js":[28],"./elements/token-code-input":[137],"./elements/token-code-input.js":[137],"./elements/totp-code-input":[136],"./elements/totp-code-input.js":[136],"./elements/unblock-code-input":[138],"./elements/unblock-code-input.js":[138],"./force_auth":[152],"./force_auth.js":[152],"./form":[7],"./form.js":[7],"./index":[64],"./index.js":[64],"./legal":[215,1],"./legal.js":[215,1],"./legal_copy":[212,2],"./legal_copy.js":[212,2],"./marketing_snippet":[100],"./marketing_snippet.js":[100],"./mixins/account-reset-mixin":[60],"./mixins/account-reset-mixin.js":[60],"./mixins/avatar-mixin":[15],"./mixins/avatar-mixin.js":[15],"./mixins/back-mixin":[16],"./mixins/back-mixin.js":[16],"./mixins/cached-credentials-mixin":[61],"./mixins/cached-credentials-mixin.js":[61],"./mixins/connect-another-device-mixin":[41],"./mixins/connect-another-device-mixin.js":[41],"./mixins/coppa-mixin":[65],"./mixins/coppa-mixin.js":[65],"./mixins/disable-form-mixin":[91],"./mixins/disable-form-mixin.js":[91],"./mixins/email-first-experiment-mixin":[62],"./mixins/email-first-experiment-mixin.js":[62],"./mixins/email-opt-in-mixin":[110],"./mixins/email-opt-in-mixin.js":[110],"./mixins/experiment-mixin":[19],"./mixins/experiment-mixin.js":[19],"./mixins/external-links-mixin":[115],"./mixins/external-links-mixin.js":[115],"./mixins/flow-begin-mixin":[63],"./mixins/flow-begin-mixin.js":[63],"./mixins/flow-events-mixin":[10],"./mixins/flow-events-mixin.js":[10],"./mixins/form-prefill-mixin":[22],"./mixins/form-prefill-mixin.js":[22],"./mixins/last-checked-time-mixin":[43],"./mixins/last-checked-time-mixin.js":[43],"./mixins/loading-mixin":[72],"./mixins/loading-mixin.js":[72],"./mixins/marketing-mixin":[44],"./mixins/marketing-mixin.js":[44],"./mixins/modal-panel-mixin":[85],"./mixins/modal-panel-mixin.js":[85],"./mixins/modal-settings-panel-mixin":[21],"./mixins/modal-settings-panel-mixin.js":[21],"./mixins/one-visible-of-type-mixin":[81],"./mixins/one-visible-of-type-mixin.js":[81],"./mixins/open-webmail-mixin":[99],"./mixins/open-webmail-mixin.js":[99],"./mixins/password-mixin":[17],"./mixins/password-mixin.js":[17],"./mixins/password-reset-mixin":[32],"./mixins/password-reset-mixin.js":[32],"./mixins/password-strength-mixin":[57],"./mixins/password-strength-mixin.js":[57],"./mixins/pulse-graphic-mixin":[59],"./mixins/pulse-graphic-mixin.js":[59],"./mixins/resend-mixin":[29],"./mixins/resend-mixin.js":[29],"./mixins/resume-token-mixin":[33],"./mixins/resume-token-mixin.js":[33],"./mixins/save-options-mixin":[88],"./mixins/save-options-mixin.js":[88],"./mixins/service-mixin":[11],"./mixins/service-mixin.js":[11],"./mixins/session-verification-poll-mixin":[95],"./mixins/session-verification-poll-mixin.js":[95],"./mixins/session-verified-notification-mixin":[139],"./mixins/session-verified-notification-mixin.js":[139],"./mixins/settings-panel-mixin":[14],"./mixins/settings-panel-mixin.js":[14],"./mixins/signed-in-notification-mixin":[106],"./mixins/signed-in-notification-mixin.js":[106],"./mixins/signed-out-notification-mixin":[58],"./mixins/signed-out-notification-mixin.js":[58],"./mixins/signin-mixin":[45],"./mixins/signin-mixin.js":[45],"./mixins/signup-mixin":[111],"./mixins/signup-mixin.js":[111],"./mixins/sms-mixin":[112],"./mixins/sms-mixin.js":[112],"./mixins/sync-auth-mixin":[101],"./mixins/sync-auth-mixin.js":[101],"./mixins/sync-suggestion-mixin":[172],"./mixins/sync-suggestion-mixin.js":[172],"./mixins/timer-mixin":[71],"./mixins/timer-mixin.js":[71],"./mixins/token-code-experiment-mixin":[107],"./mixins/token-code-experiment-mixin.js":[107],"./mixins/upgrade-session-mixin":[56],"./mixins/upgrade-session-mixin.js":[56],"./mixins/user-card-mixin":[164],"./mixins/user-card-mixin.js":[164],"./mixins/verification-reason-mixin":[20],"./mixins/verification-reason-mixin.js":[20],"./oauth_index":[153],"./oauth_index.js":[153],"./pair":[113,0],"./pair/":[113,0],"./pair/auth_allow":[216,3],"./pair/auth_allow.js":[216,3],"./pair/auth_complete":[217,4],"./pair/auth_complete.js":[217,4],"./pair/auth_wait_for_supp":[218,5],"./pair/auth_wait_for_supp.js":[218,5],"./pair/device-being-paired-mixin":[211,6],"./pair/device-being-paired-mixin.js":[211,6],"./pair/failure":[219,7],"./pair/failure.js":[219,7],"./pair/index":[113,0],"./pair/index.js":[113,0],"./pair/success":[220,8],"./pair/success.js":[220,8],"./pair/supp":[221,9],"./pair/supp.js":[221,9],"./pair/supp_allow":[222,10],"./pair/supp_allow.js":[222,10],"./pair/supp_wait_for_auth":[223,11],"./pair/supp_wait_for_auth.js":[223,11],"./password_strength/password_strength_balloon":[142],"./password_strength/password_strength_balloon.js":[142],"./password_strength/password_with_strength_balloon":[141],"./password_strength/password_with_strength_balloon.js":[141],"./permissions":[154],"./permissions.js":[154],"./pp":[224,12],"./pp.js":[224,12],"./progress_indicator":[79],"./progress_indicator.js":[79],"./ready":[155],"./ready.js":[155],"./report_sign_in":[157],"./report_sign_in.js":[157],"./reset_password":[158],"./reset_password.js":[158],"./settings":[159],"./settings.js":[159],"./settings/account_recovery/account_recovery":[83],"./settings/account_recovery/account_recovery.js":[83],"./settings/account_recovery/confirm_password":[84],"./settings/account_recovery/confirm_password.js":[84],"./settings/account_recovery/confirm_revoke":[86],"./settings/account_recovery/confirm_revoke.js":[86],"./settings/account_recovery/recovery_key":[87],"./settings/account_recovery/recovery_key.js":[87],"./settings/avatar":[160],"./settings/avatar.js":[160],"./settings/avatar_camera":[89],"./settings/avatar_camera.js":[89],"./settings/avatar_change":[92],"./settings/avatar_change.js":[92],"./settings/avatar_crop":[93],"./settings/avatar_crop.js":[93],"./settings/change_password":[94],"./settings/change_password.js":[94],"./settings/client_disconnect":[96],"./settings/client_disconnect.js":[96],"./settings/clients":[97],"./settings/clients.js":[97],"./settings/communication_preferences":[98],"./settings/communication_preferences.js":[98],"./settings/delete_account":[102],"./settings/delete_account.js":[102],"./settings/display_name":[103],"./settings/display_name.js":[103],"./settings/emails":[104],"./settings/emails.js":[104],"./settings/recovery_codes":[108],"./settings/recovery_codes.js":[108],"./settings/two_step_authentication":[109],"./settings/two_step_authentication.js":[109],"./sign_in":[105],"./sign_in.js":[105],"./sign_in_bounced":[162],"./sign_in_bounced.js":[162],"./sign_in_password":[163],"./sign_in_password.js":[163],"./sign_in_recovery_code":[165],"./sign_in_recovery_code.js":[165],"./sign_in_reported":[166],"./sign_in_reported.js":[166],"./sign_in_token_code":[167],"./sign_in_token_code.js":[167],"./sign_in_totp_code":[168],"./sign_in_totp_code.js":[168],"./sign_in_unblock":[169],"./sign_in_unblock.js":[169],"./sign_up":[171],"./sign_up.js":[171],"./sign_up_password":[170],"./sign_up_password.js":[170],"./sms_send":[173],"./sms_send.js":[173],"./sms_sent":[174],"./sms_sent.js":[174],"./sub_panels":[161],"./sub_panels.js":[161],"./tooltip":[80],"./tooltip.js":[80],"./tos":[225,13],"./tos.js":[225,13],"./why_connect_another_device":[175],"./why_connect_another_device.js":[175]};i.keys=function(){return Object.keys(r)},i.id=367,e.exports=i},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){return e&&e.request&&(e.request.url&&(e.request.url=s(e.request.url)),e.tags&&e.tags.errno&&(e.fingerprint=["errno"+e.tags.errno],e.level="info"),e.exception&&e.exception.values&&c.each(e.exception.values,function(e){e.stacktrace&&e.stacktrace.frames&&c.each(e.stacktrace.frames,function(e){e.abs_path&&(e.abs_path=s(e.abs_path))})}),e.request.headers&&e.request.headers.Referer&&(e.request.headers.Referer=s(e.request.headers.Referer))),e}function o(e){return!e||!e.message||(e.message===g?p++:p=0,f!==p&&(g=e.message,!0))}function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.indexOf("?"),i=t;return-1===n?i:(e=d.searchParams(t.substring(n+1)),i=t.substring(0,n),c.isObject(e)&&(Object.keys(e).forEach(function(t){c.contains(h,t)||(e[t]="VALUE")}),i+=d.objToSearchString(e)),i)}function a(e,t){if(this._logger=new u,this._release=t,e){this._endpoint="//__API_KEY__@"+e+"/metrics-errors";try{l.config(this._endpoint,this._ravenOpts).install(),l.debug=!1}catch(e){l.uninstall(),this._logger.error(e)}}else this._logger.error("No Sentry host provided")}var c=n(0),u=n(18),l=n(50),d=n(13),h=["automatedBrowser","client_id","context","customizeSync","entrypoint","keys","migration","redirect_uri","scope","service","setting","style"],f=10,p=0,g=null;a.prototype={_endpoint:null,_ravenOpts:{dataCallback:r,shouldSendCallback:o},_exceptionTags:["code","context","errno","namespace","status"],captureException:function(e){var t={};this._exceptionTags.forEach(function(n){n in e&&(t[n]=e[n])});var n={tags:t};this._release&&(n.release=this._release),l.captureException(e,n)},remove:function(){l.uninstall()},__beforeSend:r,__cleanUpQueryParam:s,__shouldSendCallback:o},i.exports=a}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){function r(e){s.call(this,e)}var o=n(0),s=n(69),a=n(26).factory("localStorage");o.extend(r.prototype,s.prototype,{_send:function(e){var t=a.get("metrics_all");return Array.isArray(t)||(t=[]),t.push(e),a.set("metrics_all",t),Promise.resolve(e)},isMetricsCollectionEnabled:function(){return!1}}),i.exports=r}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(24)),s=i(n(123)),a=i(n(9)),c={access_type:a.default.accessType().renameTo("accessType"),client_id:a.default.clientId().required().renameTo("clientId"),code_challenge:a.default.codeChallenge().required().renameTo("codeChallenge"),code_challenge_method:a.default.codeChallengeMethod().required().renameTo("codeChallengeMethod"),keys_jwk:a.default.keysJwk().required().renameTo("keysJwk"),redirect_uri:a.default.url().required().renameTo("redirectUri"),scope:a.default.string().required().min(1),state:a.default.string().required()},u={channel_id:a.default.channelId().required().renameTo("channelId"),channel_key:a.default.channelKey().required().renameTo("channelKey")},l=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),r(e,[{key:"fetch",value:function(){var e=this;return Promise.resolve().then(function(){return e.importHashParamsUsingSchema(u,o.default),e.importSearchParamsUsingSchema(c,o.default),e._setupOAuthRPInfo()})}},{key:"getOAuthParams",value:function(){var e=this.scopeStrToArray(this.get("scope")).join(" ");return{access_type:this.get("accessType"),client_id:this.get("clientId"),code_challenge:this.get("codeChallenge"),code_challenge_method:this.get("codeChallengeMethod"),keys_jwk:this.get("keysJwk"),scope:e,state:this.get("state")}}},{key:"validateApprovalData",value:function(e){var t=e.code,n=e.state;if(a.default.oauthCode().validate(t).error)throw o.default.toInvalidParameterError("code");if(n!==this.get("state"))throw o.default.toInvalidParameterError("state")}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r,o=i(n(0)),s=i(n(2)),a=i(n(124)),c=i(n(9)),u=Object.keys(n(66)),l={context:c.default.string().min(1),country:(r=c.default.string()).valid.apply(r,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}(u)),customizeSync:c.default.boolean(),service:c.default.string(),signin:c.default.string().empty("").renameTo("signinCode")};e.exports=a.default.extend({defaults:o.default.extend({},a.default.prototype.defaults,{action:void 0,customizeSync:!1,signinCode:void 0,tokenCode:!1}),initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._translator=t.translator,a.default.prototype.initialize.call(this,e,t)},fetch:function(){var e=this;return a.default.prototype.fetch.call(this).then(function(){e.importSearchParamsUsingSchema(l,s.default),e.get("service")&&e.set("serviceName","Firefox Sync")})},isSync:function(){return!0},wantsKeys:function(){return!0},isCustomizeSyncChecked:function(){return!!this.get("customizeSync")}})},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(4),o=n(3),s=n(47),a=n(48),c=n(26),u=n(116),l=r.Model.extend({initialize:function(e){this.sentryMetrics=(e=e||{}).sentryMetrics,this.window=e.window||window,this.fetch()},defaults:{uniqueUserId:null},fetch:function(){var e=c.factory("localStorage",this.window);this.populateFromStringifiedResumeToken(this.getSearchParam("resume"));var t=this.get("uniqueUserId");t||(t=e.get("uniqueUserId")?e.get("uniqueUserId"):u.v4()),this.set("uniqueUserId",t),e.set("uniqueUserId",t)},resumeTokenFields:["uniqueUserId"]});o.mixin(l,s,a),i.exports=l}(0,0,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e,t,i){var r=n(0),o=n(148),s=n(2),a=n(4),c=n(3),u=n(5),l=n(76),d=n(47),h=n(48),f=n(26),p=n(9),g=a.Model.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._oAuthClientId=e.oAuthClientId,this._oAuthClient=e.oAuthClient,this._profileClient=e.profileClient,this._fxaClient=e.fxaClient,this._marketingEmailClient=e.marketingEmailClient,this._metrics=e.metrics,this._assertion=e.assertion,this._notifier=e.notifier,this._storage=e.storage||f.factory(),this.sentryMetrics=e.sentryMetrics,this.set("uniqueUserId",e.uniqueUserId),this._cachedSignedInAccount=null,this.window=e.window||window,this.fetch()},defaults:{uniqueUserId:null},resumeTokenFields:["uniqueUserId"],resumeTokenSchema:{uniqueUserId:p.uuid()},fetch:function(){var e=this;return Promise.resolve().then(function(){e.populateFromStringifiedResumeToken(e.getSearchParam("resume"))})},logNumStoredAccounts:function(){var e=Object.keys(this._accounts()).length;this._metrics.logNumStoredAccounts(e)},_accounts:function(){return this._storage.get("accounts")||{}},_getAccount:function(e){return e&&this._accounts()[e]||null},_setSignedInAccountUid:function(e){this._storage.set("currentAccountUid",e),this._cachedSignedInAccount&&this._cachedSignedInAccount.get("uid")!==e&&(this._cachedSignedInAccount=null)},clearSignedInAccountUid:function(){this._storage.remove("currentAccountUid"),this._cachedSignedInAccount=null},_getSignedInAccountData:function(){return this._getAccount(this._storage.get("currentAccountUid"))},_persistAccount:function(e){var t=this.initAccount(e),n=this._accounts(),i=t.get("uid");i?(n[i]=t.toPersistentJSON(),this._storage.set("accounts",n)):this._metrics.logError(s.toError("ACCOUNT_HAS_NO_UID","persistAccount"))},initAccount:function(e){return e instanceof o?e:new o(e,{assertion:this._assertion,fxaClient:this._fxaClient,marketingEmailClient:this._marketingEmailClient,metrics:this._metrics,notifier:this._notifier,oAuthClient:this._oAuthClient,oAuthClientId:this._oAuthClientId,profileClient:this._profileClient,sentryMetrics:this.sentryMetrics})},isSyncAccount:function(e){return this.initAccount(e).isFromSync()},sessionStatus:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSignedInAccount();return t.sessionStatus().then(function(){return e.setAccount(t),t},function(n){throw s.is(n,"INVALID_TOKEN")&&!t.isDefault()&&e.setAccount(t),n})},getSignedInAccount:function(){return this._cachedSignedInAccount||(this._cachedSignedInAccount=this.initAccount(this._getSignedInAccountData())),this._cachedSignedInAccount},isSignedInAccount:function(e){var t=e.get("uid"),n=this.getSignedInAccount().get("uid");return!(!n||!t)&&t===n},isAnotherAccountSignedIn:function(e){return!this.getSignedInAccount().isDefault()&&!this.isSignedInAccount(e)},setSignedInAccountByUid:function(e){this._accounts()[e]&&this._setSignedInAccountUid(e)},getAccountByUid:function(e){var t=this._accounts()[e];return this.initAccount(t)},getAccountByEmail:function(e){var t=Object.keys(this._accounts()).reverse(),n=this._accounts(),i=r.find(t,function(t){return n[t].email===e});return this.initAccount(n[i])},getChooserAccount:function(){function e(e){return!!(e&&e.get("sessionToken")&&e.get("email"))}var t=this;if(this.has("signinCodeAccount"))return this.get("signinCodeAccount");var n=r.find(this._accounts(),function(n){var i=t.initAccount(n);return t.isSyncAccount(i)&&e(i)}),i=this.getSignedInAccount(),o=e(i)&&i,s={};return n?s=n:o&&(s=o),this.initAccount(s)},clearSignedInAccount:function(){var e=this.getSignedInAccount().get("uid");this.clearSignedInAccountUid(),this._notifier.triggerRemote(this._notifier.COMMANDS.SIGNED_OUT,{uid:e})},removeAllAccounts:function(){this.clearSignedInAccountUid(),this._storage.remove("accounts"),this.unset("signinCodeAccount")},removeAccount:function(e){var t=this.initAccount(e);this.isSignedInAccount(t)&&this.clearSignedInAccount();var n=this._accounts();delete n[t.get("uid")],this._storage.set("accounts",n)},deleteAccount:function(e,t){var n=this,i=this.initAccount(e);return i.destroy(t).then(function(){n.removeAccount(i),n._notifier.triggerAll(n._notifier.COMMANDS.DELETE,{uid:i.get("uid")})})},setSignedInAccount:function(e){var t=this,n=this.initAccount(e);return n.set("lastLogin",Date.now()),this.setAccount(n).then(function(e){return t._cachedSignedInAccount=e,t._setSignedInAccountUid(e.get("uid")),e})},setAccount:function(e){var t=this,n=this.initAccount(e);return n.fetch().then(function(){return t._persistAccount(n),n})},removeAccountsWithInvalidUid:function(){var e=this;return Promise.resolve().then(function(){var t=e._accounts();for(var n in t)n&&"undefined"!==n||(delete t[n],e._storage.set("accounts",t))})},signInAccount:function(e,t,n,i){var o=this;return e.signIn(t,n,i).then(function(){var t=o.getAccountByUid(e.get("uid"));return t.isDefault()||(t.set(r.omit(e.attributes,function(e){return void 0===e})),e=t),o._notifyOfAccountSignIn(e),o.setSignedInAccount(e)})},signUpAccount:function(e,t,n,i){var r=this;return e.signUp(t,n,i).then(function(){return r.setSignedInAccount(e)})},signOutAccount:function(e){var t=this;return e.signOut().then(function(n){return t.removeAccount(e),n},function(n){throw t.removeAccount(e),n})},completeAccountSignUp:function(e,t,n){var i=this,r=function(e){e.has("sessionToken")&&i._notifyOfAccountSignIn(e)};return e.verifySignUp(t,n).catch(function(t){throw l.created(t)&&r(e),t}).then(function(){return r(e),e})},changeAccountPassword:function(e,t,n,i){var r=this;return e.changePassword(t,n,i).then(function(){return r.setSignedInAccount(e)}).then(function(){var t=r._notifier,n=t.COMMANDS.CHANGE_PASSWORD,i=e.pick(Object.keys(t.SCHEMATA[n]));return i.verified=!!i.verified,t.triggerRemote(n,i),e})},_notifyOfAccountSignIn:function(e){var t=this._notifier,n=t.COMMANDS.SIGNED_IN;t.triggerRemote(n,e.pick(Object.keys(t.SCHEMATA[n])))},completeAccountPasswordReset:function(e,t,n,i,r,o){var s=this;return e.completePasswordReset(t,n,i,r,o).then(function(){return s._notifyOfAccountSignIn(e),s.setSignedInAccount(e)})},completeAccountPasswordResetWithRecoveryKey:function(e,t,n,i,r,o,s){var a=this;return e.resetPasswordWithRecoveryKey(n,t,i,r,o,s).then(function(){return a._notifyOfAccountSignIn(e),a.setSignedInAccount(e)})},destroyAccountClient:function(e,t){return t.get("clientType")===u.CLIENT_TYPE_DEVICE?this.destroyAccountDevice(e,t):t.get("clientType")===u.CLIENT_TYPE_OAUTH_APP?this.destroyAccountApp(e,t):t.get("clientType")===u.CLIENT_TYPE_WEB_SESSION?this.destroyAccountSession(e,t):void 0},fetchAccountDevices:function(e,t){return e.fetchDevices(t)},fetchAccountOAuthApps:function(e,t){return e.fetchOAuthApps(t)},fetchAccountSessions:function(e,t){return e.fetchSessions(t)},destroyAccountDevice:function(e,t){var n=this;return e.destroyDevice(t).then(function(){n.isSignedInAccount(e)&&t.get("isCurrentDevice")&&n.removeAccount(e)})},destroyAccountSession:function(e,t){var n=this;return e.destroySession(t).then(function(){n.isSignedInAccount(e)&&t.get("isCurrentSession")&&n.clearSignedInAccount()})},destroyAccountApp:function(e,t){return e.destroyOAuthApp(t)},checkAccountUidExists:function(e){var t=this;return e.checkUidExists().then(function(n){return n||t.removeAccount(e),n})},checkAccountEmailExists:function(e){var t=this;return e.checkEmailExists().then(function(n){return n||t.removeAccount(e),n})},rejectAccountUnblockCode:function(e,t){return e.rejectUnblockCode(t)},shouldSetSignedInAccountFromBrowser:function(e){return e===u.SYNC_SERVICE||this.getSignedInAccount().isDefault()},setSignedInAccountFromBrowserAccountData:function(e){var t=this;return Promise.resolve().then(function(){if(e){var n=t.initAccount(r.pick(e,"email","sessionToken","uid","verified"));return n.set("sessionTokenContext",u.SESSION_TOKEN_USED_FOR_SYNC),t.setSignedInAccount(n)}})},setSigninCodeAccount:function(e){var t=this;return Promise.resolve().then(function(){var n=t.initAccount(r.pick(e,"email"));t.set("signinCodeAccount",n)})}});c.mixin(g,d,h),i.exports=g}(0,0,e))||(e.exports=i)}]);
//# sourceMappingURL=app.bundle.js.map{4ûX%¬9ûì      \~¾Ú\~¾Ú@Äå\€:   k    a,:https://accounts-static.cdn.mozilla.net/bundle-2ac26f7c65960eac94632450b31e7db40fdeb026/app.bundle.en.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAgAAgAAAAAAAAAAAAAAAAAAAAEAMQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAU6MIIFNjCCBB6gAwIBAgIQDKnGQ2G/ySp5sd2c+55I7DANBgkqhkiG9w0BAQsFADBNMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMScwJQYDVQQDEx5EaWdpQ2VydCBTSEEyIFNlY3VyZSBTZXJ2ZXIgQ0EwHhcNMTYxMTAzMDAwMDAwWhcNMjAwMjAxMTIwMDAwWjB0MQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEcMBoGA1UEChMTTW96aWxsYSBDb3Jwb3JhdGlvbjEaMBgGA1UEAwwRKi5jZG4ubW96aWxsYS5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDNIU14XnpwQVunAhMzVS+lwRxj5K81HPtSPp3wL5Zx/hyRN/GF45H2eGFBKfvUEf7jis6tm/I8SN/7aN44p0AerR53pzA2Ut8NCjpxbMuJF6XvY2yv/g/tu3ZZjBIKn/IgR/Oyd4FSOdpDjGUM8W12RSaeiQUHC1DuMYKwnPouDijzodMXPDa7O91sahW87t6lKnS7E9CgNdku5lxFTOe480Ic9yd+clJNZZ6dNtnwYfrKaqxyZQAyBD0SNsk4WepelD+VBojDjN3Mc7rMwB67TDnq1MYiQI/lDf8h9Uzpte1iH/PQxX0pMfLxQ7bcjx7LoL6bId3N93a/2+sD3RpLAgMBAAGjggHpMIIB5TAfBgNVHSMEGDAWgBQPgGEcgjFh1S8o541GOLQs4cbZ4jAdBgNVHQ4EFgQUM8CY0nNQNDM7/3c5KcxAZpQKdD0wLQYDVR0RBCYwJIIRKi5jZG4ubW96aWxsYS5uZXSCD2Nkbi5tb3ppbGxhLm5ldDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMGsGA1UdHwRkMGIwL6AtoCuGKWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9zc2NhLXNoYTItZzUuY3JsMC+gLaArhilodHRwOi8vY3JsNC5kaWdpY2VydC5jb20vc3NjYS1zaGEyLWc1LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG/WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BTMAgGBmeBDAECAjB8BggrBgEFBQcBAQRwMG4wJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBGBggrBgEFBQcwAoY6aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0U0hBMlNlY3VyZVNlcnZlckNBLmNydDAMBgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCOU7nHjEm9JLhlTUJk1LFR9AQVVXWHVaL4yrlEy2tDds1vs2z3NnVtXXg5BgH8uDstKWAk9IbAgVgIWCwAMqO2KyjXqIU9JMVw9wNUNY6dyI3YDWB9Nwl9YAz3lxTaoJPSqH34z9YnhpztRoZ8m0Z+iZAveNjC2NMQbPIL/+O81kRKuWADXCFRSeo0XYsHnguBTu5Nlgi6X6o16u/Ba7pI1gFN2kLXfkRugMGrIpNVjfAn/dcR5pdKpXE+KzCqt3nxRhfEXTvkGazSBJoZLlv7t7ykefzurXpAW0I9sYSZtHJK3MxZNxviZzQOEEosq7Q+2aybYrPqSfBUVp12dF+rwC8AAwAAAAABAQAAAAAAAARQMjU2AAAAEFJTQS1QS0NTMS1TSEE1MTIBlZ+xZWUXSH+rm9iRO+Uxl650zaXNL0c/lvXwt//2LGgAAAADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAFOjCCBTYwggQeoAMCAQICEAypxkNhv8kqebHdnPueSOwwDQYJKoZIhvcNAQELBQAwTTELMAkGA1UEBhMCVVMxFTATBgNVBAoTDERpZ2lDZXJ0IEluYzEnMCUGA1UEAxMeRGlnaUNlcnQgU0hBMiBTZWN1cmUgU2VydmVyIENBMB4XDTE2MTEwMzAwMDAwMFoXDTIwMDIwMTEyMDAwMFowdDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxHDAaBgNVBAoTE01vemlsbGEgQ29ycG9yYXRpb24xGjAYBgNVBAMMESouY2RuLm1vemlsbGEubmV0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzSFNeF56cEFbpwITM1UvpcEcY+SvNRz7Uj6d8C+Wcf4ckTfxheOR9nhhQSn71BH+44rOrZvyPEjf+2jeOKdAHq0ed6cwNlLfDQo6cWzLiRel72Nsr/4P7bt2WYwSCp/yIEfzsneBUjnaQ4xlDPFtdkUmnokFBwtQ7jGCsJz6Lg4o86HTFzw2uzvdbGoVvO7epSp0uxPQoDXZLuZcRUznuPNCHPcnfnJSTWWenTbZ8GH6ymqscmUAMgQ9EjbJOFnqXpQ/lQaIw4zdzHO6zMAeu0w56tTGIkCP5Q3/IfVM6bXtYh/z0MV9KTHy8UO23I8ey6C+myHdzfd2v9vrA90aSwIDAQABo4IB6TCCAeUwHwYDVR0jBBgwFoAUD4BhHIIxYdUvKOeNRji0LOHG2eIwHQYDVR0OBBYEFDPAmNJzUDQzO/93OSnMQGaUCnQ9MC0GA1UdEQQmMCSCESouY2RuLm1vemlsbGEubmV0gg9jZG4ubW96aWxsYS5uZXQwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBrBgNVHR8EZDBiMC+gLaArhilodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vc3NjYS1zaGEyLWc1LmNybDAvoC2gK4YpaHR0cDovL2NybDQuZGlnaWNlcnQuY29tL3NzY2Etc2hhMi1nNS5jcmwwTAYDVR0gBEUwQzA3BglghkgBhv1sAQEwKjAoBggrBgEFBQcCARYcaHR0cHM6Ly93d3cuZGlnaWNlcnQuY29tL0NQUzAIBgZngQwBAgIwfAYIKwYBBQUHAQEEcDBuMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wRgYIKwYBBQUHMAKGOmh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFNIQTJTZWN1cmVTZXJ2ZXJDQS5jcnQwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQsFAAOCAQEAjlO5x4xJvSS4ZU1CZNSxUfQEFVV1h1Wi+Mq5RMtrQ3bNb7Ns9zZ1bV14OQYB/Lg7LSlgJPSGwIFYCFgsADKjtiso16iFPSTFcPcDVDWOnciN2A1gfTcJfWAM95cU2qCT0qh9+M/WJ4ac7UaGfJtGfomQL3jYwtjTEGzyC//jvNZESrlgA1whUUnqNF2LB54LgU7uTZYIul+qNervwWu6SNYBTdpC135EboDBqyKTVY3wJ/3XEeaXSqVxPiswqrd58UYXxF075Bms0gSaGS5b+7e8pHn87q16QFtCPbGEmbRyStzMWTcb4mc0DhBKLKu0Ptmsm2Kz6knwVFaddnRfq2YKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAABJgwggSUMIIDfKADAgECAhAB/aPrbsp1yIhDi3JLz7yRMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxGTAXBgNVBAsTEHd3dy5kaWdpY2VydC5jb20xIDAeBgNVBAMTF0RpZ2lDZXJ0IEdsb2JhbCBSb290IENBMB4XDTEzMDMwODEyMDAwMFoXDTIzMDMwODEyMDAwMFowTTELMAkGA1UEBhMCVVMxFTATBgNVBAoTDERpZ2lDZXJ0IEluYzEnMCUGA1UEAxMeRGlnaUNlcnQgU0hBMiBTZWN1cmUgU2VydmVyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3K5YkE3BxDAVkDVbbjyCFfUsXL3j2/9xQ/pkJYDU7hiiTfBm0ApzbhGYNhdkrzed/fpBhK/Hr4z+GnNNzzOXkKKWh1ODK7mmdUgtHVY3e9oxMhrXrKsG9KpdS7dHRt0qk8OQLnmAgO8TBGoUO7Wbkr7CB2VO/Nr8/3qu3Fx+VTEM6DkHpNe+L9MLatKx31/+V3RTOzWA3a6ORJiznw7T2uDX9Gspq0SnS1iEbZJLgcPac4sSl0iQBEV1Gt03MZeS6M1UDTvkwT85Xi6481x+EI6GQQCNRWZHsKFlzqCqKQlO85fr6C6rD3KnMA76x/T9FHfDpFsoV8Kz+YL9t0VYmwIDAQABo4IBWjCCAVYwEgYDVR0TAQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwNAYIKwYBBQUHAQEEKDAmMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wewYDVR0fBHQwcjA3oDWgM4YxaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0R2xvYmFsUm9vdENBLmNybDA3oDWgM4YxaHR0cDovL2NybDQuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0R2xvYmFsUm9vdENBLmNybDA9BgNVHSAENjA0MDIGBFUdIAAwKjAoBggrBgEFBQcCARYcaHR0cHM6Ly93d3cuZGlnaWNlcnQuY29tL0NQUzAdBgNVHQ4EFgQUD4BhHIIxYdUvKOeNRji0LOHG2eIwHwYDVR0jBBgwFoAUA95QNVbRTLtm8KPiGxvDl7I90VUwDQYJKoZIhvcNAQELBQADggEBACM+30vSMUKltn5CXBpEzGnRaLRdS+AEIWxL4m3MseCXj6ZTCc2qKmXlOU8eg6VuXJiiJCbm+6Htk8cuAsZNSr+wQt942rOo+W3/IYVTNmBMds7sONzWUYDwxdbl1E0nZKubxz5x+0iXuDNtyRMH7paiGxgV9lxMQO2zwuz/ccHjR//UuQC0N0LaIMnqboruFAaufaJZmIioG28t9PLJFF8mzyyNfu03wKnVObmCvxkM6jSvACFo+K1z4sky2jglC1XTmh3waIbtLkE073ylUB2/OvnTwQgM5u0eilgl5Lh3rS1u9VLdtHSPq0kunTuTNCgfeM6U6se908ltHN5cMvNmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAOzMIIDrzCCApegAwIBAgIQCDvgVpBCRrGhdWrJWZHHSjANBgkqhkiG9w0BAQUFADBhMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBDQTAeFw0wNjExMTAwMDAwMDBaFw0zMTExMTAwMDAwMDBaMGExCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxGTAXBgNVBAsTEHd3dy5kaWdpY2VydC5jb20xIDAeBgNVBAMTF0RpZ2lDZXJ0IEdsb2JhbCBSb290IENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4jvhEXLeqKTTo1eqUKKPC3eQyaKl7hLOllsBCSDMAZOnTjC3U/dDxGkAV53ijSLdhwZAAIEJzs4bg7/fzTtxRuLWZscFs3YnFo97nh6Vfe63SKMI2tavegw5BmV/Sl0fvBf4q77uKNd0f3p4mVmFaG5cIzJLv07A6Fpt43C/dxC//AH2hdmoRBBYMql1GNXRor5H4idq9Joz+EkIYIvUX7Q6hL+hqkpMfT7PT19sdl6gSzeRntwi5m3OFBqOasv+zbMUZBfHWymeMr/y7vrTC0LUq7dBMtoM1O/4gdW7jVg/tRvoSSiicNoxBN33shbyTApOB6jtSj1etX+jkMOvJwIDAQABo2MwYTAOBgNVHQ8BAf8EBAMCAYYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUA95QNVbRTLtm8KPiGxvDl7I90VUwHwYDVR0jBBgwFoAUA95QNVbRTLtm8KPiGxvDl7I90VUwDQYJKoZIhvcNAQEFBQADggEBAMucN6pIExIK+t1EnE9SsPTfrgT1eXkIoyQY/EsrhMAtudXH/vTBH1jLuG2cenTnmCmrEbXjcKChzUyImZOMkXDiqw8cvpOp/2PV5Adg06O/nVsJ8dWO41P0jmP6P6fbtGbfYmbW0W5BjfIttep3Sp+dWOIrWcBAI+0tKIJFPnlUkiaY4IBIqDfv8NZ5YBberOgOzW6sRBc4L0na4UU+Krk2U886UAb3LujEV0lsYSEY1QSteDwsOoBrp+uvFRTp2InBuThs4pFsiv9kuXclVzDAGySj4dzp30d8tbQkCAUw7C29C79Fv1C5qfPrmAESrciIxpg0X40KPMbp1ZWVbd4A request-method GET request-Accept-Encoding gzip, deflate, br request-Origin https://accounts.firefox.com response-head HTTP/2.0 200 OK
content-type: application/javascript
content-length: 554867
date: Tue, 05 Mar 2019 18:02:35 GMT
access-control-allow-origin: *
access-control-allow-methods: HEAD, GET
last-modified: Tue, 05 Mar 2019 17:54:51 GMT
etag: "dfe957b626d272ac02bc191d35306865"
cache-control: public, max-age=86400
x-amz-version-id: 1HrFsCy8Ml2l8Wk5DKCgzDq1_werskFY
accept-ranges: bytes
server: AmazonS3
vary: Accept-Encoding,Origin
age: 1239
x-cache: Hit from cloudfront
via: 1.1 2049bafbdd2d1f88e039f5995c93088a.cloudfront.net (CloudFront)
x-amz-cf-id: SJ-Q9Xz57dvvPcECnRklzwHZL0m1lsN4D2-ayC6bBpmNTMa8eK7-ng==
X-Firefox-Spdy: h2
 original-response-headers content-type: application/javascript
content-length: 554867
date: Tue, 05 Mar 2019 18:02:35 GMT
access-control-allow-origin: *
access-control-allow-methods: HEAD, GET
last-modified: Tue, 05 Mar 2019 17:54:51 GMT
etag: "dfe957b626d272ac02bc191d35306865"
cache-control: public, max-age=86400
x-amz-version-id: 1HrFsCy8Ml2l8Wk5DKCgzDq1_werskFY
accept-ranges: bytes
server: AmazonS3
vary: Accept-Encoding,Origin
age: 1239
x-cache: Hit from cloudfront
via: 1.1 2049bafbdd2d1f88e039f5995c93088a.cloudfront.net (CloudFront)
x-amz-cf-id: SJ-Q9Xz57dvvPcECnRklzwHZL0m1lsN4D2-ayC6bBpmNTMa8eK7-ng==
X-Firefox-Spdy: h2
 uncompressed-len 0 net-response-time-onstart 137 net-response-time-onstop 188  ws