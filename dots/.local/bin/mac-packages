#!/usr/bin/env bash

brew tap crisidev/homebrew-chunkwm

function addPackage() {
    package="$1"
    opts="$2"
    if [[ "$3" -gt 0 ]]; then
        cask="/usr/local/bin/brew cask"
    fi

    eval "${cask:-/usr/local/bin/brew} info $package" | grep -e 'Not installed' &>/dev/null
    if [[ $? -eq 0 ]]; then
        echo "$package should be added"
        eval "${cask:-/usr/local/bin/brew} install $package $opts"
    else
        echo "$package is already installed. Skipping..."
    fi
}

addPackage "emacs" "--with-cocoa"
addPackage "chunkwm" 
addPackage "koekeishiya/formulae/skhd"
addPackage "httpd" 
addPackage "nvm"
addPackage "yarn" "--without-node"
addPackage "htop"
addPackage "gnu-sed"
addPackage "neofetch"
addPackage "zsh"
addPackage "w3m"
addPackage "stow"
addPackage "php"
addPackage "php@7.0"
addPackage "php@7.1"
addPackage "php@5.6"
addPackage "composer"
addPackage "percona-server"

pecl install xdebug
pecl install imagick

# casks
addPackage "iterm2" "" 1
addPackage "google-chrome" "" 1
addPackage "homebrew/cask-fonts/font-envy-code-r" "" 1
addPackage "sequel-pro" "" 1
addPackage "spotify" "" 1
addPackage "1password" "" 1
addPackage "slack" "" 1
addPackage "cacher" "" 1

brew services start chunkwm
brew services start skhd
brew services start emacs
brew services start httpd
brew services start percona-server

