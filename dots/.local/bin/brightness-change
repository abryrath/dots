#!/usr/bin/env bash
if [[ "$1" == "up" ]]; then
    up=1
else
    up=0
fi

max_lvl=$(cat /sys/class/backlight/intel_backlight/max_brightness)
current_lvl=$(cat /sys/class/backlight/intel_backlight/brightness)

steps=10
delta=$(($max_lvl/steps))

if [[ $up -eq 1 ]]; then
    if [[ $current_lvl -gt $(($max_lvl-$delta)) ]]; then
        new_lvl=${max_lvl}
    else
        new_lvl=$(($current_lvl+$delta))
    fi
else
    if [[ $current_lvl -lt $delta ]]; then
        new_lvl=0
    else
        new_lvl=$(($current_lvl-$delta))
    fi
fi

cmd="echo "${new_lvl}" > /sys/class/backlight/intel_backlight/brightness"
echo "$cmd"
sudo su -c "$cmd"
if [[ current_lvl -eq 7500 ]]; then
    new_lvl=2500
else
    new_lvl=7500
fi

