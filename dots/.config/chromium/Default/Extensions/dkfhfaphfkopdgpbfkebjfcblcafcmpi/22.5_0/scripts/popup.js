function _1f92a1b354d2d0ddf38f2b535a4ccbfe4075dac3(){_ca052fd0c58dff651677328502611dd4b9f96373("CRX","Popup-Menu-Invoke");_b6afb5d8174c3fdc86a2854292689a85e768bba9("Popup-Menu-Invoke",{Client:"CRX"});_b6afb5d8174c3fdc86a2854292689a85e768bba9("CRX-Rebuild-Popup-Menu-Invoke",{Client:"CRX"});$(".popupButton").on("click",function(){var a=$(this).data("message"),b=$(this).data("event"),c={},d=null;c[a]=!0;if("Send-To-Phone"==b||"Compose-New"==b)d="link","Send-To-Phone"==b&&(d=$(this).data("type"));_b6afb5d8174c3fdc86a2854292689a85e768bba9("Popup-Menu-Click-Option",
{"Content-Type":d,Client:"CRX",Action:b});_ca052fd0c58dff651677328502611dd4b9f96373("CRX","Popup-Menu-Click-Option",b+"-link");"setReminder"==a?_bf42e856af6b7e5a0821d459fbbb45d05081df13():"openPhoneLive"==a?_2cfda79baa4b880b7ef3f8495d8f2797b41ea2b7():"openPhoneDialer"==a?_2cfda79baa4b880b7ef3f8495d8f2797b41ea2b7({view:"dialer"}):(chrome.runtime.sendMessage(c,function(a){console.log(a)}),window.close())});$(".phone-tab-shortcut").on("click",function(a){a.stopPropagation();a=$(this).attr("data-view");
var b=$(this).closest(".popupButton").attr("data-event");_b6afb5d8174c3fdc86a2854292689a85e768bba9("Popup-Menu-Click-Option",{"Content-Type":"link",Client:"CRX",Action:b});_ca052fd0c58dff651677328502611dd4b9f96373("CRX","Popup-Menu-Click-Option",b+"-link");_ca052fd0c58dff651677328502611dd4b9f96373("CRX","Popup-Menu-Click-Live-Phone-View-Shortcut-Option",a);_2cfda79baa4b880b7ef3f8495d8f2797b41ea2b7({view:a})});$(".nav-btn").on("click",function(a){a.preventDefault();a.stopPropagation();var b=$(this).attr("action");
if("settings"==b){var c=".popupContainer, .settings-btn, .notif-toggle";var d=".settings-iframe";$(d).attr("src");$(d).attr("src","").attr("src","../html/options.html")}else"home"==b&&(c=".settings-iframe",d=".popupContainer, .settings-btn, .notif-toggle",_7f6de654226f70f36e3efe0223fd51a2010a057c());$(c).fadeOut(150,function(){$(d).fadeIn(250);$(".nav-buttons").attr("data-inview",b)})});_267e9463f856dafe244230b54a788a2e784e4f7e({strings_elem:$(".popup-option-name, .mighty-tooltip"),additional_callback:function(a){$(a).hasClass("new-feature")&&
_6036de535d28881726b296ca8cb51c4a16a9309c({popup_option:a})}});$("body").attr("lang",navigator.language);_4ba2aa59eb7e6532fa6b0c0674b9910eb66a4211();_4d434eaa8892a101fd61b92e5067bb149056800b();_7f6de654226f70f36e3efe0223fd51a2010a057c(!0);_269565642dd2d8f42a27988af07a905ba65e893b();_c9243670c5c277c03ff9933150f3b35852166765();_cfdb1abfc958ec7f0f90e0861f6ed5620ecb0cb0();_0017a8db9d4cb1bd3e5b4f9e82091a4369defa25()}
function _d83d74d68b0c10678990de3c664905c899e229e0(){var a=!1;window.localStorage.hasOwnProperty("current_phone_app_version")&&6.85<=parseFloat(window.localStorage.current_phone_app_version)&&(a=!0);return a}function _0017a8db9d4cb1bd3e5b4f9e82091a4369defa25(){chrome.runtime.sendMessage({check_user_pro_status:!0},function(a){"object"==typeof a&&a.hasOwnProperty("user_is_pro")&&!1===a.user_is_pro&&$("#goPro").show()})}
function _4d434eaa8892a101fd61b92e5067bb149056800b(){if(_d83d74d68b0c10678990de3c664905c899e229e0()){var a=$("#livePhoneView");$(a).show()}}function _4ba2aa59eb7e6532fa6b0c0674b9910eb66a4211(){"user-in-exp"==$.jStorage.get("mt_reminders_experiment","exp-flag-not-set")&&$("#reminderButtons").show()}
function _2cfda79baa4b880b7ef3f8495d8f2797b41ea2b7(a){var b="notifs";$(".popupContainer, .settings-btn, .notif-toggle").hide();$("body").addClass("loading-pnlv");"undefined"!=typeof a&&a.hasOwnProperty("view")&&(b=a.view);var c=$('<iframe class="phone-live-view-iframe" src="https://mightytext.net/'+currentProductionPath+"/#mode=live-phone-view&client=crx-popup&view="+b+'"></iframe>').appendTo("body");var d=setTimeout(function(){_b6afb5d8174c3fdc86a2854292689a85e768bba9("new-pnlv-wa-iframe-timeout-executed");
_fba7be33f4291c98360af4bd419fa51226291b30({iframe:c,app:"pnlv",refresh_callback:function(){var a={};-1<$(c).attr("src").indexOf("dialer")&&(a={view:"dialer"});_2cfda79baa4b880b7ef3f8495d8f2797b41ea2b7(a)}});$("body").removeClass("loading-pnlv")},1E4);window.addEventListener("message",function(a){_87f5c1aa961dea680cc92ebfce54a195ed252b29(a,d)});"notifs"==b&&_d78286dcd604b28c3ecf9d714c5ed1a3f0af3b8c()}
function _fba7be33f4291c98360af4bd419fa51226291b30(a){var b=a.iframe;$(b).attr("src");var c='<div class="load-error-container '+a.app+'">';c=c+'<div class="vertical-align-helper"></div><div class="load-error-inner"><i id="load-error-icon" class="fa fa-fw fa-times-circle"></i>'+_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"unable_to_load_mt_iframe"});c+='<div class="refresh-btn-wrapper"><button id="refresh-iframe-btn" class="mighty-btn mighty-holo">'+_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"retry"})+
"</button></div>";var d=$(c+"</div></div>").insertAfter(b);$(b).remove();b=$(d).find("#refresh-iframe-btn");$(b).on("click",function(){_b6afb5d8174c3fdc86a2854292689a85e768bba9("new-pnlv-wa-iframe-timeout-retry-load");$(d).fadeOut(function(){$(this).remove();a.refresh_callback()})})}
function _87f5c1aa961dea680cc92ebfce54a195ed252b29(a,b){if("https://mightytext.net"==a.origin){var c=a.data;c.hasOwnProperty("check_for_existing_pnlv_popout")?_c85df22ff6163ebdfc2c78620e927b244399863b({focus_existing:!0,popout_if_none_found:!0,pnlv_popout_url_sub_str:c.pnlv_popout_url_substring,viewOnLoad:c.view}):c.hasOwnProperty("expand_window")?1!=c.expand_window?$("body").removeClass("send_file_to_phone_expand"):$("body").addClass("send_file_to_phone_expand"):c.hasOwnProperty("live_phone_view_load_success")?
(clearTimeout(b),$(".phone-live-view-iframe").show(),$("body").removeClass("loading-pnlv")):console.error(new Date+" Unrecognized message sent from mt.net",c)}else console.error("unrecognized message origin: ",a.origin)}
function _c85df22ff6163ebdfc2c78620e927b244399863b(a){var b=a.pnlv_popout_url_sub_str,c=b;a.hasOwnProperty("viewOnLoad")&&(c+="&view="+a.viewOnLoad);chrome.tabs.query({windowType:"popup"},function(d){0<d.length?$(d).each(function(d,f){f.hasOwnProperty("url")?-1<f.url.indexOf(b)&&a.hasOwnProperty("focus_existing")?f.hasOwnProperty("windowId")&&chrome.windows.update(f.windowId,{focused:!0}):a.hasOwnProperty("popout_if_none_found")&&_a975362bc5f90dc9c196102783c1f5eab282e5b0({url:c}):console.error(new Date+
' No "url" property found in this tab object')}):a.hasOwnProperty("popout_if_none_found")&&_a975362bc5f90dc9c196102783c1f5eab282e5b0({url:c})})}function _a975362bc5f90dc9c196102783c1f5eab282e5b0(a){if(a.hasOwnProperty("url")){var b=a.url,c=screen.width-357,d=39;-1<navigator.appVersion.indexOf("Mac")&&(d=22);d=600+d;console.info("trying to create a window, options: ",a);chrome.windows.create({width:350,height:d,focused:!0,left:c,type:"popup",url:b+"&client=crx-popout"})}}
function _d78286dcd604b28c3ecf9d714c5ed1a3f0af3b8c(){chrome.runtime.sendMessage({user_loaded_phone_notif_live_view:!0})}
function _bf42e856af6b7e5a0821d459fbbb45d05081df13(){$(".popupContainer, .settings-btn, .notif-toggle").fadeOut(50,function(){$("body").addClass("loading-create-reminders")});var a=setTimeout(function(){$("body").removeClass("loading-create-reminders");_fba7be33f4291c98360af4bd419fa51226291b30({iframe:$(".reminders-iframe"),app:"create-reminder",refresh_callback:function(){_bf42e856af6b7e5a0821d459fbbb45d05081df13()}})},1E4);$('<iframe class="reminders-iframe" src=""></iframe>').appendTo("body").attr("src",
"").attr("src",remindersAppUrl+"#mode=create").on("load",function(){$("body").removeClass("loading-create-reminders");clearTimeout(a);$(this).fadeIn(50);window.addEventListener("message",_9dc2602fb03f7d49f5ba327f67b96549a4c7823f)})}
function _9dc2602fb03f7d49f5ba327f67b96549a4c7823f(a){"closeIframe"==a.data?window.close():void 0!=a.data.action?"resizeIframe"==a.data.action?(a=a.data.dimensions,$(".reminders-iframe").css(a)):console.error("unrecognized message JSON: "+a.data):console.error("unrecognized message: "+a.data)}function _20ae049cf82c4a0785baf8c9755762f66656d11d(){chrome.runtime.sendMessage({requestPhoneStatusNotCollapsed:!0,high_priority_gcm:!0},function(a){console.log(a)})}
chrome.runtime.onMessage.addListener(function(a,b,c){if(a.phoneStatus){var d=a.phoneStatus;a=d.battery_level;b=d.battery_is_charging;d=String(d.ts_phone_utc/1E3);console.log("got a battery status");var e="";"false"!=b&&(e='<div id="chargingIcon"><span class="font-awesome-container"><i class="fa fa-bolt"></i></span></div>');_01c74cddd22e92ed180b881b51a8adbf8884e479(a,e,d);c({popup_received_phone_status:!0})}else a.activeTabInfo&&_abbb39f08e2e4b90838a5979e64e70d58b1fc5be({url:a.activeTabInfo.url})});
function _c9243670c5c277c03ff9933150f3b35852166765(){1>$("div.bat-wrap-holder").length&&$('<div class="bat-wrap-holder"><div id="batstatInitial" class="newbatterywrap mighty-tooltip" tooltip-content="'+_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"phone_bat_stat"})+'"></div></div>').prependTo("#popup-footer");var a=$.jStorage.get("latest_phone_status");if(void 0!=a){var b="";"false"!=a.battery_is_charging&&(b='<div id="chargingIcon"><span class="font-awesome-container"><i class="fa fa-bolt"></i></span></div>');
_01c74cddd22e92ed180b881b51a8adbf8884e479(a.battery_level,b,"")}_20ae049cf82c4a0785baf8c9755762f66656d11d()}
function _01c74cddd22e92ed180b881b51a8adbf8884e479(a,b,c){c=Math.round(a);var d='<div class="baticon"><span class="font-awesome-container"><i class="fa fa-mobile"></i></span></div><div class="mainCRXBattery"><div class="batwrap"><div class="batshell"><span class="batpercent">'+c+'%</span><div class="batbar" style="width:'+a+'%"></div></div><div class="batnub"></div></div></div>     '+b,e=$(".baticon");console.log({object:e,length:e.length});1>e.length?$(".newbatterywrap").empty().append(d).hide().fadeIn(150).each(function(){console.log("batstat appended");
_cfa8879d87b2cf7a98e7566cd4a9928913062f25(a)}):(d=$("#chargingIcon"),$(".batpercent").text(c+"%"),$(".batbar").css("width",a+"%"),_cfa8879d87b2cf7a98e7566cd4a9928913062f25(a),0<b.length?1>d.length&&$(".newbatterywrap").append(b):$(d).remove())}
function _cfa8879d87b2cf7a98e7566cd4a9928913062f25(a){100<=a?($(".batbar").css("background-color","#67b422"),$(".batnub").css("background-color","#67b422")):60<=a?$(".batbar").css("background-color","#67b422"):20<=a&&59>=a?($(".batbar").css("background-color","#ffe400"),$(".batpercent").addClass("legible")):19>=a&&$(".batbar").css("background-color","#f02828")}
function _2b5e0072e3828ec52a99f2ff90e8087d0d9b5a7e(a){var b="",c="",d="";"google.com/maps"==a||"google.co.uk/maps"==a?(b="map-marker.png",c=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"open_map_on_phone"}),d="google-maps"):"youtube.com/watch"==a?(b="youtube_play.png",c=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"play_vid_on_phone"}),d="youtube"):"yelp.com/biz"==a&&(b="yelp_icon.png",c=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"open_review_on_phone"}),d="yelp");$("[data-message='pushThisPageToPhone'").find("img").attr("src",
"../img/web-to-phone/"+b);$("[data-message='pushThisPageToPhone'").find("span").text(c);$("[data-message='pushThisPageToPhone'").attr("data-type",d)}
function _7f6de654226f70f36e3efe0223fd51a2010a057c(a){var b=$(".notif-toggle");_e2b71b520df309754b06f0b268cf54ccfd5e0e7e(b,window.localStorage.global_notifications);if(a)$(b).on("click",function(){var a=$(this).attr("value");_b6afb5d8174c3fdc86a2854292689a85e768bba9("user-changed-crx-setting",{crx_setting_name:"global_notifications",crx_setting_value_set:a,Client:"CRX"});_e2b71b520df309754b06f0b268cf54ccfd5e0e7e(this,a,!0);chrome.runtime.sendMessage({setProperBrowserActionIcon:!0},function(a){console.log(a)})})}
function _e2b71b520df309754b06f0b268cf54ccfd5e0e7e(a,b,c){var d="notifications_active";if("1"==b){d="notifications_off";var e="enabled";var f="disabled";var g="0"}else"0"==b&&(e="disabled",f="enabled",g="1");c?(console.info(g),$(a).removeClass(e).addClass(f).attr("value",g),window.localStorage.global_notifications=g,_55c952feb8d77302706e2a4335c4c31fdc1841c1(g)):($(a).removeClass(f).addClass(e).attr("value",b),d="0"==b?"notifications_off":"notifications_active");$(a).text(d)}
function _55c952feb8d77302706e2a4335c4c31fdc1841c1(a){if("0"==a){a="off";var b="../img/notifications/global_notifications_off.png";confirmNotifTitle=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"global_notifs_off_confirm"})}else"1"==a&&(a="on",b="../img/notifications/96x96-global-notifs-on.png",confirmNotifTitle=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"global_notifs_on_confirm"}));var c={type:"basic",priority:0,message:""},d={title:confirmNotifTitle,iconUrl:b};chrome.notifications.update("user-incoming-message-notif-setting-toggle",
d,function(a){a||($.extend(c,d),chrome.notifications.create("user-incoming-message-notif-setting-toggle",c,function(a){_d6b9fcb67a09bd160cbd5e5ba69e7eae5d02c6a7({notif_id:a,auto_dismiss:!1,notif_sound:!1})}))})}function _cfdb1abfc958ec7f0f90e0861f6ed5620ecb0cb0(){$(".mighty-tooltip").each(function(a,b){var c=$(b).attr("tooltip-content");$(b).tooltip("destroy").tooltip({trigger:"hover",title:c,placement:"top",delay:{show:150,hide:100}})}).on("click",function(){$(this).tooltip("hide")})}
function _3391455728f4a6032bde850460d0e85e906a0e6c(){$(".popup-option-name").each(function(){var a=$(this).attr("local-key");a=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:a});$(this).html(a);$(this).hasClass("new-feature")&&_6036de535d28881726b296ca8cb51c4a16a9309c({popup_option:this})});$(".mighty-tooltip").each(function(){var a=$(this).attr("local-key");a=_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:a});$(this).attr("tooltip-content",a)})}
function _6036de535d28881726b296ca8cb51c4a16a9309c(a){if("undefined"!=typeof a&&a.hasOwnProperty("popup_option")){var b=' <sup class="new-badge">'+_17b88bbdae4990e1a40e4c9175cb0cb5f572c185({key:"new_feature_badge"})+"!</sup>";$(a.popup_option).append(b)}}$(document).on("ready",function(){setTimeout(function(){_1f92a1b354d2d0ddf38f2b535a4ccbfe4075dac3()},0)});
function _e612175f94fb7fa92ab61e2288ecdd611972cf92(){$(document).on("keydown",function(a){if(36<a.keyCode<41){var b=$(".popupButton:visible");b.get(0);var c=0;$(b).each(function(a,b){if($(b).is(":focus"))return c=a,!1});if(39==a.keyCode||40==a.keyCode)newBtnIndex=c+1;if(38==a.keyCode||37==a.keyCode)newBtnIndex=c-1;0>newBtnIndex?newBtnIndex=b.length-1:newBtnIndex==b.length&&(newBtnIndex=0);b.get(newBtnIndex).focus()}})};