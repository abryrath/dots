function _3e77cfbc326fc093fd009fb72b95e5decb151ef8(b,c,e,d){var f=null;setTimeout(function(b){"string"==typeof c?firebase.auth().signInWithCustomToken(c).then(function(){window.frdSocket=firebase.database();_5276b5584e6156b37336e226a43b1ad6e8a70810("FRD socket opened.");frdSocket.ref(".info/connected").on("value",function(b){!0===b.val()?_5276b5584e6156b37336e226a43b1ad6e8a70810("FRD socket changed state: connected"):_5276b5584e6156b37336e226a43b1ad6e8a70810("FRD socket changed state: disconnected")});
_5276b5584e6156b37336e226a43b1ad6e8a70810("FRD socket created.");f=frdSocket.ref("channels/"+e);f.on("value",function(b){try{var c=b.val();_5276b5584e6156b37336e226a43b1ad6e8a70810("FRD on message event triggered message length: "+JSON.stringify(c).length);"message"in c&&(_3221add75ae8d2697c3a097b1a8c31ed7efdfe63(c.message),_a21e261523dc4bcfd8a9d1429ae575ee53c8e0dd(c.message),_5276b5584e6156b37336e226a43b1ad6e8a70810("FRD msg payload: "+JSON.stringify(c.message.data)))}catch(g){_5276b5584e6156b37336e226a43b1ad6e8a70810("!!! Error occurred in FRD on message handler: "+
g,"error")}});_d29b4927aa52b076e9b7c71830f53e6ba20fad14()})["catch"](function(c){"code"in c?_5276b5584e6156b37336e226a43b1ad6e8a70810("Login Failed!",c.code,"error"):"message"in c?_5276b5584e6156b37336e226a43b1ad6e8a70810("Error message: ",c.message,"error"):console.error("Error occurred while trying to auth to Firebase",c);try{console.error(c),_5276b5584e6156b37336e226a43b1ad6e8a70810('FRD Auth Error: "'+JSON.stringify(c)+'"',"error")}catch(h){}_1c3f31d45ecdbac9ceb6d068644be1b8db7fa3c9({push_type:"frd-socket-open",
attempt:1,success:0,completion_time:0});"auth/invalid-custom-token"===c.code&&setTimeout(function(){d++;_160928176a351b2d72c81727c96a8aa2c6643c2f({attempt:d})},2E3)}):setTimeout(function(){d++;_160928176a351b2d72c81727c96a8aa2c6643c2f({attempt:d})},2E3)},100)}var firebaseApp;function _eddd36b4d76cebc67cacf58e4d40416ac1136b0d(){var b=!1;"undefined"!=typeof firebase&&(b=!0);return b}
function _160928176a351b2d72c81727c96a8aa2c6643c2f(b){var c={current:1,max:2};"undefined"!=typeof b&&"attempt"in b&&(c.current=b.attempt);"native-app"==clientRunningScript||_eddd36b4d76cebc67cacf58e4d40416ac1136b0d()?c.current<=c.max&&(b=baseUrl+"/setup"+_1f2408cf2ad672d01a2f6ca772f9a3a4f218d0df(),$.ajax({type:"GET",url:b,timeout:1E4,xhrFields:{withCredentials:!0},success:function(b){if(!b.error||"user_not_logged_in"!==b.error)if("token"in b&&"channel_id"in b)if("config"in b)try{"undefined"==typeof firebaseApp?
_41615488b291cbf790bdfe41ae3c09af35a2f3be({attempt:c,server_resp:b}):firebase.app()["delete"]().then(function(){_41615488b291cbf790bdfe41ae3c09af35a2f3be({attempt:c,server_resp:b})})["catch"](function(b){console.error('Error occurred deleting the firebase app: "'+b+'"')})}catch(d){console.error('Error reconfiging the firebase app:  "'+d+'"')}else _3e77cfbc326fc093fd009fb72b95e5decb151ef8(b.client_key,b.token,b.channel_id,c.current);else _160928176a351b2d72c81727c96a8aa2c6643c2f({attempt:c.current+
1})},error:function(b,d){_160928176a351b2d72c81727c96a8aa2c6643c2f({attempt:c.current+1})}})):(b=getLanguageSpecificText("push_js_lib_load_error_pt1",globalDefaultLanguage)+' <a href="javascript:void(0)" onclick="window.location.reload();">'+getLanguageSpecificText("push_js_lib_load_error_pt2",globalDefaultLanguage)+"</a> "+getLanguageSpecificText("push_js_lib_load_error_pt3",globalDefaultLanguage),4>c.current?(console.info({message:"push lib load failure. try again in 3 seconds",attempt_count:c.current}),
setTimeout(function(){_160928176a351b2d72c81727c96a8aa2c6643c2f({attempt:++c.current})},3E3)):displayAlertMessage(b,"error",6E4))}
function _41615488b291cbf790bdfe41ae3c09af35a2f3be(b){try{var c=b.server_resp,e=c.config;firebaseApp=firebase.initializeApp(e);_3e77cfbc326fc093fd009fb72b95e5decb151ef8(c.client_key,c.token,c.channel_id,b.attempt.current);5>Math.floor(100*Math.random())&&"apiKey"in e&&e.apiKey.substr(e.apiKey.length-2)}catch(d){console.error("Error occurred defining firebase app: "+d)}}
function _a21e261523dc4bcfd8a9d1429ae575ee53c8e0dd(b){"native-app"==clientRunningScript?(scrubIncomingCAPIforLogs(a),alertMainAppWindowOfPushSocketEvent({event:"message",capi:a}),globalTsLastPushRcvd=new Date):_ee13f699626cda3f1e12d4e2a779ccde9d557d04(b.data)}
function _61e53086f8093861ec1fa866e1510e06155519fa(){"native-app"!=clientRunningScript?firebase.auth().signOut().then(function(){_5276b5584e6156b37336e226a43b1ad6e8a70810("Signed out of Firebase instance.  AKA Closing FRD Socket.");_1c3f31d45ecdbac9ceb6d068644be1b8db7fa3c9({push_type:"frd-socket-close",attempt:0,success:0,completion_time:0});_160928176a351b2d72c81727c96a8aa2c6643c2f()})["catch"](function(b){_160928176a351b2d72c81727c96a8aa2c6643c2f();console.error("Error signing out the app!",b)}):
"native-app"==clientRunningScript&&checkIfScriptIsLoadedInDesktopBG()&&_cf94feae83b29d72ea66153ef1ea100664fbc29e()};