function _537ad0301f9c4518a816b02cfda997a388f05f76(a){a=void 0===a?{}:a;var d=a.channel,b=a.push_url,e=moment(a.date),f=e.clone().add(50,"seconds"),c=io(b,{reconnectionAttempts:1E3,reconnectionDelay:5E3,reconnectionDelayMax:15E3,query:a,timestampRequests:!0});c.on("connect",function(){_d29b4927aa52b076e9b7c71830f53e6ba20fad14();_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+"[Socket ID: "+c.id+"][Channel: "+d+"] socket connected!")});c.on(a.event,function(a){JSON.parse(a.message.data);
_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+" Received MT push on channel: "+a.channel);_3221add75ae8d2697c3a097b1a8c31ed7efdfe63(a.message);_ee13f699626cda3f1e12d4e2a779ccde9d557d04(a.message.data)});c.on("connect_error",function(a){_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+" socket connect error!");console.error(a)});c.on("disconnect",function(a){_b79e263206af68c8e08a3030b1a384316d3051a4();_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+
" socket disconnected because: "+a)});c.on("reconnect_attempt",function(a){_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+" socket reconnect attempt #: "+a+".  Time since last signature rcvd: "+moment().diff(e)+".  Should we get a new token? "+moment().isAfter(f));moment().isAfter(f)&&(_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+" socket signature has expired.  We should request a new one from GAE."),_6241f70323d5d16bac64e9713720689edd8c5f52(_feeefa75c19543d2f943bbf01dbe9d2cd401b66a))});
c.on("reconnect_failed",function(){_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+" socket reconnect failed")});c.on("reconnect",function(){_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+" socket reconnect success")});c.on("ping",function(){_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+' socket sending "ping" event.')});c.on("pong",function(a){_5276b5584e6156b37336e226a43b1ad6e8a70810(_1afd4493c310fd614dcee9b8081e0f682bd654d4()+
' socket "pong" event.  Time since last "ping" received: '+a+"ms")});window.closeMTSocket=function(){c.disconnect()}}function _1afd4493c310fd614dcee9b8081e0f682bd654d4(){return"[tyson]"}function _feeefa75c19543d2f943bbf01dbe9d2cd401b66a(){try{_c820acdb9b07675cd18ab2f3adff7191c6f8114e({optional_push_setup_success_callback:function(){closeMTSocket()}})}catch(a){console.error("Error occurred trying to re-establish push socket")}}
function _c820acdb9b07675cd18ab2f3adff7191c6f8114e(a){a=void 0===a?{}:a;var d=0;"attempt"in a&&(d=a.attempt);if(3>d)_5276b5584e6156b37336e226a43b1ad6e8a70810("client push setup attempt #:"+d),$.ajax({type:"POST",url:baseUrl+"/client-push-setup"+_1f2408cf2ad672d01a2f6ca772f9a3a4f218d0df()+"&push_type="+pushProvider,dataType:"json",beforeSend:function(){(new Date).getTime()},timeout:4E3,xhrFields:{withCredentials:!0},success:function(b){console.info("[MT PUSH] client-push-setup req response",b);"ok"in
b&&!0===b.ok?(_5276b5584e6156b37336e226a43b1ad6e8a70810("client push setup success!",b),"function"==typeof a.optional_push_setup_success_callback&&a.optional_push_setup_success_callback(),_537ad0301f9c4518a816b02cfda997a388f05f76(b)):("init_app_load"in a&&setTimeout(function(){var b=$.extend(a,{attempt:++d});_c820acdb9b07675cd18ab2f3adff7191c6f8114e(b)},3E3),console.error("Error, unrecognized response in client-push-setup req",b))},error:function(){console.info(a);"init_app_load"in a&&setTimeout(function(){var b=
$.extend(a,{attempt:++d});_c820acdb9b07675cd18ab2f3adff7191c6f8114e(b)},3E3)}});else try{_1c3f31d45ecdbac9ceb6d068644be1b8db7fa3c9({push_type:"push-socket-setup-info-final-failure",sub_type:pushProvider,attempt:1,success:0,completion_time:0})}catch(b){console.error("Error occurred while trying to record MT Stats event for socket reestablishment",b)}}
function _5cd1bb072ed8b92ea28ccd994f65c71b70e4adc3(){$.ajax({type:"GET",url:"https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js",timeout:1E4,cache:!1,dataType:"script",success:function(){_c820acdb9b07675cd18ab2f3adff7191c6f8114e({init_app_load:!0})}})};